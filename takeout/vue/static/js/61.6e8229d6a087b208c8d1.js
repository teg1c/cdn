webpackJsonp([61],{mrLj:function(t,s){},or8y:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=a("Dd8w"),e=a.n(i),o=a("Cz8s"),r=a("Vr3d"),n=a("wkeR"),c=a("deIj"),l=a("NYxO"),d={data:function(){return{showPreLoading:!0,records:{page:1,psize:10,loading:!1,finished:!1,empty:!1,data:[]},cart:{num:0},from:"",type:"takeout",table_id:0,table:{},store:{},hotGoods:[],keyword:"",searchHistory:[],activetabs:0,showMoveDot:[]}},components:{PublicHeader:o.a,GoodsHandle:r.a,SimpleGoodsHandle:n.a},methods:e()({},Object(l.b)(["replaceStore","replaceCart","replaceAllcart"]),{onTapToSearch:function(t){this.$refs.searchInput.blur(),this.onSearch(!0)},onSearch:function(t,s){var a=this;s?a.keyword=s:a.keyword&&-1==a.searchHistory.indexOf(a.keyword)&&(a.searchHistory.push(a.keyword),a.util.setStorage("mallSearchHistory.goods",a.searchHistory));a.keyword?(a.records.loading=!0,Object(c.b)({vue:a,force:t,recordsName:"goods",url:"wmall/mall/goods/search",data:{is_search:1,keyword:a.keyword},success:function(t){a.records.empty||a.replaceAllcart(t.carts)}})):a.util.$toast("请输入商品名称","",1e3)},onLoad:function(){var t=this;t.searchHistory=t.util.getStorage("mallSearchHistory.goods"),t.searchHistory||(t.searchHistory=[]),Object(c.a)({vue:t,url:"wmall/mall/goods/search",data:{is_search:0},success:function(s){t.hotGoods=s.hotGoods}})},onDetail:function(t,s){this.table_id>0?this.$router.push(this.util.getUrl({path:"tangshi/pages/table/goodsDetail",query:{id:t,sid:s,table_id:this.table_id}})):this.$router.push(this.util.getUrl({path:"pages/store/goodsDetail",query:{id:t,sid:s,pindan_id:this.pindan_id}}))},onDelHistory:function(){var t=this;this.$dialog.confirm({message:"确定清除历史记录吗"}).then(function(s){"confirm"==s&&(t.util.removeStorage("mallSearchHistory.goods"),t.searchHistory=[])})}}),computed:e()({},Object(l.c)(["icart","allcart"]),{cartTotalNum:function(){var t=0,s=this.allcart;if(s)for(var a in s)for(var i in s[a].cart.data)for(var e in s[a].cart.data[i])t+=s[a].cart.data[i][e].num;return t}}),created:function(){},mounted:function(){this.onLoad()}},u={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"mall-goods-seach"}},[a("public-header",{attrs:{title:"商品搜索"}}),t._v(" "),a("div",{staticClass:"content"},[a("form",{attrs:{action:""}},[a("div",{staticClass:"search-header van-hairline--bottom"},[a("div",{staticClass:"search-content"},[a("van-icon",{attrs:{name:"search"}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],ref:"searchInput",staticClass:"search-input",attrs:{type:"text",placeholder:"请输入商品名称"},domProps:{value:t.keyword},on:{keyup:function(s){return s.type.indexOf("key")||13===s.keyCode?t.onTapToSearch(s):null},input:function(s){s.target.composing||(t.keyword=s.target.value)}}})],1),t._v(" "),a("div",{staticClass:"search-btn",on:{click:function(s){return t.onSearch(!0)}}},[t._v("搜索")])])]),t._v(" "),1==t.records.page?[t.hotGoods&&t.hotGoods.length>0?a("div",{staticClass:"rmd-history"},[a("div",{staticClass:"search-rmd-wrap"},[t._m(0),t._v(" "),a("div",{staticClass:"search-rmd"},t._l(t.hotGoods,function(s,i){return a("div",{key:"hot"+i,on:{click:function(a){return t.onSearch(!0,s.title)}}},[t._v(t._s(s.title))])}),0)])]):t._e(),t._v(" "),t.searchHistory&&t.searchHistory.length>0?a("div",{staticClass:"rmd-history"},[a("div",{staticClass:"search-rmd-wrap"},[a("div",{staticClass:"search-rmd-title"},[a("div",{staticClass:"van-hairline--bottom"},[t._v("搜索历史")]),t._v(" "),a("div",{staticClass:"icon icon-delete",on:{click:t.onDelHistory}})]),t._v(" "),a("div",{staticClass:"search-rmd"},t._l(t.searchHistory,function(s,i){return a("div",{key:"h"+i,on:{click:function(a){return t.onSearch(!0,s)}}},[t._v(t._s(s))])}),0)])]):t._e()]:t._e(),t._v(" "),a("div",{staticClass:"mall-goods-seach-warp"},[t.records.empty?t._e():a("van-list",{attrs:{finished:t.records.finished,offset:100,"immediate-check":!1},on:{load:function(s){return t.onSearch(!1)}},model:{value:t.records.loading,callback:function(s){t.$set(t.records,"loading",s)},expression:"records.loading"}},[a("div",{staticClass:"goods-list"},t._l(t.records.data,function(s){return a("div",{key:s.id,staticClass:"goods-item van-hairline--bottom"},[a("div",{staticClass:"goods-thumb",on:{click:function(a){return t.onDetail(s.id,s.sid)}}},[a("img",{staticClass:"img-100",attrs:{src:s.thumb,alt:""}})]),t._v(" "),a("div",{staticClass:"goods-info"},[a("div",{staticClass:"w-100 ellipsis font-14 font-500",on:{click:function(a){return t.onDetail(s.id,s.sid)}}},[t._v(t._s(s.title))]),t._v(" "),a("div",{staticClass:"c-gray flex font-12 margin-5-t",on:{click:function(a){return t.onDetail(s.id,s.sid)}}},[a("span",[t._v("已售"+t._s(s.sailed))]),t._v(" "),a("span",{staticClass:"margin-15-l"},[t._v("赞"+t._s(s.comment_good))])]),t._v(" "),1!=s.svip_status||s.discount_price?t._e():a("div",{staticClass:"svip-price-tips margin-5-t"},[a("div",{staticClass:"svip-price"},[a("i",{staticClass:"icon icon-crownfill"}),t._v(" "),a("span",[t._v(t._s(s.discount)+"折")])]),t._v(" "),a("div",{staticClass:"svip-activity"},[t._v("超级会员专享")])]),t._v(" "),a("div",{staticClass:"font-500 c-danger font-14 flex margin-5-t",on:{click:function(a){return t.onDetail(s.id,s.sid)}}},[a("span",[t._v(t._s(t.Lang.dollarSign)+t._s(s.price)+t._s(s.unitname_cn))]),t._v(" "),1!=s.svip_status||s.discount_price>0?a("div",{staticClass:"flex margin-10-l"},[s.discount?[a("van-icon",{attrs:{name:"tag"}}),t._v(" "),a("span",{staticClass:"font-12"},[t._v(t._s(s.discount)+"折 限"+t._s(s.max_buy_limit)+"份 "+t._s(s.unitnum>1?s.unitnum_multi_cn+"购":""))])]:s.unitnum>1?[a("van-icon",{attrs:{name:"tag"}}),t._v(" "),a("span",{staticClass:"font-12"},[t._v(t._s(s.unitnum_multi_cn)+"购")])]:t._e()],2):s.unitnum>1?a("div",{staticClass:"flex margin-10-l"},[a("van-icon",{attrs:{name:"tag"}}),t._v(" "),a("span",{staticClass:"font-12"},[t._v(t._s(s.unitnum_multi_cn)+"购")])],1):t._e(),t._v(" "),1!=s.kabao_status||s.discount_price?t._e():a("div",{staticClass:"kabao-price-wrap"},[a("span",{staticClass:"kabao-price"},[t._v("\n\t\t\t\t\t\t\t\t\t\t￥"+t._s(s.kabao_price)+"\n\t\t\t\t\t\t\t\t\t\t"),a("span",{staticClass:"font-14"},[t._v(t._s(s.unitname_cn))])]),t._v(" "),a("span",{staticClass:"kabao-label"},[a("i",{staticClass:"icon icon-vip"}),t._v(" "),a("span",[t._v(t._s(s.kabao_group_title))])])])]),t._v(" "),a("div",{staticClass:"goods-operation"},[a("simple-goods-handle",{attrs:{goods:s,cartIndex:s.cartIndex,mode:"all"}})],1)])])}),0)])],1),t._v(" "),t.records.empty?a("div",{staticClass:"no-data"},[a("img",{attrs:{src:"static/img/order_no_con.png",alt:""}}),t._v(" "),a("p",[t._v("暂无相关商品，敬请期待")])]):t._e()],2),t._v(" "),t.cartTotalNum>0?a("div",{staticClass:"cartop"},[a("router-link",{attrs:{to:t.util.getUrl({path:"/mall/pages/cart/index",query:{}})}},[a("div",{staticClass:"num"},[t._v(t._s(t.cartTotalNum))]),t._v(" "),a("div",{staticClass:"icon icon-cartfill"})])],1):t._e(),t._v(" "),t.showPreLoading?a("iloading"):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"search-rmd-title "},[s("div",{staticClass:"van-hairline--bottom"},[this._v("热门搜索")])])}]};var v=a("VU/8")(d,u,!1,function(t){a("mrLj")},null,null);s.default=v.exports}});
//# sourceMappingURL=61.6e8229d6a087b208c8d1.js.map