webpackJsonp([213],{PteV:function(t,s){},uYug:function(t,s,o){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=o("Cz8s"),a=(o("deIj"),{data:function(){return{sid:0,showPreLoading:!0,shop_style:"",couponsCollect:[],couponsKabao:[]}},components:{PublicHeader:i.a},methods:{onLoad:function(t){var s=this;this.util.request({url:"wmall/shop/coupon/collect",data:{sid:this.sid}}).then(function(t){s.showPreLoading=!1;var o=t.data.message;o.errno?s.$toast(o.message):(o=o.message,s.couponsCollect=o.couponsCollect,o.couponsKabao.errno&&(o.couponsKabao=[]),s.couponsKabao=o.couponsKabao)})},onGetKabao:function(){var t=this,s=this;s.$dialog.confirm({title:"开通会员才能领取",message:"请问要现在去开通吗?"}).then(function(){t.$router.push(s.util.getUrl({path:"/plugin/pages/kabao/detail",query:{sid:s.sid}}))})},onGetCoupon:function(t,s){var o=this;this.util.request({url:"wmall/channel/coupon/get",data:{sid:t}}).then(function(t){var i=t.data.message;i.errno||(o.couponsCollect.coupons[s].isget=!0),o.$toast(i.message)})}},created:function(){var t=this.util.parseQuery(this.$route.query);this.sid=t.sid},mounted:function(){this.onLoad()}}),n={render:function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{class:"shop-"+t.shop_style,attrs:{id:"shop-coupon"}},[o("public-header",{attrs:{title:"代金券"}}),t._v(" "),o("div",{staticClass:"content font-14"},[t.couponsCollect&&t.couponsCollect.coupons&&t.couponsCollect.coupons.length>0||t.couponsKabao&&t.couponsKabao.length>0?[t.couponsCollect&&t.couponsCollect.coupons&&t.couponsCollect.coupons.length>0?t._l(t.couponsCollect.coupons,function(s,i){return o("div",{key:s.id,staticClass:"coupon-item"},[o("div",{staticClass:"left"},[o("div",[o("span",{staticClass:"font-14"},[t._v(t._s(t.Lang.dollarSign))]),o("span",{staticClass:"discount"},[t._v(t._s(s.condition))])]),t._v(" "),o("div",{staticClass:"margin-5-t "},[t._v("满"+t._s(s.condition)+"元使用")])]),t._v(" "),o("div",{staticClass:"right"},[o("div",{staticClass:"w-100 ellipsis font-14 font-bold"},[o("i",{staticClass:"icon icon-crownfill"}),t._v(t._s(s.title))]),t._v(" "),o("div",{staticClass:"w-100 ellipsis c-gray margin-10-tb"},[t._v("全场通用")]),t._v(" "),o("div",{staticClass:"w-100 ellipsis c-gray"},[t._v("领取后"+t._s(s.use_days_limit)+"天内有效")]),t._v(" "),s.isget?[t._m(0,!0),t._v(" "),o("router-link",{staticClass:"btn-collect",attrs:{to:t.util.getUrl({path:"/shop/pages/home/index",query:{sid:t.couponsCollect.sid}})}},[t._v("\n\t\t\t\t\t\t\t\t立即使用\n\t\t\t\t\t\t\t")])]:[o("div",{staticClass:"btn-collect",on:{click:function(s){return t.onGetCoupon(t.couponsCollect.sid,i)}}},[t._v("立即领取")])]],2)])}):t._e(),t._v(" "),t.couponsKabao&&t.couponsKabao.length>0?[o("div",{staticClass:"flex-lr font-12 margin-15 "},[o("div",[t._v("以下优惠券限门店会员领取")]),t._v(" "),o("div",{staticClass:"kabao-bind",on:{click:function(s){return t.util.jsUrl("/plugin/pages/kabao/detail",{sid:t.sid},"push")}}},[t._v("开通会员")])]),t._v(" "),t._l(t.couponsKabao,function(s,i){return o("div",{key:s.id,staticClass:"coupon-item kabao"},[o("div",{staticClass:"left"},[o("div",[o("span",{staticClass:"font-14"},[t._v(t._s(t.Lang.dollarSign))]),o("span",{staticClass:"discount"},[t._v(t._s(s.discount))])]),t._v(" "),o("div",{staticClass:"margin-5-t "},[t._v("满"+t._s(s.condition)+"元使用")])]),t._v(" "),o("div",{staticClass:"right"},[t._m(1,!0),t._v(" "),o("div",{staticClass:"w-100 ellipsis c-gray margin-10-tb"},[t._v("全场通用")]),t._v(" "),o("div",{staticClass:"w-100 ellipsis c-gray"},[t._v("领取后"+t._s(s.use_days_limit)+"天内有效")]),t._v(" "),o("div",{staticClass:"btn-collect",on:{click:function(s){return t.onGetKabao()}}},[t._v("立即领取")])])])})]:t._e()]:t._e(),t._v(" "),t.showPreLoading?o("iloading"):t._e()],2)],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"had"},[s("img",{staticClass:"img-100",attrs:{src:"http://cos.lalawaimai.com/we7_wmall/wxapp/gone.png"}})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"w-100 ellipsis font-14 font-bold"},[s("i",{staticClass:"icon icon-crownfill"}),this._v("门店会员优惠券")])}]};var e=o("VU/8")(a,n,!1,function(t){o("PteV")},null,null);s.default=e.exports}});
//# sourceMappingURL=213.a79ec41656b2f742ab27.js.map