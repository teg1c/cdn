webpackJsonp([40],{"3MbS":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("Gu7T"),s=r.n(n),i=r("mzkE"),a=r("Cz8s"),o=r("NPH5"),d=r("Fd2+"),l={components:{PublicHeader:a.a,PublicFooter:i.a,load:o.a,Dialog:d.a},data:function(){return{orderStatusArr:[{text:"申请售后",refund_type:0},{text:"售后处理中",refund_type:1},{text:"售后记录",refund_type:2}],orders:{page:1,psize:10,finished:!1,loading:!1,data:[]},filter:{items:{refund_type:0}},showPreLoading:!0,menufooter:{}}},methods:{onToggleStatus:function(t){this.filter.items.refund_type=t,this.onLoad(!0)},onChangeStatus:function(t,e){if("cancel"==e)var r={url:"wmall/order/index/cancel?id="+t,confirm:"确定取消订单吗?"};else if("end_1"==e||"end_2"==e){r={url:"wmall/order/index/end?id="+t,confirm:"你确定收到该商家的外卖?",successUrl:"/mall/pages/order/comment?order_id="+t};"end_2"==e&&(r.confirm="你确定收到该商家的外卖?")}else if("remind"==e)r={url:"wmall/order/index/remind?id="+t};this.util.jspost(r)},onFinishMealPay:function(){d.a.confirm({title:"温馨提示",message:"您的支付方式为餐后支付，请到商家收银台付款"}).then(function(){})},onLoad:function(t){var e=this;if(t&&(this.orders={page:1,psize:10,loading:!0,finished:!1,data:[]}),this.orders.finished)return!1;this.util.request({url:"wmall/mall/service/list",data:{page:this.orders.page,psize:this.orders.psize,refund_type:this.filter.items.refund_type,menufooter:1}}).then(function(t){var r=t.data.message;r.errno?e.$toast(r.message):(e.hideLoading(),r=r.message,e.orders.data=[].concat(s()(e.orders.data),s()(r.orders)),e.orders.loading=!1,r.orders.length<e.orders.psize&&(e.orders.finished=!0),e.orders.page++,e.menufooter=window.menufooter)})},onCopy:function(t){this.util.$toast("复制成功")},onError:function(t){this.util.$toast("复制失败")},hideLoading:function(){this.showPreLoading=!1}},mounted:function(){}},u={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"service-order-list"}},[r("public-header",{attrs:{title:"售后"}}),t._v(" "),r("public-footer",{attrs:{preLoading:t.showPreLoading,menufooter:t.menufooter}}),t._v(" "),r("div",{staticClass:"content"},[r("van-tabs",{attrs:{sticky:"","offset-top":"46"},on:{change:t.onToggleStatus},model:{value:t.filter.items.refund_type,callback:function(e){t.$set(t.filter.items,"refund_type",e)},expression:"filter.items.refund_type"}},t._l(t.orderStatusArr,function(e,n){return r("van-tab",{key:n,attrs:{title:e.text,name:e.refund_type}},[r("van-list",{attrs:{finished:t.orders.finished,offset:100,"immediate-check":!0},on:{load:t.onLoad},model:{value:t.orders.loading,callback:function(e){t.$set(t.orders,"loading",e)},expression:"orders.loading"}},[t.orders.data.length>0?[t._l(t.orders.data,function(e,n){return[r("div",{staticClass:"order-item"},[r("div",{staticClass:"info",on:{click:function(r){return t.util.jsUrl("/mall/pages/order/detail",{id:e.id})}}},[r("div",{staticClass:"flex-lr"},[r("div",[r("span",[t._v(t._s(e.store.title))])]),t._v(" "),r("div",[t._v(t._s(e.status_cn))])]),t._v(" "),r("div",{staticClass:"goods-list"},t._l(e.goods,function(t,e){return r("div",{key:e,staticClass:"goods-item"},[r("div",{staticClass:"goods-thumb van-hairline--surround"},[r("img",{staticClass:"img-100",attrs:{src:t.thumb,alt:""}})])])}),0),t._v(" "),r("div",{staticClass:"total"},[r("div",{staticClass:"margin-10-r font-12"},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t共\n\t\t\t\t\t\t\t\t\t\t\t"),r("span",[t._v(t._s(e.goods_num))]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t类商品\n\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),r("div",{staticClass:"c-danger"},[r("span",{staticClass:"font-12"},[t._v(t._s(t.Lang.dollarSign))]),r("span",{staticClass:"font-16 font-bold"},[t._v(t._s(e.final_fee))])])])]),t._v(" "),r("div",{staticClass:"btn-group van-hairline--top"},[r("van-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.ordersn,expression:"item.ordersn",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onError,expression:"onError",arg:"error"}],attrs:{plain:"",round:"",hairline:"",type:"default"}},[t._v("复制订单编号")]),t._v(" "),0==e.refund_status?[r("van-button",{attrs:{plain:"",round:"",hairline:"",type:"default"},on:{click:function(r){return t.util.jsUrl("/mall/pages/service/refund",{id:e.id})}}},[t._v("申请售后")])]:e.refund_status>0?[r("van-button",{attrs:{plain:"",round:"",hairline:"",size:"normal"},on:{click:function(r){return t.util.jsUrl("/mall/pages/service/detail",{id:e.id})}}},[t._v("售后详情")])]:t._e()],2)])]}),t._v(" "),t.orders.finished?r("load",{attrs:{type:"loaded",text:"我是有底线的",bgcolor:"#f5f5f5"}}):t._e()]:r("div",{staticClass:"common-no-con"},[r("img",{attrs:{src:"static/img/order_no_con.png",alt:""}}),t._v(" "),r("p",[t._v("暂无售后信息！")])])],2)],1)}),1)],1)],1)},staticRenderFns:[]};var c=r("VU/8")(l,u,!1,function(t){r("vzjh")},null,null);e.default=c.exports},vzjh:function(t,e){}});
//# sourceMappingURL=40.1eede5239ac0521df548.js.map