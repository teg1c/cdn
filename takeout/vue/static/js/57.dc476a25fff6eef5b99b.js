webpackJsonp([57],{iTTk:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("mvHQ"),n=s.n(o),i=s("Dd8w"),a=s.n(i),r=s("Cz8s"),l=s("+TmT"),c=s("deIj"),u=s("NYxO"),d={data:function(){return{timePickerShow:!1,type:"title",store:{title:"",logo:"",content:"",business_hours:[],telephone:"",address:"",thumbs:[],category_arr:[],notice:"",tips:"",haodian_tags:[]},categorys:[],businessHoursSelected:{index:0,type:"s"},logo:[],thumbs:[],columns:[{values:[],defaultIndex:0},{values:[],defaultIndex:0}],popup:{haodian_category:!1},tag:"",islegal:!1,showPreLoading:!0}},components:{publicHeader:r.a,uploader:l.a},methods:a()({},Object(u.b)(["replaceState"]),{onToggleTimePicker:function(e,t){this.timePickerShow=!this.timePickerShow,e>-1&&("s"==t||"e"==t)&&(this.businessHoursSelected.index=e,this.businessHoursSelected.type=t)},onConfirmTime:function(e){if(e){var t=this.businessHoursSelected.index,s=this.businessHoursSelected.type;this.store.business_hours[t][s]=e,this.onToggleTimePicker()}},onAddTime:function(){return"business_hours"==this.type&&(this.store.business_hours.length>=3?(this.util.$toast("最多可添加三个营业时间段"),!1):void this.store.business_hours.push({s:"08:00",e:"21:00"}))},onRemoveTime:function(e){if("business_hours"!=this.type)return!1;this.store.business_hours.splice(e,1)},onToggleCategory:function(e,t){this.$refs.checkboxes[t].toggle()},onChangeLogo:function(e){var t="";e&&1==e.length&&e[0].filename&&(t=e[0].filename),this.store.logo=t},onChangeThumbs:function(e){var t=[];if(e&&e.length>0)for(var s in e)t.push({image:e[s].url,url:""});this.store.thumbs=t},onTogglePopup:function(e){this.popup[e]=!this.popup[e]},onLoad:function(){var e=this;Object(c.a)({url:"errander/store/info",vue:e,autoAssign:!0,variable:"store",data:{type:e.type},success:function(t){if(e.islegal=!0,"logo"==e.type)e.store.logo&&e.logo.push({url:e.store.logo});else if("thumbs"==e.type){if(e.store.thumbs&&e.store.thumbs.length>0)for(var s in e.store.thumbs)e.thumbs.push({url:e.store.thumbs[s].image})}else if("address"==e.type){var o=e.searchLocationInfo;o&&o.location_x&&o.location_y&&(e.store=e.util.extend(e.store,o))}}})},onSubmit:function(){var e=this;if(!e.islegal)return!1;e.islegal=!1;var t=e.store[e.type];"address"==e.type&&(t={address:e.store.address,location_x:e.store.location_x,location_y:e.store.location_y}),Object(c.c)({url:"errander/store/setting",vue:e,data:{type:e.type,value:n()(t)},success:function(t){e.util.$toast(t,"back",1500,"replace"),"address"==e.type&&e.replaceState({key:"searchLocationInfo",val:{}})},fail:function(t){e.util.$toast(t),e.islegal=!0}})}}),computed:a()({},Object(u.c)(["searchLocationInfo"])),created:function(){var e=this.util.parseQuery(this.$route.query);this.type=e.type},mounted:function(){this.onLoad()}},p={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"store-update"}},[s("public-header",{attrs:{title:"基本信息设置"}}),e._v(" "),s("div",{staticClass:"content"},["title"==e.type?s("van-cell-group",[s("van-field",{attrs:{label:"门店名称",placeholder:"请输入门店名称","input-align":"right"},model:{value:e.store.title,callback:function(t){e.$set(e.store,"title",t)},expression:"store.title"}})],1):"telephone"==e.type?s("van-cell-group",[s("van-field",{attrs:{label:"联系电话",placeholder:"请输入门店联系电话","input-align":"right"},model:{value:e.store.telephone,callback:function(t){e.$set(e.store,"telephone",t)},expression:"store.telephone"}})],1):"address"==e.type?s("van-cell-group",[s("van-cell",{attrs:{title:"门店经纬度","is-link":"",to:e.util.getUrl({path:"/plugin/pages/paotui/store/shop/location",query:{}})}},[e.store.location_x&&e.store.location_y?s("span",{attrs:{slog:"-"}},[e._v("重新设置")]):s("span",{attrs:{slog:"-"}},[e._v("去设置")])]),e._v(" "),s("van-field",{attrs:{label:"门店地址",placeholder:"请输入门店地址","input-align":"right"},model:{value:e.store.address,callback:function(t){e.$set(e.store,"address",t)},expression:"store.address"}})],1):"content"==e.type?[s("div",{staticClass:"font-14 padding-15-lr padding-10-tb c-gray"},[e._v("门店描述")]),e._v(" "),s("van-cell-group",[s("van-field",{attrs:{type:"textarea",rows:"3",autosize:"",placeholder:"请输入门店描述"},model:{value:e.store.content,callback:function(t){e.$set(e.store,"content",t)},expression:"store.content"}})],1)]:"notice"==e.type?[s("div",{staticClass:"font-14 padding-15-lr padding-10-tb c-gray"},[e._v("商户公告")]),e._v(" "),s("van-cell-group",[s("van-field",{attrs:{type:"textarea",rows:"3",autosize:"",placeholder:"请输入商户公告"},model:{value:e.store.notice,callback:function(t){e.$set(e.store,"notice",t)},expression:"store.notice"}})],1)]:"tips"==e.type?[s("div",{staticClass:"font-14 padding-15-lr padding-10-tb c-gray"},[e._v("商品列表页提示")]),e._v(" "),s("van-cell-group",[s("van-field",{attrs:{type:"textarea",rows:"3",autosize:"",placeholder:"用户进入页面后, 将弹框提示设置的内容"},model:{value:e.store.tips,callback:function(t){e.$set(e.store,"tips",t)},expression:"store.tips"}})],1)]:"business_hours"==e.type?[s("div",{staticClass:"font-14 padding-15-lr padding-10-tb c-gray"},[e._v("营业时间")]),e._v(" "),s("van-cell-group",e._l(e.store.business_hours,function(t,o){return s("van-cell",{key:o},[s("div",{attrs:{slot:"title"},slot:"title"},[s("span",{on:{click:function(t){return e.onToggleTimePicker(o,"s")}}},[e._v(e._s(t.s))]),e._v(" "),s("span",{staticClass:"padding-10-lr"},[e._v("至")]),e._v(" "),s("span",{on:{click:function(t){return e.onToggleTimePicker(o,"e")}}},[e._v(e._s(t.e))])]),e._v(" "),s("div",{staticClass:"c-info",attrs:{slot:"right-icon"},on:{click:function(t){return e.onRemoveTime(o)}},slot:"right-icon"},[e._v("移除")])])}),1),e._v(" "),s("van-cell-group",{class:{"margin-10-t":e.store.business_hours.length>0}},[s("van-cell",[s("div",{staticClass:"c-info",attrs:{slot:"title"},on:{click:e.onAddTime},slot:"title"},[s("i",{staticClass:"icon icon-roundadd font-16"}),e._v("添加时间段\n\t\t\t\t\t")])])],1),e._v(" "),s("van-popup",{attrs:{position:"bottom"},model:{value:e.timePickerShow,callback:function(t){e.timePickerShow=t},expression:"timePickerShow"}},[s("van-datetime-picker",{attrs:{type:"time"},on:{confirm:e.onConfirmTime,cancel:e.onToggleTimePicker}})],1)]:"logo"==e.type?[s("div",{staticClass:"font-14 padding-15-lr padding-10-tb c-gray"},[e._v("门店Logo")]),e._v(" "),s("uploader",{attrs:{max:"1",value:e.logo},on:{onGetUrl:e.onChangeLogo,delete:e.onChangeLogo}})]:"thumbs"==e.type?[s("div",{staticClass:"font-14 padding-15-lr padding-10-tb c-gray"},[e._v("门店实景")]),e._v(" "),s("uploader",{attrs:{max:"7",value:e.thumbs},on:{onGetUrl:e.onChangeThumbs,delete:e.onChangeThumbs}})]:e._e(),e._v(" "),s("div",{staticClass:"padding-15"},[s("van-button",{staticClass:"bg-danger",attrs:{size:"normal",disabled:!e.islegal,block:""},on:{click:e.onSubmit}},[e._v("保存修改")])],1)],2),e._v(" "),e.showPreLoading?s("iloading"):e._e()],1)},staticRenderFns:[]};var g=s("VU/8")(d,p,!1,function(e){s("lD6H")},null,null);t.default=g.exports},lD6H:function(e,t){}});
//# sourceMappingURL=57.dc476a25fff6eef5b99b.js.map