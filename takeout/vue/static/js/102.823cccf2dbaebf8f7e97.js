webpackJsonp([102],{"K4U+":function(t,a){},VJVX:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=i("woOf"),e=i.n(s),n=i("Cz8s"),o=i("5ryX"),c=i("75NE"),r=i("deIj"),l=i("lVAl"),d=i("Jfm7"),v={components:{PublicHeader:n.a,navigator:o.a,CountDown:c.a,Comment:l.a},data:function(){return{id:0,activity:{status:0,is_favor:!1,thumbs:[]},comment:{page:2,psize:8,data:[]},store:{},take_status:0,member_takeinfo:{helper:[]},showPreLoading:!0,helpStatus:!1,zhezhaoShow:!1,danmus:[],danmu:{index:0,item:{},show:!1},menufooter:{},bargain_success:!1,black_member:{status:!1},failedTips:{type:"message",tips:"",btnText:"关闭",link:"/pages/home/index"}}},methods:{onLoad:function(){var t=this;Object(r.a)({vue:t,url:"kanjia/activity/detail",data:{id:t.id,page:1,psize:t.comment.psize,menufooter:1,_navc:1},autoAssign:!0,variable:"activity",success:function(a){t.store=e()(t.store,a.store),t.take_status=a.take_status,t.member_takeinfo=e()(t.member_takeinfo,a.member_takeinfo),1==t.activity.status&&0!=t.activity.total&&t.member_takeinfo.price==t.activity.price&&(t.bargain_success=!0),t.comment.data=a.comment,t.danmus=a.danmu,t.menufooter=window.menufooter;var i=window._share;i&&(i.success=function(){t.util.request({url:"gohome/common/share",data:{id:t.id,type:"kanjia"}}).then(function(t){})}),t.wx.share(i),setTimeout(function(){t.danmus&&(t.onToggleDanmu(),setInterval(function(){t.onToggleDanmu()},5e3))},5e3)},fail:function(a){if(-1e3==a.errno){var i=a.message.black_member;return t.black_member=i,void(t.failedTips.tips=i.tip)}}})},onToggleHelpStatus:function(){this.member_takeinfo.helper.length&&(this.helpStatus=!this.helpStatus)},onParticipate:function(){var t=this;1!=t.take_status&&Object(r.c)({vue:t,url:"kanjia/activity/create",data:{activityid:t.id},success:function(a){var i=a;t.util.$toast("参与成功",t.util.getUrl({path:"/gohome/pages/kanjia/share",query:{activityid:t.activity.id,uid:i}}),1e3)}})},onFavor:function(){Object(d.c)({vue:this,goods_id:this.activity.id,type:"kanjia",target:"activity"})},onToggleDanmu:function(){Object(d.b)({vue:this})},onComment:function(){Object(d.a)({vue:this,type:"kanjia",id:this.id})},onComplain:function(){this.util.setStorage("complainUrl",window.location.href),this.$router.push(this.util.getUrl({path:"/gohome/pages/complain/index"}))}},mounted:function(){this.$route.query&&this.$route.query.id>0&&(this.id=this.$route.query.id),this.onLoad()}},u={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{attrs:{id:"kanjia-detail"}},[i("public-header",{attrs:{title:"商品详情"}}),t._v(" "),i("div",{staticClass:"content"},[t.danmu.item&&t.danmu.item.nickname?i("transition",{attrs:{name:"danmu-fade",mode:"out-in"}},[i("div",{staticClass:"order-danmu",class:{"opacity-0":!t.danmu.show}},[i("div",{staticClass:"flex"},[i("img",{staticClass:"thumb",attrs:{src:t.danmu.item.avatar,alt:""}}),t._v(" "),i("span",{staticClass:"info"},[t._v(t._s(t.danmu.item.nickname)+"  "+t._s(t.danmu.item.time)+"购买了此商品")])])])]):t._e(),t._v(" "),i("div",{staticClass:"goods-info padding-15-lr padding-15-t bg-default"},[t.activity.thumbs&&t.activity.thumbs.length>0?i("van-swipe",{staticClass:"thumbs",attrs:{loop:"",autoplay:3e3,"indicator-color":"#ff2d4b"}},t._l(t.activity.thumbs,function(t,a){return i("van-swipe-item",{key:a},[i("img",{attrs:{src:t}})])}),1):i("div",{staticClass:"thumb"},[i("img",{staticClass:"img-100",attrs:{src:t.activity.thumb,alt:""}}),t._v(" "),3==t.activity.status?i("div",{staticClass:"end-bg"},[i("img",{attrs:{src:"static/img/end.png",alt:""}})]):t._e()]),t._v(" "),i("div",{staticClass:"title"},[t._v("【邀请好友帮忙砍价】"+t._s(t.activity.name))]),t._v(" "),i("div",{staticClass:"flex-lr van-hairline--bottom padding-15-b"},[i("div",{staticClass:"flex-lr"},[i("div",{staticClass:"flex"},[i("div",{staticClass:"c-danger font-16 font-bold"},[t._v(t._s(t.Lang.dollarSign)+t._s(t.activity.price))]),t._v(" "),i("div",{staticClass:"c-gray font-12 line-through margin-5-l"},[t._v(t._s(t.Lang.dollarSign)+t._s(t.activity.oldprice))])])]),t._v(" "),1==t.activity.status?i("div",{staticClass:"flex"},[i("span",{staticClass:"c-gray font-12 margin-5-r"},[t._v("距结束")]),t._v(" "),i("count-down",{attrs:{endTime:t.activity.endtime}})],1):t._e()]),t._v(" "),i("div",{staticClass:"padding-15-tb flex-lr font-12 c-gray"},[i("div",{staticClass:"take-info-item"},[i("i",{staticClass:"icon icon-browse"}),t._v(" "),i("span",[t._v(t._s(t.activity.total_looknum)+"人浏览")])]),t._v(" "),i("div",{staticClass:"take-info-item text-center van-hairline--left van-hairline--right"},[i("i",{staticClass:"icon icon-share"}),t._v(" "),i("span",[t._v(t._s(t.activity.total_sharenum)+"人分享")])]),t._v(" "),i("div",{staticClass:"take-info-item text-right"},[i("i",{staticClass:"icon icon-friend font-15"}),t._v(" "),i("span",[t._v(t._s(t.activity.total_joinnum)+"人参与")])])])],1),t._v(" "),1==t.take_status?i("div",{staticClass:"margin-10-t bg-default"},[i("div",{staticClass:"progress"},[i("span",{staticClass:"max-price margin-5-r font-13 padding-15-l"},[t._v(t._s(t.Lang.dollarSign)+t._s(t.activity.oldprice))]),t._v(" "),i("div",{staticClass:"progress-inner"},[i("div",{staticClass:"now-price",style:{left:t.member_takeinfo.per_price+"%"}},[t._v("现价"+t._s(t.Lang.dollarSign)+t._s(t.member_takeinfo.price))]),t._v(" "),i("div",{staticClass:"bar"},[i("div",{staticClass:"bar-inner",style:{width:t.member_takeinfo.per_price+"%"}})])]),t._v(" "),i("span",{staticClass:"min-price c-danger margin-5-l font-13 padding-15-r"},[t._v(t._s(t.Lang.dollarSign)+t._s(t.activity.price))])]),t._v(" "),i("div",{staticClass:"flex-lr font-12 padding-15-lr padding-15-b padding-10-t"},[i("p",[t._v("目前"+t._s(t.member_takeinfo.helper.length)+"位好友帮忙砍价，已砍掉"+t._s(t.Lang.dollarSign)+t._s(t.member_takeinfo.has_bargain)+"，还需砍"+t._s(t.Lang.dollarSign)+t._s(t.member_takeinfo.still_bargain))]),t._v(" "),t.member_takeinfo.helper.length>0?i("div",{staticClass:"flex c-gray",on:{click:t.onToggleHelpStatus}},[t._v("\n\t\t\t\t\t查看详情 "),i("i",{staticClass:"icon icon-unfold"})]):t._e()]),t._v(" "),t.member_takeinfo.helper.length>0&&t.helpStatus?i("div",{staticClass:"helper-list padding-15-lr padding-10-tb van-hairline--top"},t._l(t.member_takeinfo.helper,function(a,s){return i("div",{key:s,staticClass:"helper-item flex-lr",class:{"margin-10-t":s>0}},[i("div",{staticClass:"flex"},[i("div",{staticClass:"avatar"},[i("img",{staticClass:"img-100",attrs:{src:a.avatar,alt:""}})]),t._v(" "),i("div",{staticClass:"margin-10-l"},[i("div",{staticClass:"font-14 "},[t._v(t._s(a.nickname))]),t._v(" "),i("div",{staticClass:"font-12 c-gray margin-5-t"},[t._v(t._s(a.createtime_cn))])])]),t._v(" "),i("div",{staticClass:"flex"},[i("div",{staticClass:"icon-axe margin-5-r"}),t._v(" "),i("div",{staticClass:"c-gray font-14 margin-5-l"},[t._v("帮您砍掉"+t._s(t.Lang.dollarSign)+t._s(a.bargainprice))])])])}),0):t._e()]):t._e(),t._v(" "),i("div",{staticClass:"margin-10-t padding-15-l bg-default"},[t._m(0),t._v(" "),i("div",{staticClass:"padding-15-tb padding-15-r store-info-wrap"},[i("div",{staticClass:"font-14 store-info"},[i("div",{staticClass:"margin-10-b w-100 ellipsis"},[t._v(t._s(t.store.title))]),t._v(" "),i("div",{staticClass:"address c-gray w-100",on:{click:function(a){return t.util.jsLocation({lat:t.store.location_x,lng:t.store.location_y})}}},[i("i",{staticClass:"icon icon-location margin-5-r font-15"}),t._v(" "),i("p",[t._v(t._s(t.store.address))])])]),t._v(" "),i("i",{staticClass:"icon icon-telephone icon-telephone-circle",on:{click:function(a){return t.util.jsUrl("tel:"+t.store.telephone)}}})])]),t._v(" "),i("div",{staticClass:"margin-10-t padding-15-l bg-default"},[t._m(1),t._v(" "),i("div",{staticClass:"padding-15-tb padding-15-r richtext",domProps:{innerHTML:t._s(t.activity.activity_rules)}})]),t._v(" "),i("div",{staticClass:"margin-10-t padding-15-l bg-default"},[t._m(2),t._v(" "),i("div",{staticClass:"padding-15-tb padding-15-r richtext",domProps:{innerHTML:t._s(t.activity.detail)}})]),t._v(" "),i("comment",{attrs:{comment:t.comment.data},on:{onLoadingComment:t.onComment}}),t._v(" "),i("ul",{staticClass:"right-btn"},[i("router-link",{staticClass:"btn-item",attrs:{tag:"li",to:t.util.getUrl({path:"/gohome/pages/poster/index",query:{goods_id:t.id,type:"kanjia"}})}},[i("span",[t._v("生成")]),i("span",[t._v("海报")])]),t._v(" "),t.util.isWeixin()?i("li",{staticClass:"btn-item",on:{click:t.onComplain}},[t._v("投诉")]):t._e()],1)],1),t._v(" "),i("van-goods-action",[i("van-goods-action-icon",{attrs:{icon:"shop",text:"店铺"},on:{click:function(a){return t.util.jsUrl("gohome/pages/haodian/detail?sid="+t.store.id)}}}),t._v(" "),i("van-goods-action-icon",{class:{favorite:t.activity.is_favor},attrs:{icon:t.activity.is_favor?"favor_fill_light":"favor1",text:t.activity.is_favor?"已收藏":"收藏"},on:{click:function(a){return t.onFavor()}}}),t._v(" "),i("van-goods-action-icon",{attrs:{icon:"share",text:"分享"},on:{click:function(a){t.zhezhaoShow=!t.zhezhaoShow}}}),t._v(" "),1==t.activity.status?[t.activity.can_buy?[0!=t.activity.total?[0==t.take_status?[i("van-goods-action-button",{staticClass:"btn-share",attrs:{text:"立即参与",type:"danger"},on:{click:t.onParticipate}})]:1==t.take_status?[1==t.member_takeinfo.now_price_buy?i("van-goods-action-button",{staticClass:"btn-buy",attrs:{text:"现价购买"},on:{click:function(a){return t.util.jsUrl("/gohome/pages/kanjia/order/create?activityid="+t.activity.id)}}}):t._e(),t._v(" "),t.member_takeinfo.price==t.activity.price?i("van-goods-action-button",{staticClass:"btn-share",attrs:{text:"立即下单",type:"danger"},on:{click:function(a){return t.util.jsUrl("/gohome/pages/kanjia/order/create?activityid="+t.activity.id)}}}):i("van-goods-action-button",{staticClass:"btn-share",attrs:{text:"找人帮砍",type:"danger"},on:{click:function(a){return t.util.jsUrl("/gohome/pages/kanjia/share?activityid="+t.activity.id+"&uid="+t.member_takeinfo.uid)}}})]:t._e()]:[i("van-goods-action-button",{staticClass:"van-button--disabled",attrs:{text:"商品已抢光",type:"danger"}})]]:[i("van-goods-action-button",{staticClass:"van-button--disabled",attrs:{text:"参与次数已达上限",type:"danger"}})]]:2==t.activity.status?[i("van-goods-action-button",{staticClass:"van-button--disabled",attrs:{text:"活动未开始",type:"danger"}})]:3==t.activity.status?[i("van-goods-action-button",{staticClass:"van-button--disabled",attrs:{text:"活动已结束",type:"danger"}})]:t._e()],2),t._v(" "),i("transition",{attrs:{name:"van-fade"}},[t.zhezhaoShow?i("div",{staticClass:"share-zhezhao",on:{click:function(a){t.zhezhaoShow=!t.zhezhaoShow}}},[i("img",{attrs:{src:"static/img/share-layer.png",alt:""}})]):t._e()]),t._v(" "),i("van-popup",{staticClass:"popup-success",model:{value:t.bargain_success,callback:function(a){t.bargain_success=a},expression:"bargain_success"}},[i("div",{staticClass:"popup-content"},[i("div",{staticClass:"img-wrap"},[i("img",{staticClass:"w-100",attrs:{src:"static/img/bargain_success.png",alt:""}})]),t._v(" "),i("p",{staticClass:"success-tip",staticStyle:{color:"#F1C90A"}},[t._v("恭喜您砍价成功")]),t._v(" "),i("ul",{staticClass:"font-14 margin-15-tb line-12"},[i("li",[t._v("亲友们合力帮您砍到最低价")]),t._v(" "),i("li",[t._v("立即购买吧~")])]),t._v(" "),i("div",{staticClass:"success-btn",on:{click:function(a){return t.util.jsUrl("/gohome/pages/kanjia/order/create?activityid="+t.activity.id)}}},[t._v("立即购买")])]),t._v(" "),i("div",{staticClass:"icon icon-close",on:{click:function(a){t.bargain_success=!t.bargain_success}}})]),t._v(" "),t.black_member.status?i("failed-tips",{attrs:{failedTips:t.failedTips}}):t._e(),t._v(" "),i("navigator",{attrs:{menu:t.menufooter}}),t._v(" "),t.showPreLoading?i("iloading"):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"flex-lr padding-15-tb padding-15-r font-14 van-hairline--bottom"},[a("div",{staticClass:"font-14"},[this._v("适用门店")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"flex-lr padding-15-tb padding-15-r font-14 van-hairline--bottom"},[a("div",{staticClass:"font-14"},[this._v("活动规则")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"flex-lr padding-15-tb padding-15-r font-14 van-hairline--bottom"},[a("div",{staticClass:"font-14"},[this._v("商品详情")])])}]};var _=i("VU/8")(v,u,!1,function(t){i("K4U+")},null,null);a.default=_.exports}});
//# sourceMappingURL=102.823cccf2dbaebf8f7e97.js.map