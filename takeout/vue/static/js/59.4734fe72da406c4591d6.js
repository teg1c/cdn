webpackJsonp([59],{AWJn:function(t,s){},jnDM:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("Gu7T"),a=e.n(i),n=e("Cz8s"),l=e("NPH5"),d={data:function(){return{list:{page:1,psize:4,loading:!1,finished:!1,empty:!1,data:[]},tabActive:0,tabs:[{status:1,status_cn:"待处理",num:0},{status:2,status_cn:"已处理",num:0},{status:3,status_cn:"已取消",num:0}],status:1,showPreLoading:!0}},components:{PublicHeader:n.a,Load:l.a},methods:{onLoad:function(t){var s=this;if(t&&(this.list={page:1,psize:4,loading:!1,finished:!1,empty:!1,data:[]}),this.list.finished)return!1;this.util.request({url:"creditshop/order/list",data:{page:this.list.page,psize:this.list.psize,status:this.status}}).then(function(t){s.showPreLoading=!1;var e=t.data.message;if(e.errno)return s.util.$toast(e.message),!1;e=e.message,s.list.data=[].concat(a()(s.list.data),a()(e)),e.length<s.list.psize&&(s.list.finished=!0,s.list.data.length||(s.list.empty=!0)),s.list.loading=!1,s.list.page++})},onCancel:function(t){var s=this;(t=t)>0&&this.$dialog.confirm({title:"确认取消该订单吗"}).then(function(){s.util.request({url:"creditshop/order/cancel",data:{order_id:t}}).then(function(t){var e=t.data.message;if(e.errno)return s.util.$toast(e.message),!1;s.util.$toast(e.message,"refresh")})})},onChangeStatus:function(t,s){this.status=this.tabs[t].status,this.onLoad(!0)}},computed:{offsetTop:function(){var t=this.util.getStorage("theme"),s=46;return t.header&&1==t.header.ishide&&(s=0),s}},mounted:function(){this.onLoad()}},o={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"creditshop-list"}},[e("public-header",{attrs:{title:"兑换列表"}}),t._v(" "),e("div",{staticClass:"content"},[e("van-tabs",{attrs:{color:"#FF2d4B","title-active-color":"#FF2d4B","title-inactive-color":"#000","line-width":80,"line-height":2,"offset-top":t.offsetTop,sticky:""},on:{change:t.onChangeStatus},model:{value:t.tabActive,callback:function(s){t.tabActive=s},expression:"tabActive"}},t._l(t.tabs,function(s,i){return e("van-tab",{key:i,attrs:{title:s.status_cn}},[t.list.empty?e("load",{attrs:{type:"loaded",text:"暂无积分兑换记录"}}):e("van-list",{staticClass:"list",attrs:{finished:t.list.finished,offset:100,"immediate-check":!1},on:{load:t.onLoad},model:{value:t.list.loading,callback:function(s){t.$set(t.list,"loading",s)},expression:"list.loading"}},[t._l(t.list.data,function(s,i){return e("div",{key:i,staticClass:"list-item"},[e("div",{staticClass:"first-line"},[e("div",{staticClass:"order-sn"},[t._v("订单号："+t._s(s.order_sn))]),t._v(" "),t._e()]),t._v(" "),e("router-link",{staticClass:"second-line",attrs:{to:t.util.getUrl({path:"/plugin/pages/creditshop/detail",query:{id:s.id}})}},[e("div",{staticClass:"left"},[e("img",{attrs:{src:s.thumb,alt:""}})]),t._v(" "),e("div",{staticClass:"right"},[e("div",{staticClass:"title"},[t._v(t._s(s.title))]),t._v(" "),e("div",{staticClass:"type"},["goods"==s.goods_type?e("span",[t._v("商品")]):"credit2"==s.goods_type?e("span",[t._v("余额")]):"redpacket"==s.goods_type?e("span",[t._v("红包")]):t._e()]),t._v(" "),e("div",{staticClass:"credit flex-lr"},[e("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(s.use_credit1)+"积分\n\t\t\t\t\t\t\t\t\t\t"),s.use_credit2>0?[t._v("\n\t\t\t\t\t\t\t\t\t\t\t+ "+t._s(t.Lang.dollarSign)+t._s(s.use_credit2)+"\n\t\t\t\t\t\t\t\t\t\t")]:t._e()],2),t._v(" "),e("div",{staticClass:"c-danger"},[t._v(t._s(s.status_cn))])])])]),t._v(" "),e("div",{staticClass:"third-line border-1px-t"},[e("div",{staticClass:"code"},[t._v("兑换码："+t._s(s.code))]),t._v(" "),e("div",{staticClass:"btn-group"},[s.use_credit1>0&&0==s.is_pay&&1==s.status&&1==s.use_credit1_status?e("div",{staticClass:"btn bg-default btn-cel",on:{click:function(e){return t.onCancel(s.id)}}},[t._v("\n\t\t\t\t\t\t\t\t\t取消订单\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),s.use_credit2>0&&0==s.is_pay&&1==s.status?e("router-link",{staticClass:"btn bg-danger",attrs:{to:t.util.getUrl({path:"/pages/public/pay",query:{order_id:s.id,order_type:"creditshop"}})}},[t._v("\n\t\t\t\t\t\t\t\t\t立即支付\n\t\t\t\t\t\t\t\t")]):t._e()],1)])],1)}),t._v(" "),t.list.finished?e("load",{attrs:{type:"loaded",text:"我是有底线的"}}):t._e()],2)],1)}),1)],1),t._v(" "),t.showPreLoading?e("iloading"):t._e()],1)},staticRenderFns:[]};var r=e("VU/8")(d,o,!1,function(t){e("AWJn")},null,null);s.default=r.exports}});
//# sourceMappingURL=59.4734fe72da406c4591d6.js.map