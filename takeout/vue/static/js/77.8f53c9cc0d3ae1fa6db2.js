webpackJsonp([77],{DoOi:function(t,a){},l3is:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=i("Cz8s"),e=i("deIj"),n={components:{PublicHeader:s.a},data:function(){return{id:0,deliveryer:{},award:{status:0,diy_status:0,diy_min:0,diy_max:10,day:0,items:[]},fee:0,selectIndex:-1,input:"",tip:"",islegal:!1,popup:{diy:!1},showPreLoading:!0}},methods:{onLoad:function(){var t=this;Object(e.a)({vue:t,url:"wmall/order/index/award",data:{id:t.id},success:function(a){t.deliveryer=t.util.extend(t.deliveryer,a.deliveryer),t.award=t.util.extend(t.award,a.award),t.islegal=!0}})},onSubmit:function(){var t=this;if(!t.islegal)return!1;var a=parseFloat(t.fee);return isNaN(a)||a<=0?(t.util.$toast("请选择或输入打赏金额"),!1):1==t.award.diy_status&&"diy"==t.selectIndex&&(a>t.award.diy_max||a<t.award.diy_min)?(t.util.$toast("请输入打赏金额，最少"+t.award.diy_min+t.Lang.dollarSignCn+"，最多"+t.award.diy_max+t.Lang.dollarSignCn),!1):(t.islegal=!1,void Object(e.c)({vue:t,url:"wmall/order/index/award",data:{id:t.id,fee:a},success:function(a){t.$router.replace(t.util.getUrl({path:"/pages/public/pay",query:{order_id:a,order_type:"deliveryer_award"}}))},fail:function(a){t.islegal=!0,t.util.$toast(a)}}))},onChangeFee:function(t,a){this.selectIndex=t,this.fee=a,this.tip=this.award.items[t].tip,this.input=""},onTogglePopup:function(t,a){var i=this.popup[t];if("diy"==t&&a){var s=parseFloat(this.input);if(isNaN(s)||s<=0||s>this.award.diy_max)return this.util.$toast("请输入打赏金额，最少"+this.award.diy_min+this.Lang.dollarSignCn+"，最多"+this.award.diy_max+this.Lang.dollarSignCn),!1;this.fee=s,this.selectIndex="diy",this.tip=this.award.diy_tip}this.popup[t]=!i}},mounted:function(){var t=this.util.parseQuery(this.$route.query);this.id=t.id,this.onLoad()}},r={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{attrs:{id:"deliveryer-reward"}},[i("public-header",{attrs:{title:"打赏骑手"}}),t._v(" "),i("div",{staticClass:"content font-14"},[i("div",{staticClass:"deliveryer"},[i("div",{staticClass:"flex-lr"},[i("div",{staticClass:"flex"},[i("div",{staticClass:"avatar"},[i("img",{staticClass:"img-100",attrs:{src:t.deliveryer.avatar}})]),t._v(" "),i("div",[i("div",{staticClass:"realname"},[t._v(t._s(t.deliveryer.title))]),t._v(" "),t.deliveryer.delivery_title?i("div",{staticClass:"plateform"},[t._v(t._s(t.deliveryer.delivery_title))]):t._e()])]),t._v(" "),i("span",{staticClass:"icon icon-telephone font-16 font-bold",on:{click:function(a){return t.util.jsTel(t.deliveryer.mobile)}}})]),t._v(" "),i("van-row",{staticClass:"text-center margin-15-t"},[i("van-col",{attrs:{span:"8"}},[i("div",{staticClass:"van-hairline--left"},[i("div",[t._v("\n\t\t\t\t\t\t\t"+t._s(t.deliveryer.percent_normal)+"\n\t\t\t\t\t\t\t"),i("span",{staticClass:"font-12"},[t._v("%")])]),t._v(" "),i("div",{staticClass:"data-title"},[t._v("准时率")])])]),t._v(" "),i("van-col",{attrs:{span:"8"}},[i("div",{staticClass:"van-hairline--left"},[i("div",[t._v("\n\t\t\t\t\t\t\t"+t._s(t.deliveryer.score)+"\n\t\t\t\t\t\t\t"),i("span",{staticClass:"font-12"},[t._v("分")])]),t._v(" "),i("div",{staticClass:"data-title"},[t._v("评分")])])]),t._v(" "),i("van-col",{attrs:{span:"8"}},[i("div",{staticClass:"van-hairline--left"},[i("div",[t._v("\n\t\t\t\t\t\t\t"+t._s(t.deliveryer.avg_delivery_time)+"\n\t\t\t\t\t\t\t"),i("span",{staticClass:"font-12"},[t._v("分钟")])]),t._v(" "),i("div",{staticClass:"data-title"},[t._v("平均配送时长")])])])],1)],1),t._v(" "),i("div",{staticClass:"reward"},[i("div",{staticClass:"font-bold"},[t._v("骑手配送辛苦，快打个赏吧")]),t._v(" "),i("div",{staticClass:"font-12 c-gray margin-5-t"},[t._v("打赏将全部转给骑手，平台不收任何费用")]),t._v(" "),i("van-row",{staticClass:"margin-5-t margin-5-b",attrs:{gutter:"10"}},[t._l(t.award.items,function(a,s){return i("van-col",{key:s,attrs:{span:"6"}},[i("div",{class:{"reward-item":1,active:s==t.selectIndex},on:{click:function(i){return t.onChangeFee(s,a.fee)}}},[i("div",{staticClass:"reward-img"},[i("img",{staticClass:"img-100",attrs:{src:a.imgurl}})]),t._v(" "),i("div",{staticClass:"reward-fee"},[i("span",{staticClass:"font-12"},[t._v(t._s(t.Lang.dollarSign))]),i("span",[t._v(t._s(a.fee))])])])])}),t._v(" "),i("van-col",{attrs:{span:"6"}},[i("div",{class:{"reward-item":1,active:"diy"==t.selectIndex},on:{click:function(a){return t.onTogglePopup("diy",!1)}}},[i("div",{staticClass:"reward-img"},[i("img",{staticClass:"img-100",attrs:{src:"static/img/svip-redpacket.png"}})]),t._v(" "),i("div",{staticClass:"reward-fee"},["diy"==t.selectIndex&&t.input>0?[i("span",{staticClass:"font-12"},[t._v(t._s(t.Lang.dollarSign))]),i("span",[t._v(t._s(t.input))])]:[i("span",[t._v("其他金额")])]],2)])])],2),t._v(" "),t.tip?i("div",{staticClass:"tip ellipsis"},[i("span",{staticClass:"c-danger"},[t._v("捎句话：")]),t._v(" "),i("span",[t._v(t._s(t.tip))])]):t._e(),t._v(" "),i("van-button",{staticClass:"margin-10-t",attrs:{size:"normal",block:"",type:"danger",disabled:!t.islegal},on:{click:t.onSubmit}},[t._v("确认打赏")]),t._v(" "),t.deliveryer.award_total>0?i("div",{staticClass:"person-num"},[i("div",{staticClass:"avatar"},[i("img",{staticClass:"img-100",attrs:{src:t.deliveryer.award_avatar,alt:""}})]),t._v(" "),i("div",[t._v(t._s(t.deliveryer.award_total)+"人打赏过")]),t._v(" "),i("div",{staticClass:"icon icon-right font-12 c-gray"})]):t._e()],1)]),t._v(" "),i("van-popup",{staticClass:"popup-diy",model:{value:t.popup.diy,callback:function(a){t.$set(t.popup,"diy",a)},expression:"popup.diy"}},[i("div",{staticClass:"title"},[t._v("多少都是您的心意")]),t._v(" "),i("div",{staticClass:"input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.input,expression:"input",modifiers:{number:!0}}],attrs:{placeholder:"最低"+t.award.diy_min+t.Lang.dollarSignCn+", 最高"+t.award.diy_max+t.Lang.dollarSignCn,type:"text"},domProps:{value:t.input},on:{input:function(a){a.target.composing||(t.input=t._n(a.target.value))},blur:function(a){return t.$forceUpdate()}}}),t._v(" "),i("span",{staticClass:"c-gray"},[t._v(t._s(t.Lang.dollarSignCn))])]),t._v(" "),i("van-row",{attrs:{gutter:"10"}},[i("van-col",{attrs:{span:"12"}},[i("van-button",{attrs:{size:"normal",block:""},on:{click:function(a){return t.onTogglePopup("diy",!1)}}},[t._v("取消")])],1),t._v(" "),i("van-col",{attrs:{span:"12"}},[i("van-button",{attrs:{size:"normal",type:"danger",block:""},on:{click:function(a){return t.onTogglePopup("diy",!0)}}},[t._v("确定")])],1)],1)],1),t._v(" "),t.showPreLoading?i("iloading"):t._e()],1)},staticRenderFns:[]};var l=i("VU/8")(n,r,!1,function(t){i("DoOi")},null,null);a.default=l.exports}});
//# sourceMappingURL=77.8f53c9cc0d3ae1fa6db2.js.map