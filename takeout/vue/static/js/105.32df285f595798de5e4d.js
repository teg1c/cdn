webpackJsonp([105],{GXhf:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Gu7T"),i=a.n(s),r=a("Dd8w"),n=a.n(r),d=a("NYxO"),l={data:function(){return{query:{},preLoading:!0,list:[],available:[],dis_available:[]}},components:{PublicHeader:a("Cz8s").a},methods:n()({},Object(d.b)(["setOrderExtra","setState","setMallOrderExtra"]),{onLoad:function(){var t=this,e={sid:this.sid,erranderId:this.erranderId,mode:this.mode};this.erranderExtra&&this.erranderExtra.agentid&&(e.agentid=this.erranderExtra.agentid),this.erranderStoreExtra&&this.erranderStoreExtra.agentid&&(e.agentid=this.erranderStoreExtra.agentid),this.util.request({url:"wmall/member/address",data:e}).then(function(e){t.preLoading=!1;var a=e.data.message;a.errno||(t.sid>0||t.erranderId>0?(t.available=[].concat(i()(t.available),i()(a.message.available)),t.dis_available=[].concat(i()(t.dis_available),i()(a.message.dis_available))):t.list=[].concat(i()(t.list),i()(a.message)))})},onSelectAddress:function(t){if("mall"!=this.channel){if(!this.sid&&!this.erranderId)return!1;if(!t.available)return this.$toast("该地址不在商家配送范围内"),!1}return"errander"==this.channel?("take"==this.mode?(this.setState({type:"erranderStoreExtra",key:"buyaddress_id",val:t.id}),this.$router.replace(this.util.getUrl({path:"/plugin/pages/paotui/store/order/diy",query:{id:this.erranderId,sid:this.esid,mode:this.mode}}))):"send"==this.mode?(this.setState({type:"erranderStoreExtra",key:"acceptaddress_id",val:t.id}),this.$router.replace(this.util.getUrl({path:"/plugin/pages/paotui/store/order/diy",query:{id:this.erranderId,sid:this.esid,mode:this.mode}}))):("accept"==this.input?this.setState({type:"erranderExtra",key:"acceptaddress_id",val:t.id}):"buy"==this.input&&this.setState({type:"erranderExtra",key:"buyaddress_id",val:t.id}),this.$router.replace(this.util.getUrl({path:"/plugin/pages/paotui/diy",query:{id:this.erranderId}}))),!1):"mall"==this.channel?(this.setMallOrderExtra({sid:0,key:"address_id",val:t.id}),this.$router.replace(this.util.getUrl({path:"/mall/pages/order/create",query:this.query})),!1):(this.setOrderExtra({key:"address_id",val:t.id}),void this.$router.replace(this.util.getUrl({path:"/pages/order/create",query:this.query})))}}),computed:n()({},Object(d.c)(["orderExtra","erranderExtra","erranderStoreExtra","mallOrderExtra"])),created:function(){this.query=this.util.parseQuery(this.$route.query),this.query&&(this.sid=this.query.sid,this.channel=this.query.channel,this.input=this.query.input,this.erranderId=this.query.erranderId,this.esid=this.query.esid,this.mode=this.query.mode)},mounted:function(){this.onLoad()}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"address"}},[a("public-header",{attrs:{title:"我的地址"}}),t._v(" "),a("div",{staticClass:"content"},[(t.sid>0||t.erranderId>0)&&(t.available.length>0||t.dis_available.length>0)||!t.sid&&!t.erranderId&&t.list.length>0?[t.sid>0||t.erranderId>0?[a("div",{staticClass:"list"},[t.available.length>0?[a("div",{staticClass:"block-title"},[t._v("可选地址")]),t._v(" "),a("div",{staticClass:"list-container van-hairline--bottom"},t._l(t.available,function(e,s){return a("div",{staticClass:"item  flex-lr",class:{"van-hairline--bottom":s<t.available.length-1}},[a("div",{staticClass:"item-content",on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.onSelectAddress(e)}}},[a("div",{staticClass:"user"},[1==e.is_default?[a("van-tag",{attrs:{type:"danger "}},[t._v("默认")])]:t._e(),t._v(" "),"1"==e.tag?[a("van-tag",{attrs:{type:"warning"}},[t._v("家")])]:"2"==e.tag?[a("van-tag",{attrs:{type:"primary"}},[t._v("公司")])]:"3"==e.tag?[a("van-tag",{attrs:{type:"success"}},[t._v("学校")])]:t._e(),t._v(" "),a("span",{staticClass:"address"},[t._v(t._s(e.address))])],2),t._v(" "),a("div",{staticClass:"more"},[a("span",[t._v(t._s(e.realname))]),t._v(" "),a("span",[t._v(t._s(e.sex))]),t._v(" "),a("span",[t._v(t._s(e.mobile))])])]),t._v(" "),a("div",{on:{click:function(a){t.util.jsUrl("/pages/member/addressPost",t.util.extend({id:e.id},t.query),"replace")}}},[a("van-icon",{attrs:{name:"edit"}})],1)])}),0)]:t._e(),t._v(" "),t.dis_available.length>0?[a("div",{staticClass:"block-title"},[t._v("不在配送范围内或地址不完善")]),t._v(" "),a("div",{staticClass:"list-container van-hairline--bottom"},t._l(t.dis_available,function(e,s){return a("div",{staticClass:"item  flex-lr c-disabled",class:{"van-hairline--bottom":s<t.dis_available.length-1}},[a("div",{staticClass:"item-content ",on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.onSelectAddress(e)}}},[a("div",{staticClass:"user"},[1==e.is_default?[a("van-tag",{attrs:{type:"danger "}},[t._v("默认")])]:t._e(),t._v(" "),"1"==e.tag?[a("van-tag",{attrs:{type:"warning"}},[t._v("家")])]:"2"==e.tag?[a("van-tag",{attrs:{type:"primary"}},[t._v("公司")])]:"3"==e.tag?[a("van-tag",{attrs:{type:"success"}},[t._v("学校")])]:t._e(),t._v(" "),a("span",{staticClass:"address c-disabled"},[t._v(t._s(e.address))])],2),t._v(" "),a("div",{staticClass:"more c-disabled"},[a("span",[t._v(t._s(e.realname))]),t._v(" "),a("span",[t._v(t._s(e.sex))]),t._v(" "),a("span",[t._v(t._s(e.mobile))])])]),t._v(" "),a("div",{on:{click:function(a){t.util.jsUrl("/pages/member/addressPost",t.util.extend({id:e.id},t.query),"replace")}}},[a("van-icon",{attrs:{name:"edit"}})],1)])}),0)]:t._e()],2)]:[a("div",{staticClass:"list"},[a("div",{staticClass:"list-container van-hairline--bottom"},t._l(t.list,function(e,s){return a("div",{staticClass:"item  flex-lr",class:{"van-hairline--bottom":s<t.list.length-1}},[a("div",{staticClass:"item-content",on:{click:function(a){return a.preventDefault(),a.stopPropagation(),t.onSelectAddress(e)}}},[a("div",{staticClass:"user"},[1==e.is_default?[a("van-tag",{attrs:{type:"danger "}},[t._v("默认")])]:t._e(),t._v(" "),"1"==e.tag?[a("van-tag",{attrs:{type:"warning"}},[t._v("家")])]:"2"==e.tag?[a("van-tag",{attrs:{type:"primary"}},[t._v("公司")])]:"3"==e.tag?[a("van-tag",{attrs:{type:"success"}},[t._v("学校")])]:t._e(),t._v(" "),a("span",{staticClass:"address"},[t._v(t._s(e.address))])],2),t._v(" "),a("div",{staticClass:"more"},[a("span",[t._v(t._s(e.realname))]),t._v(" "),a("span",[t._v(t._s(e.sex))]),t._v(" "),a("span",[t._v(t._s(e.mobile))])])]),t._v(" "),a("div",{on:{click:function(a){t.util.jsUrl("/pages/member/addressPost",t.util.extend({id:e.id},t.query))}}},[a("van-icon",{attrs:{name:"edit"}})],1)])}),0)])]]:a("div",{staticClass:"no-data"},[a("img",{attrs:{src:"static/img/store_no_con.png",alt:""}}),t._v(" "),a("p",[t._v("您还没有收货地址")])]),t._v(" "),a("div",{staticClass:"add",on:{click:function(e){t.util.jsUrl("/pages/member/addressPost",t.util.extend({id:0},t.query),"replace")}}},[a("van-cell",{staticClass:"border-1px-t",attrs:{title:"新增收货地址",icon:"add","is-link":""}})],1)],2),t._v(" "),a("transition",{attrs:{name:"loading"}},[t.preLoading?a("iloading"):t._e()],1)],1)},staticRenderFns:[]};var c=a("VU/8")(l,o,!1,function(t){a("z1w1")},null,null);e.default=c.exports},z1w1:function(t,e){}});
//# sourceMappingURL=105.32df285f595798de5e4d.js.map