webpackJsonp([203],{qdZ7:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,i=a("bOdI"),r=a.n(i),l=a("Gu7T"),o=a.n(l),d=a("woOf"),c=a.n(d),n=a("mvHQ"),v=a.n(n),p=a("Dd8w"),_=a.n(p),u=a("Cz8s"),g=a("NPH5"),m=(a("Fd2+"),a("NYxO")),C=(s={data:function(){return{carts:[],allorder:{orders:[],address:{},deliveryTimes:{predict_index:"",predict_day:"",predict_day_cn:"",predict_time_cn:"",predict_year_cn:""},feetips:[],mobile:"",coupons:[],errormsg:[]},allDeliveryFeeNote:{},popup:{coupon:!1,redPacket:!1,deliveryTime:!1,picknum:!1,mealRedpacketRules:!1,svipRedpacket:!1,zhunshibaoAgreementShow:!1,yinsihaoAgreementShow:!1,deliveryFeeShow:!1,allDeliveryFeeShow:!1},activeSid:0,activeIndex:0,query:{channel:"mall"},config_takeout:{},svip_redpacket:{},redPackets:[],address:{},store:{cn:{}},order:{},coupons:[],mobile:"",islegal:!1,showPreLoading:!0}},computed:{},methods:_()({onLoad:function(){var t=this,e=this,a={extra:v()(this.mallOrderExtra)};e.util.request({url:"wmall/mall/order/index",data:a}).then(function(a){e.showPreLoading=!1;var s=a.data.message;if(s.errno)e.util.$toast(s.message,e.util.getUrl({path:"/mall/pages/cart/index"}),1500,"replace");else{s=s.message;var i=c()(t.mallOrderExtra,{predict_index:s.allorder.deliveryTimes.predict_index,predict_time_cn:s.allorder.deliveryTimes.predict_time_cn,predict_day_cn:s.allorder.deliveryTimes.predict_day_cn,address_id:s.allorder.address.id,order_type:s.allorder.order_type,mobile:s.allorder.mobile});t.replaceMallOrderExtra(i),e.carts=[].concat(o()(s.carts)),e.allorder=e.util.extend(e.allorder,s.allorder),e.config_takeout=e.util.extend(e.config_takeout,s.config_takeout),e.islegal=s.islegal;var r=s.allorder.errormsg;if(r&&r.length>0)for(var l in r)e.$dialog.alert({message:r[l].message})}})},onSubmit:function(){var t=this;if(2==t.mallOrderExtra.order_type){if(!t.mallOrderExtra.mobile)return t.util.$toast("请输入提货手机号"),!1;if(!t.util.isValidMobile(t.mallOrderExtra.mobile))return t.util.$toast("请输入正确的手机号"),!1;if(!t.islegal)return!1;t.islegal=!1,t.submitPost()}else{if(!t.mallOrderExtra.address_id)return t.util.$toast("请选择收货地址"),!1;1==t.config_takeout.audit_accept_address?t.$dialog.confirm({title:"请确定您的收货信息",message:"收货地址："+t.allorder.address.address+"-"+t.allorder.address.number+"</br>手机　号："+t.allorder.address.mobile+"</br>收货　人："+t.allorder.address.realname}).then(function(){t.submitPost()}).catch(function(){t.islegal=!0}):t.submitPost()}},submitPost:function(){var t=this,e=this,a={extra:v()(e.mallOrderExtra)};e.util.request({url:"wmall/mall/order/submit",data:a}).then(function(a){var s=a.data.message;if(s.errno)return e.util.$toast(s.message),1e3==s.errno&&(e.$router.replace(e.util.getUrl({path:"/mall/pages/cart/index"})),!1);var i=s.message;t.replaceMallOrderExtra({}),t.$router.replace(t.util.getUrl({path:"/pages/public/pay",query:{order_id:i,order_type:"mall"}}))})},onCalculate:function(){var t=this,e={extra:v()(this.mallOrderExtra)};this.util.request({url:"wmall/mall/order/index",data:e,method:"post"}).then(function(e){var a=e.data.message;a.errno?t.util.$toast(a.message):(a=a.message,t.carts=[].concat(o()(a.carts)),t.allorder=t.util.extend(t.allorder,a.allorder),t.islegal=a.islegal)})},onToggleDeliveryFee:function(t){console.log(t),this.allDeliveryFeeNote=t,this.onChangePopup("allDeliveryFeeShow")},onChangeOrderType:function(t){this.setMallOrderExtra({sid:0,key:"order_type",val:t}),this.onCalculate()},onSelectDeliveryday:function(t){this.$set(this.allorder.deliveryTimes,"predict_day",t),this.$set(this.allorder.deliveryTimes,"predict_day_cn",t),this.setMallOrderExtra({sid:0,key:"predict_day_cn",val:t})},onSelectDeliverytimes:function(t,e){this.$set(this.allorder.deliveryTimes,"predict_index",e),this.$set(this.allorder.deliveryTimes,"predict_time_cn",t),this.onChangePopup("deliveryTime"),this.setMallOrderExtra({sid:0,key:"predict_index",val:e}),this.setMallOrderExtra({sid:0,key:"predict_time_cn",val:t}),this.onCalculate()},onSelectRedpacket:function(t){this.setMallOrderExtra({sid:this.activeSid,key:"redpacket_id",val:t}),this.onChangePopup("redPacket"),this.onCalculate()},onSelectCoupon:function(t,e){this.setMallOrderExtra({sid:e,key:"coupon_id",val:t}),this.onChangePopup("coupon"),this.onCalculate()},onToggleActive:function(t,e,a){this.activeIndex=t,this.activeSid=e,this.onChangePopup(a)},onChangePopup:function(t){this.popup[t]=!this.popup[t]},onBlur:function(){window.scroll(0,0)}},Object(m.b)(["setMallOrderExtra","replaceMallOrderExtra"])),created:function(){var t=this.util.parseQuery(this.$route.query);this.query=this.util.extend(this.query,t)},mounted:function(){this.onLoad(),this.util.icloudapi()},watch:{"allorder.mobile":{handler:function(t){this.setMallOrderExtra({sid:0,key:"mobile",val:t})}}}},r()(s,"computed",_()({},Object(m.c)(["mallOrderExtra"]))),r()(s,"components",{PublicHeader:u.a,Load:g.a}),s),f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"mall-order-create"}},[a("public-header",{attrs:{title:"确认订单"}}),t._v(" "),a("van-submit-bar",{attrs:{currency:t.Lang.dollarSign,disabled:!t.islegal,price:100*t.allorder.final_fee,label:"待支付","button-text":"提交订单"},on:{submit:t.onSubmit}},[a("div",{staticClass:"order-benefit",attrs:{slot:"default"},slot:"default"},[t._v("\n\t\t\t已优惠 "+t._s(t.Lang.dollarSign)+t._s(t.allorder.discount_fee)+"\n\t\t")])]),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"delivery-info margin-10-b bg-default radius-3"},[a("ul",{staticClass:"delivery-mode"},[a("li",{staticClass:"delivery",class:{active:1==t.allorder.order_type},on:{click:function(e){return t.onChangeOrderType(1)}}},[t._v(t._s("骑手配送"))]),t._v(" "),a("li",{staticClass:"self",class:{active:2==t.allorder.order_type},on:{click:function(e){return t.onChangeOrderType(2)}}},[t._v("到店自取 "),t._e()],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.allorder.order_type,expression:"allorder.order_type == 1"}],staticClass:"plateform-box"},[a("div",{staticClass:"plateform-inner"},[a("van-cell-group",{staticClass:"border-0px"},[t.allorder.address.address?a("van-cell",{staticClass:"store-address",attrs:{icon:"locationfill","is-link":""},on:{click:function(e){return t.util.jsUrl("/pages/member/address",t.query,"replace")}}},[a("template",{slot:"title"},[a("div",{staticClass:"member-address"},["1"==t.allorder.address.tag?[a("span",{staticClass:"tag-address tag-address-yellow"},[t._v("家")])]:"2"==t.allorder.address.tag?[a("span",{staticClass:"tag-address tag-address-blue"},[t._v("公司")])]:"3"==t.allorder.address.tag?[a("span",{staticClass:"tag-address tag-address-green"},[t._v("学校")])]:t._e(),t._v(" "),a("span",[t._v(t._s(t.allorder.address.address)+"-"+t._s(t.allorder.address.number))])],2),t._v(" "),a("div",{staticClass:"store-title font-12 c-gray"},[t._v(t._s(t.allorder.address.realname)+" "+t._s(t.allorder.address.sex)+" "+t._s(t.allorder.address.mobile))])])],2):a("van-cell",{staticClass:"addrress-select",attrs:{title:"选择收货地址",icon:"plus","is-link":""},on:{click:function(e){return t.util.jsUrl("/pages/member/address",t.query,"replace")}}}),t._v(" "),a("van-cell",{attrs:{title:t.allorder.deliveryTimes.predict_day_cn+" "+t.allorder.deliveryTimes.predict_time_cn,icon:"timefill","is-link":""},on:{click:function(e){return t.onChangePopup("deliveryTime")}}})],1)],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.allorder.order_type,expression:"allorder.order_type == 2"}],staticClass:"instore-box"},[a("div",{staticClass:"instore-inner"},[a("van-cell-group",{staticClass:"border-0px"},[a("van-cell",{attrs:{title:"自取时间",value:t.allorder.deliveryTimes.predict_day_cn+" "+t.allorder.deliveryTimes.predict_time_cn,icon:"timefill","is-link":""},on:{click:function(e){return t.onChangePopup("deliveryTime")}}}),t._v(" "),a("van-field",{attrs:{label:"预留电话","left-icon":"mobilefill","input-align":"right",placeholder:"请输入自提人手机号"},on:{blur:t.onBlur},model:{value:t.allorder.mobile,callback:function(e){t.$set(t.allorder,"mobile",e)},expression:"allorder.mobile"}})],1)],1)])]),t._v(" "),t._l(t.carts,function(e,s){return[a("div",{staticClass:"order-food"},[a("div",{staticClass:"order-food-title"},[a("div",{staticClass:"food-shop"},[t._v(t._s(e.store.title))]),t._v(" "),2==e.store.delivery_mode&&2!=e.store.delivery_type?a("div",{staticClass:"order-tips-thirpart"},[t._v(t._s(e.store.delivery_title))]):t._e()]),t._v(" "),a("div",{staticClass:"food-list"},[t._l(e.cart.data,function(e){return[t._l(e,function(e){return["88888"!=e.goods_id&&1==e.is_show&&e.issubmit?a("van-card",{attrs:{thumb:e.thumb}},[a("div",{staticClass:"food-title",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"left"},[e.bargain_id>0&&"bargain"==e.bargain_type?a("img",{staticClass:"activity-img",attrs:{src:"static/img/bargain_b.png",alt:""}}):t._e(),t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.title)+"\n\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"right"},[t._v(t._s(t.Lang.dollarSign)+t._s(e.total_discount_price_show))])]),t._v(" "),a("div",{staticClass:"food-desc",attrs:{slot:"desc"},slot:"desc"},["huangou"==e.bargain_type?a("div",{staticClass:"left"},[t._v("x"+t._s(e.num-e.discount_num))]):a("div",{staticClass:"left"},[t._v("x"+t._s(e.num))]),t._v(" "),e.total_price_show>e.total_discount_price_show?a("div",{staticClass:"right"},[t._v(t._s(t.Lang.dollarSign)+t._s(e.total_price_show))]):t._e()])]):t._e()]})]})],2),t._v(" "),a("van-cell-group",{staticClass:"extre-fee border-0px"},[a("van-cell",{staticClass:"border-0px",attrs:{title:e.store.cn.box_price}},[a("template",{slot:"right-icon"},[t._v(t._s(t.Lang.dollarSign)+t._s(t.allorder.orders[s].box_price))])],2),t._v(" "),t.allorder.orders[s].pack_fee>0?a("van-cell",{staticClass:"border-0px",attrs:{title:e.store.cn.pack_fee}},[a("template",{slot:"right-icon"},[t._v(t._s(t.Lang.dollarSign)+t._s(t.allorder.orders[s].pack_fee))])],2):t._e(),t._v(" "),t.allorder.orders[s].extra_fee>0?[t._l(t.allorder.orders[s].extra_fee_detail,function(e){return t.allorder.orders[s].extra_fee_detail.length>0?[1!=e.notshow?[a("van-cell",{staticClass:"border-0px",attrs:{title:e.name}},[a("template",{slot:"right-icon"},[t._v(t._s(t.Lang.dollarSign)+t._s(e.fee))])],2)]:t._e()]:t._e()})]:t._e(),t._v(" "),t.allorder.orders[s].store_extra_fee_detail&&t.allorder.orders[s].store_extra_fee_detail.length>0?t._l(t.allorder.orders[s].store_extra_fee_detail,function(e,s){return a("van-cell",{key:s,staticClass:"border-0px",attrs:{title:e.name}},[a("div",{attrs:{slot:"right-icon"},slot:"right-icon"},[t._v(t._s(t.Lang.dollarSign)+t._s(e.fee))])])}):t._e()],2),t._v(" "),t._m(0,!0),t._v(" "),a("van-cell-group",{staticClass:"discount-box border-0px"},[t.allorder.orders[s].activityed&&t.allorder.orders[s].activityed.list?[t._l(t.allorder.orders[s].activityed.list,function(e){return["couponCollect"!=e.type&&"redPacket"!=e.type?[a("van-cell",{staticClass:"border-0px"},[a("div",{staticClass:"discount-item flex",attrs:{slot:"title"},slot:"title"},[a("img",{attrs:{src:"static/img/"+e.type+"_b.png",alt:""}}),t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("template",{slot:"right-icon"},[a("span",{staticClass:"c-danger"},[t._v(t._s(e.text))])])],2)]:t._e()]})]:t._e(),t._v(" "),a("van-cell",{staticClass:"border-0px",attrs:{title:"平台红包"}},[t.allorder.orders[s].redpacket&&t.allorder.orders[s].redpacket.id>0?a("template",{slot:"right-icon"},[a("span",{staticClass:"c-danger",on:{click:function(a){return t.onToggleActive(s,e.sid,"redPacket")}}},[t._v("-"+t._s(t.Lang.dollarSign)+t._s(t.allorder.orders[s].redpacket.discount))])]):a("template",{slot:"right-icon"},[t.allorder.redPackets[s]&&t.allorder.redPackets[s].length>0?a("span",{staticClass:"c-danger",on:{click:function(a){return t.onToggleActive(s,e.sid,"redPacket")}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.allorder.redPackets[s].length)+"个可用红包\n\t\t\t\t\t\t\t")]):[t.svip_redpacket&&t.svip_redpacket.id?a("span",{staticClass:"c-danger",on:{click:function(a){return t.onToggleActive(s,e.sid,"redPacket")}}},[t._v("您有可领取的超级会员红包")]):a("span",{staticClass:"c-disabled"},[t._v("\n\t\t\t\t\t\t\t\t\t暂无可用红包\n\t\t\t\t\t\t\t\t")])],t._v(" "),a("i",{staticClass:"van-icon van-icon-arrow van-cell__right-icon"})],2)],2),t._v(" "),a("van-cell",{staticClass:"border-0px",attrs:{title:"商家代金券"}},[t.allorder.orders[s].coupon&&t.allorder.orders[s].coupon.id>0?a("template",{slot:"right-icon"},[a("span",{staticClass:"c-danger",on:{click:function(a){return t.onToggleActive(s,e.sid,"coupon")}}},[t._v("-"+t._s(t.Lang.dollarSign)+t._s(t.allorder.orders[s].coupon.discount))])]):a("template",{slot:"right-icon"},[t.allorder.coupons[s]&&t.allorder.coupons[s].length>0?a("span",{staticClass:"c-danger",on:{click:function(a){return t.onToggleActive(s,e.sid,"coupon")}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.allorder.coupons[s].length)+"张可用代金券\n\t\t\t\t\t\t\t")]):a("span",{staticClass:"c-disabled"},[t._v("\n\t\t\t\t\t\t\t\t暂无可用代金券\n\t\t\t\t\t\t\t")]),t._v(" "),a("i",{staticClass:"van-icon van-icon-arrow van-cell__right-icon"})])],2),t._v(" "),a("van-cell",{staticClass:"flex-lr border-0px",attrs:{title:"备注"},on:{click:function(a){return t.util.jsUrl("/core/pages/order/note",{sid:e.sid,type:"note",channel:"mall"},"replace")}}},[a("div",{staticClass:"note flex-lr",attrs:{slot:"right-icon"},slot:"right-icon"},[t.mallOrderExtra[e.sid]&&t.mallOrderExtra[e.sid].note?a("div",{staticClass:"note-text"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.mallOrderExtra[e.sid].note)+"\n\t\t\t\t\t\t\t")]):a("span",{staticClass:"c-disabled"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.store.data&&e.store.data.order_note_placeholder?e.store.data.order_note_placeholder:"口味、偏好等要求")+"\n\t\t\t\t\t\t\t")]),t._v(" "),a("i",{staticClass:"van-icon van-icon-arrow van-cell__right-icon"})])]),t._v(" "),1==e.store.invoice_status?a("van-cell",{staticClass:"flex-lr border-0px",attrs:{title:"发票"},on:{click:function(a){return t.util.jsUrl("/core/pages/order/note",{sid:e.sid,type:"invoice",channel:"mall"},"replace")}}},[a("div",{staticClass:"note flex-lr",attrs:{slot:"right-icon"},slot:"right-icon"},[t.mallOrderExtra[e.sid]&&t.mallOrderExtra[e.sid].invoiceId>0?a("div",{staticClass:"note-text"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.mallOrderExtra[e.sid].invoiceTitle)+"\n\t\t\t\t\t\t\t")]):a("span",{staticClass:"c-disabled"},[t._v("不需要发票")]),t._v(" "),a("i",{staticClass:"van-icon van-icon-arrow van-cell__right-icon"})])]):t._e()],2),t._v(" "),t._m(1,!0),t._v(" "),a("van-cell-group",{staticClass:"border-0px"},[a("van-cell",[a("div",{staticClass:"order-pay-info",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"pay-price"},[t._v("\n\t\t\t\t\t\t\t\t实付\n\t\t\t\t\t\t\t\t"),a("div",[t._v(t._s(t.Lang.dollarSign)+t._s(t.allorder.orders[s].final_fee_show))])]),t._v(" "),a("div",{staticClass:"discount-fee"},[t._v("优惠"+t._s(t.Lang.dollarSign)+t._s(t.allorder.orders[s].discount_fee))]),t._v(" "),a("div",{staticClass:"total-original"},[t._v("\n\t\t\t\t\t\t\t\t小计"+t._s(t.Lang.dollarSign)+t._s(t.allorder.orders[s].total_fee_show)+"\n\t\t\t\t\t\t\t")])])])],1)],1)]}),t._v(" "),t.allorder.feetips&&t.allorder.feetips.length>0?a("van-cell-group",{staticClass:"margin-10-t"},[t._l(t.allorder.feetips,function(e,s){return["delivery_fee"==e.key&&1==t.allorder.order_type||!e.key?[a("van-cell",{attrs:{value:e.value}},[a("template",{slot:"title"},[a("span",{staticClass:"custom-title"},[t._v(t._s(e.name))]),t._v(" "),"delivery_fee"==e.key?a("span",{staticClass:"icon icon-question-circle",on:{click:function(a){return t.onToggleDeliveryFee(e.note)}}}):t._e()])],2)]:t._e()]})],2):t._e()],2),t._v(" "),t.allorder.redPackets&&t.allorder.redPackets[t.activeIndex]&&t.allorder.redPackets[t.activeIndex].length>0||t.svip_redpacket&&t.svip_redpacket.id?a("van-popup",{attrs:{position:"bottom"},model:{value:t.popup.redPacket,callback:function(e){t.$set(t.popup,"redPacket",e)},expression:"popup.redPacket"}},[a("div",{staticClass:"popup-redpacket"},[a("div",{staticClass:"popup-title van-hairline--bottom"},[t._v("平台红包")]),t._v(" "),a("div",{staticClass:"popup-container"},[t.svip_redpacket&&t.svip_redpacket.id?[a("load",{attrs:{type:"loaded",text:"超级会员专享红包",bgcolor:"#f5f5f5"}}),t._v(" "),1==t.is_buysvip?a("div",{staticClass:"svip-redpacket"},[a("div",{staticClass:"svip-redpacket-item"},[a("div",{staticClass:"svip-redpacket-top flex"},[a("div",{staticClass:"svip-redpacket-left flex"},[a("div",{staticClass:"redpacket-img"},[t.svip_redpacket.sid>0?a("img",{staticClass:"img-100",attrs:{src:t.svip_redpacket.logo,alt:""}}):a("img",{staticClass:"img-100",attrs:{src:"static/img/svip_redpacket.png",alt:""}})]),t._v(" "),a("div",{staticClass:"redpacket-info"},[a("div",{staticClass:"redpacket-title"},[t._v(t._s(t.svip_redpacket.title))]),t._v(" "),a("div",[a("span",{staticClass:"redpacket-tips"},[t._v("超级会员")]),t._v(" "),a("span",{staticClass:"font-12 c-gray"},[t._v(" 限会员有效期内使用")])])])]),t._v(" "),a("div",{staticClass:"svip-redpacket-right"},[a("div",{staticClass:"c-danger"},[a("div",{staticClass:"redpacket-money"},[a("span",{staticClass:"redpacket-unit"},[t._v(t._s(t.Lang.dollarSign))]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.svip_redpacket.discount)+"\n\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),0==t.svip_redpacket.condition?a("div",{staticClass:"font-12 c-gray"},[t._v("无门槛")]):t.svip_redpacket.condition>0?a("div",{staticClass:"font-12 c-gray"},[t._v("满"+t._s(t.svip_redpacket.condition)+t._s(t.Lang.dollarSignCn))]):t._e()])]),t._v(" "),a("div",{staticClass:"svip-redpacket-line"},[a("div",{staticClass:"line"})]),t._v(" "),a("div",{staticClass:"svip-redpacket-bottom flex-lr"},[a("div",{staticClass:"font-12 c-gray"},[t._v(t._s(t.svip_redpacket.desc))]),t._v(" "),t.svip_redpacket.store_redpacket&&t.svip_redpacket.store_redpacket.id?a("div",{staticClass:"svip-redpacket-convert",on:{click:function(e){return t.onSelectRedpacket("svip_"+t.svip_redpacket.store_redpacket.id)}}},[t._v("立即使用")]):a("div",{staticClass:"svip-redpacket-convert",on:{click:function(e){return t.onSelectRedpacket(t.svip_redpacket.id)}}},[t._v("立即使用")])])])]):a("div",{staticClass:"svip-redpacket"},[a("div",{staticClass:"svip-redpacket-item"},[a("div",{staticClass:"svip-redpacket-top flex"},[a("div",{staticClass:"svip-redpacket-left flex"},[a("div",{staticClass:"redpacket-img"},[t.svip_redpacket.sid>0?a("img",{staticClass:"img-100",attrs:{src:t.svip_redpacket.logo,alt:""}}):a("img",{staticClass:"img-100",attrs:{src:"static/img/svip_redpacket.png",alt:""}})]),t._v(" "),a("div",{staticClass:"redpacket-info"},[a("div",{staticClass:"redpacket-title"},[t._v(t._s(t.svip_redpacket.title))]),t._v(" "),a("div",[a("span",{staticClass:"redpacket-tips"},[t._v("超级会员")]),t._v(" "),a("span",{staticClass:"font-12 c-gray"},[t._v(" 限"+t._s(t.svip_redpacket.endtime_cn)+"前领取")])])])]),t._v(" "),a("div",{staticClass:"svip-redpacket-right"},[a("div",{staticClass:"c-danger"},[a("div",{staticClass:"redpacket-money"},[a("span",{staticClass:"redpacket-unit"},[t._v(t._s(t.Lang.dollarSign))]),t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.svip_redpacket.discount)+"\n\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),0==t.svip_redpacket.condition?a("div",{staticClass:"font-12 c-gray"},[t._v("无门槛")]):t.svip_redpacket.condition>0?a("div",{staticClass:"font-12 c-gray"},[t._v("满"+t._s(t.svip_redpacket.condition)+t._s(t.Lang.dollarSignCn))]):t._e()])]),t._v(" "),a("div",{staticClass:"svip-redpacket-line"},[a("div",{staticClass:"line"})]),t._v(" "),a("div",{staticClass:"svip-redpacket-bottom flex-lr"},[a("div",{staticClass:"font-12 c-gray"},[t._v(t._s(t.svip_redpacket.desc))]),t._v(" "),"take"==t.svip_redpacket.take_status?[a("div",{staticClass:"svip-redpacket-convert",on:{click:t.onConfirmSvipExchange}},[t._v("立即领取")])]:"exchange"==t.svip_redpacket.take_status?[a("div",{staticClass:"svip-redpacket-convert",on:{click:function(e){return t.onChangePopup("svipRedpacket")}}},[t._v("立即兑换")])]:t._e()],2)])])]:t._e(),t._v(" "),a("load",{attrs:{type:"loaded",text:"可用红包("+t.allorder.redPackets[t.activeIndex].length+"个)",bgcolor:"#f5f5f5"}}),t._v(" "),t._l(t.allorder.redPackets[t.activeIndex],function(e,s){return a("div",{key:s,staticClass:"redPacket-list content-padded"},[a("div",{staticClass:"redPacket-list-item",on:{click:function(a){return t.onSelectRedpacket(e.id)}}},[a("div",{staticClass:"redPacket-list-item-container"},[a("div",{staticClass:"redPacket-info row"},[a("div",{staticClass:"col-50"},[a("span",{staticClass:"redPacket-title"},[t._v(t._s(e.title))])]),t._v(" "),a("div",{staticClass:"col-50 text-right"},[a("div",{staticClass:"price"},[t._v(t._s(t.Lang.dollarSign)),a("span",{staticClass:"price-num"},[t._v(t._s(e.discount))])])])]),t._v(" "),a("div",{staticClass:"redPacket-use-limit row"},[a("div",{staticClass:"col-60"},[t._v(t._s(e.day_cn))]),t._v(" "),a("div",{staticClass:"col-40 text-right"},[a("p",{staticClass:"use-condition"},[t._v("满"+t._s(e.condition)+t._s(t.Lang.dollarSignCn)+"可用")])])])]),t._v(" "),a("span",{staticClass:"circle circle-left"}),t._v(" "),a("span",{staticClass:"circle circle-right"}),t._v(" "),t.allorder.orders[t.activeIndex].redpacket&&e.id==t.allorder.orders[t.activeIndex].redpacket.id?a("div",{staticClass:"selected-status"},[a("img",{attrs:{src:"static/img/success.png",alt:""}})]):t._e()])])})],2),t._v(" "),a("div",{staticClass:"popup-cancle van-hairline--top",on:{click:function(e){return t.onSelectRedpacket(0)}}},[t._v("不使用红包")])])]):t._e(),t._v(" "),t.allorder.coupons[t.activeIndex]&&t.allorder.coupons[t.activeIndex].length>0?a("van-popup",{attrs:{position:"bottom"},model:{value:t.popup.coupon,callback:function(e){t.$set(t.popup,"coupon",e)},expression:"popup.coupon"}},[a("div",{staticClass:"popup-coupon"},[a("div",{staticClass:"popup-title van-hairline--bottom"},[t._v("商家代金券")]),t._v(" "),a("div",{staticClass:"popup-container"},[a("load",{attrs:{type:"loaded",text:"可用代金券("+t.allorder.coupons[t.activeIndex].length+"张)",bgcolor:"#f5f5f5"}}),t._v(" "),a("div",{staticClass:"coupon-list"},[a("div",{staticClass:"content-padded"},t._l(t.allorder.coupons[t.activeIndex],function(e){return a("div",{staticClass:"coupon-item"},[a("div",{staticClass:"clearfix",on:{click:function(a){return t.onSelectCoupon(e.id,e.sid)}}},[a("span",{staticClass:"circle circle-left"}),t._v(" "),a("span",{staticClass:"circle circle-right"}),t._v(" "),a("div",{staticClass:"left"},[a("div",{staticClass:"store-logo"},[a("img",{attrs:{src:e.logo,alt:""}})]),t._v(" "),a("div",{staticClass:"coupon-detail"},[a("div",{staticClass:"coupon-title"},[t._v(t._s(e.title))]),t._v(" "),a("div",{staticClass:"use-time"},[t._v("有效期至:"+t._s(e.endtime_cn))])])]),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"price"},[a("span",[t._v(t._s(t.Lang.dollarSign))]),t._v(t._s(e.discount)+"\n\t\t\t\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"condition"},[t._v("满"+t._s(e.condition)+t._s(t.Lang.dollarSignCn)+"可用")])])]),t._v(" "),t.allorder.orders[t.activeIndex].coupon&&e.id==t.allorder.orders[t.activeIndex].coupon.id?a("div",{staticClass:"selected-status"},[a("img",{attrs:{src:"static/img/success.png",alt:""}})]):t._e()])}),0)])],1),t._v(" "),a("div",{staticClass:"popup-cancle van-hairline--top",on:{click:function(e){return t.onSelectCoupon(0,t.activeSid)}}},[t._v("不使用代金券")])])]):t._e(),t._v(" "),t.allorder.deliveryTimes.predict_day&&t.allorder.deliveryTimes&&t.allorder.deliveryTimes.times?a("van-popup",{attrs:{position:"bottom"},model:{value:t.popup.deliveryTime,callback:function(e){t.$set(t.popup,"deliveryTime",e)},expression:"popup.deliveryTime"}},[a("div",{staticClass:"popup-time"},[a("div",{staticClass:"popup-title van-hairline--bottom"},[t._v("选择预计送达时间")]),t._v(" "),a("div",{staticClass:"popup-container"},[a("div",{staticClass:"left"},[t._l(t.allorder.deliveryTimes.days,function(e,s){return[a("div",{staticClass:"date-item van-hairline--bottom",class:{"van-hairline--right":t.allorder.deliveryTimes.predict_day!=e,active:t.allorder.deliveryTimes.predict_day==e},on:{click:function(a){return t.onSelectDeliveryday(e)}}},[t._v(t._s(e))])]})],2),t._v(" "),a("div",{staticClass:"right"},[t.allorder.deliveryTimes.times[t.allorder.deliveryTimes.predict_day]&&t.allorder.deliveryTimes.times[t.allorder.deliveryTimes.predict_day].times?a("van-cell-group",[t._l(t.allorder.deliveryTimes.times[t.allorder.deliveryTimes.predict_day].times,function(e,s){return[a("van-cell",{class:{active:t.allorder.deliveryTimes.predict_index==s},on:{click:function(a){return t.onSelectDeliverytimes(e.time_cn,s)}}},[a("template",{slot:"title"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.time_cn)+t._s("立即送出"==e.time_cn?"("+e.start+"~"+e.end+")":"")+"\n\t\t\t\t\t\t\t\t")]),t._v(" "),a("template",{slot:"right-icon"},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(1==t.allorder.order_type?e.total_delivery_price_cn:"")+"\n\t\t\t\t\t\t\t\t\t"),a("van-icon",{staticClass:"van-cell__right-icon",class:{active:t.allorder.deliveryTimes.predict_index==s},attrs:{name:"check"}})],1)],2)]})],2):t._e()],1)]),t._v(" "),a("div",{staticClass:"popup-cancle van-hairline--top",on:{click:function(e){return t.onChangePopup("deliveryTime")}}},[t._v("取消")])])]):t._e(),t._v(" "),a("van-dialog",{staticClass:"popup-deliveryFee",attrs:{title:"配送费说明"},model:{value:t.popup.deliveryFeeShow,callback:function(e){t.$set(t.popup,"deliveryFeeShow",e)},expression:"popup.deliveryFeeShow"}},[t.allorder.orders[t.activeIndex]&&t.allorder.orders[t.activeIndex].delivery_fee_note?t._l(t.allorder.orders[t.activeIndex].delivery_fee_note.notes,function(e){return a("div",{staticClass:"fee-item"},[t._v("\n\t\t\t\t"+t._s(e)+"\n\t\t\t")])}):t._e()],2),t._v(" "),a("van-dialog",{staticClass:"popup-deliveryFee",attrs:{title:"配送费说明"},model:{value:t.popup.allDeliveryFeeShow,callback:function(e){t.$set(t.popup,"allDeliveryFeeShow",e)},expression:"popup.allDeliveryFeeShow"}},[t.allDeliveryFeeNote?t._l(t.allDeliveryFeeNote.notes,function(e){return a("div",{staticClass:"fee-item"},[t._v("\n\t\t\t\t"+t._s(e)+"\n\t\t\t")])}):t._e()],2),t._v(" "),a("transition",{attrs:{name:"loading"}},[t.showPreLoading?a("iloading"):t._e()],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"divide"},[e("div",{staticClass:"divide-line"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"divide"},[e("div",{staticClass:"divide-line"})])}]};var h=a("VU/8")(C,f,!1,function(t){a("rkYV")},null,null);e.default=h.exports},rkYV:function(t,e){}});
//# sourceMappingURL=203.9d8dbeec805776b222f5.js.map