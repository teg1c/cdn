webpackJsonp([249],{h4Gk:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r("Gu7T"),o=r.n(s),n=r("Cz8s"),a=r("mzkE"),i={data:function(){return{hotStores:[],recommendStores:[],searchHistorys:[],keyword:"",menufooter:{},preLoading:!1}},components:{PublicHeader:n.a,PublicFooter:a.a},methods:{onLoad:function(){var t=this;this.preLoading=!0,this.util.request({url:"wmall/home/hunt/index",data:{menufooter:1}}).then(function(e){t.preLoading=!1;var r=e.data.message;r.errno?t.$toast(r.message):(t.hotStores=[].concat(o()(t.hotStores),o()(r.message.hotStores)),t.recommendStores=[].concat(o()(t.recommendStores),o()(r.message.recommendStores)),t.searchHistorys=[].concat(o()(t.searchHistorys),o()(r.message.searchHistorys)))})},onClearHistory:function(){var t=this;this.$dialog.confirm({message:"确定清除历史记录吗"}).then(function(e){"confirm"==e&&t.util.request({url:"wmall/home/hunt/truncate"}).then(function(e){var r=e.data.message;r.errno?t.$toast(r.message):t.searchHistorys=[]}).catch(function(t){})})},onKeyword:function(t){this.keyword=t},onTapToSearch:function(t){this.$refs.searchInput.blur(),this.onSearch()},onSearch:function(){if(!this.keyword)return!1;this.keyword;this.$router.push(this.util.getUrl({path:"/pages/home/searchResult",query:{key:this.keyword}}))},onSubmit:function(){return!1}},mounted:function(){this.onLoad()}},c={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"search"}},[r("public-header",{attrs:{title:"搜索"}}),t._v(" "),r("public-footer",{attrs:{menufooter:t.menufooter,preLoading:t.preLoading}}),t._v(" "),r("div",{staticClass:"content"},[r("form",{attrs:{action:"#",autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("div",{staticClass:"search-header van-hairline--bottom"},[r("div",{staticClass:"search-content"},[r("van-icon",{attrs:{name:"search"}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],ref:"searchInput",staticClass:"search-input",attrs:{type:"text",placeholder:"请输入商家或商品名称"},domProps:{value:t.keyword},on:{keyup:function(e){return e.type.indexOf("key")||13===e.keyCode?t.onTapToSearch(e):null},input:function(e){e.target.composing||(t.keyword=e.target.value)}}})],1),t._v(" "),r("div",{staticClass:"search-btn",on:{click:function(e){return t.onSearch()}}},[t._v("搜索")])])]),t._v(" "),t.hotStores.length>0||t.searchHistorys.length>0?r("div",{staticClass:"rmd-history"},[t.hotStores.length>0?r("div",{staticClass:"search-rmd-wrap"},[t._m(0),t._v(" "),r("div",{staticClass:"search-rmd"},t._l(t.hotStores,function(e,s){return r("router-link",{key:s,attrs:{to:t.util.getUrl({path:e.url}),tag:"div"}},[t._v(t._s(e.title))])}),1)]):t._e(),t._v(" "),t.searchHistorys.length>0?r("div",{staticClass:"search-history-wrap"},[r("div",{staticClass:"search-rmd-title"},[r("div",{staticClass:"van-hairline--bottom"},[t._v("历史搜索")]),t._v(" "),r("div",{staticClass:"icon icon-delete",on:{click:t.onClearHistory}})]),t._v(" "),r("div",{staticClass:"search-rmd"},t._l(t.searchHistorys,function(e,s){return r("div",{key:s,on:{click:function(r){return t.onKeyword(e)}}},[t._v(t._s(e))])}),0)]):t._e()]):t._e(),t._v(" "),t.recommendStores.length>0?r("van-cell-group",[r("van-cell",{attrs:{title:"猜你在找"}}),t._v(" "),t._l(t.recommendStores,function(e,s){return r("van-cell",{key:s,staticClass:"guess-store",attrs:{"is-link":"",to:t.util.getUrl({path:e.url})}},[r("template",{slot:"title"},[r("img",{attrs:{src:e.logo}}),t._v(" "),r("span",[t._v(t._s(e.title))])])],2)})],2):t._e()],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"search-rmd-title "},[e("div",{staticClass:"van-hairline--bottom"},[this._v("热门搜索")])])}]};var l=r("VU/8")(i,c,!1,function(t){r("zrLE")},null,null);e.default=l.exports},zrLE:function(t,e){}});
//# sourceMappingURL=249.0e5a871785273f07668a.js.map