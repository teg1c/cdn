webpackJsonp([14],{"6LCL":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAsCAMAAAAgsQpJAAABtlBMVEUAAABEwURDvkNDvUJDvUJCvkFCvkFDvUJCvkJDvkFDv0NEwURFvUJDvkFCvUFCvkFEvkGAv4BJv0lDvkFFv0VDvUJCvkFDvkFDv0NCvkFCv0JGvkZCvkFEvkFDyENDvUJDvUJCv0JFwUVDvkNDvUJDwkNCvkJDvUJDvUJCvkJDvkFDvkFJwklDvkFDvkNGvkFEvUJDvUJOxE5DyUNDvUJDvkFGwUZVv1VCvkFDvkFDvUJCvkFCvkJCvkFDvUJDvUJDvUJCvkFCvUJDvUJDvkNCvkJCvkFDvkFFvkVFvkVDvkNDvkNEvUJEvUJEvkRDvUJDvkFDvUJDvkFDwENG0UZCvkJDvkFCwkJDvUJDv0NFvUJDvUJEzERCvkFEvkFDw0NGv0ZCvkFIv0hCvkFDvkNDvkNDvkFExERV1VX///9mzGZCvkJDvUJDvkFDvkNDvUJEvkFDvUJDvUJDvkFJvUJNzE1DvUJDvkFDvkFEvUJDvkFDvkNCvkFEwURDvUJDv0OA/4BLw0tGvUJEvkFCv0JDv0NV/1VDvUJEvUJDvkFFv0VCvkJEvUJFvkFCvkJEvkFDvkFCvkI7QoQZAAAAknRSTlMAMXaz0ur66dSwby1dz//MWgQcuDTw+3lX/oc393UX6PhoJW75LpaMq6KYxxWJfjNt0Q0T3eIdDNeZr+ex6+2u7MSqkHLg75FDO4qdk4BP9JT8tD0L2N428WtZsg/zUiYo3yDTgoaFHgYBBcXCqHrNXuThwyMKtqx9iMuh7inlYwIRPlZsWwPGdKQwqY9KjmKV3ECYinUAAAHQSURBVDjLY2AYloCRiZmFlY2dg5OLG58yHl4+BOAXEMShTEiYDxVwiGA3TpQPHYiJY1EnIcmHBUhhqJOW4cMKZNHUycmDRBUUlWQh8pJM3MpiIIaKKqpCNbC0OpClAWZpAllaYJY2ijodNrAgF5CpC2bpAll6EMP1kRUaQMQMjRiMTcAsUzMGcwuIoCWyQiuo061tbKEsO3tTIOng6OTsgqzQFZuH3dw9PJW9vH18/XTgCv0xlYn5SAe4QdmBQcFQhQoY6uSDdQORuJI+IditDpXmRRMJCwcptEETjQgPxbBDlBGoMBJNMCoai+dcYxgYYmJRhBzjIPbHJySCaJP4pGQQrQU0MgVFoQQ/mAKGYCqIToNayZbOwJDBgqQuVglCW2VmZYPonAyGXLBAHtDIdFOEwvwCKMOUFUIXFkHoYpDHSxBm5jJhT5t87OCwLC2D8csrcChUgERPJYxfJYHXRAYOPr7k6jAgv6YWh0JhsLp4vrr6BgaGxqZmRXMO7ApbIIm3ohSemlqxqmOFKEAuF9rasSmUwJLL5YqIyeMgkGCBpkyyA0dJZN6JqlAPd9nW1Y2cxnvwFYMxvZXVGpx9/fpyE8QmElnCxueWDLdKAwCJcWGNcITaxwAAAABJRU5ErkJggg=="},Ls0E:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("5Kdi"),a=i("EuEE"),o=i("XbGN"),n={data:function(){return{mobile:"",password:"",config:{yjyzVerifyStatus:0},gconfig:{},canYjyzVerifyLogin:!1,showLoading:!0,loginAgreementCheck:!1}},beforeRouteEnter:function(t,e,i){e.name&&(window.redirct_url={path:e.path,query:e.query}),i(function(t){t.util.checkToken({success:function(){return t.$router.replace(a.a.getUrl({path:"/pages/home/index"})),!1},fail:function(){return t.onLoad(),!1}})})},methods:{onLogin:function(){var t=this;return this.mobile?this.util.isValidMobile(this.mobile)?this.password?this.loginAgreementCheck?void this.util.request({url:"wmall/auth/login",method:"POST",data:{mobile:this.mobile,password:this.password,inituid:this.inituid}}).then(function(e){var i=e.data.message;if(i.errno)return t.util.$toast(i.message,"",1e3),!1;i=i.message,t.util.setStorage("itoken",i.member.token),console.log("登录后websocket重新进行初始化"),t.iwebsocket.init();var s=window.redirct_url;(!s||s&&-1!=s.path.indexOf("pages/auth/"))&&(s={path:"/pages/home/index"}),t.util.icloudapi(),t.$router.replace(t.util.getUrl(s))}):(this.$toast("请勾选下方的 已认真阅读并同意 用户服务协议 和 隐私政策"),!1):(this.$toast("请输入密码"),!1):(this.$toast("手机号格式错误"),!1):(this.$toast("手机号不能为空"),!1)},onLoad:function(){var t=this;this.util.request({url:"wmall/auth/login",data:{gconfig:1}}).then(function(e){t.showLoading=!1;var i=e.data.message;if(i.errno)return t.util.$toast(i.message,"",1e3),!1;t.config=i.message.config_mall,t.gconfig=window.gconfig,t.util.isGlala()&&1==t.config.yjyzVerifyStatus&&t.onYjyzPreGetPhoneNumber()})},h5appLogin:function(t){if(this.util.isGlala())this.util.wxLogin();else{var e=this.util.getStorage("forwardUrl");s.a.init({backurl:e}),s.a.sns(t)}},onYjyzPreGetPhoneNumber:function(){var t=this;o.a.yjyzPreGetPhoneNumber({success:function(e){t.canYjyzVerifyLogin=!0},fail:function(t){t.error_code?t.error_code:t.code,t.error_message?t.error_message:t.description;console.log("预取号码错误信息",t)}})},onYjyzVerifyLogin:function(){var t=this;o.a.yjyzAuthLogin({success:function(e){if(!e.token)return!1;t.util.request({url:"wmall/auth/yjyzVerify",data:e,method:"POST"}).then(function(e){var i=e.data.message;if(i.errno)return t.util.$toast(i.message,"",1e3),!1;i=i.message,t.util.setStorage("itoken",i.member.token),t.iwebsocket.init();var s=window.redirct_url;(!s||s&&-1!=s.path.indexOf("pages/auth/"))&&(s={path:"/pages/home/index"}),t.$router.replace(t.util.getUrl(s))})},fail:function(e){if("200060"==e.error_code||"200020"==e.error_code)return!1;var i=e.error_code?e.error_code:e.code,s=e.error_message?e.error_message:e.description;console.log("一键手机号登录失败",e);var a="一键手机号登录失败. 错误码:"+i+", 错误信息:"+s;t.util.$toast(a)}})}},mounted:function(){this.onLoad()},created:function(){this.query=this.$route.query,this.query&&(this.inituid=this.query.inituid)}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"login"}},[s("div",{staticClass:"content"},[s("div",{staticClass:"header"},[s("div",{staticClass:"logo"},[t.config.logo?s("img",{attrs:{src:t.config.logo,alt:""}}):s("img",{attrs:{src:"static/img/head.png",alt:""}})]),t._v(" "),s("div",{staticClass:"name"},[t._v(t._s(t.config.title))])]),t._v(" "),s("div",{staticClass:"list-block"},[s("van-cell-group",[s("van-field",{attrs:{"left-icon":"phone1",type:"text",placeholder:"请输入手机号"},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}}),t._v(" "),s("van-field",{attrs:{"left-icon":"lock",type:"password",placeholder:"请输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t._v(" "),s("router-link",{staticClass:"list-password",attrs:{to:t.util.getUrl({path:"/pages/auth/forget"})}},[t._v("忘记密码"),s("van-icon",{attrs:{name:"right"}})],1),t._v(" "),s("div",{staticClass:"content-padded"},[s("div",{staticClass:"button-login",on:{click:t.onLogin}},[t._v("登录")])]),t._v(" "),t.canYjyzVerifyLogin?s("div",{staticClass:"content-padded"},[s("div",{staticClass:"button-login",on:{click:t.onYjyzVerifyLogin}},[t._v("手机号一键登录")])]):t._e()],1),t._v(" "),s("div",{staticClass:"text"},[s("p",[t._v("还没有账号？"),s("router-link",{staticClass:"text-a",attrs:{to:t.util.getUrl({path:"/pages/auth/register"})}},[t._v("立即注册")])],1)]),t._v(" "),t.gconfig.app&&t.gconfig.app.customer&&t.gconfig.app.customer.login&&(1==t.gconfig.app.customer.login.qq||1==t.gconfig.app.customer.login.wx)?[t.util.ish5app()?[s("div",{staticClass:"other-way"},[t._m(0),t._v(" "),s("div",{staticClass:"other-entry"},[1==t.gconfig.app.customer.login.qq?s("div",{staticClass:"entry-item",on:{click:function(e){return t.h5appLogin("qq")}}},[s("img",{attrs:{src:i("NtYs"),alt:""}}),t._v(" "),s("span",[t._v("腾讯QQ")])]):t._e(),t._v(" "),1==t.gconfig.app.customer.login.wx?s("div",{staticClass:"entry-item",on:{click:function(e){return t.h5appLogin("wx")}}},[s("img",{attrs:{src:i("6LCL"),alt:""}}),t._v(" "),s("span",[t._v("微信")])]):t._e()])])]:t.util.isGlala()?[s("div",{staticClass:"other-way"},[t._m(1),t._v(" "),s("div",{staticClass:"other-entry"},[1==t.gconfig.app.customer.login.qq?s("div",{staticClass:"entry-item",on:{click:function(e){return t.util.qqLogin()}}},[s("img",{attrs:{src:i("NtYs"),alt:""}}),t._v(" "),s("span",[t._v("腾讯QQ")])]):t._e(),t._v(" "),1==t.gconfig.app.customer.login.wx?s("div",{staticClass:"entry-item",on:{click:function(e){return t.util.wxLogin()}}},[s("img",{attrs:{src:i("6LCL"),alt:""}}),t._v(" "),s("span",[t._v("微信")])]):t._e()])])]:t._e()]:t._e(),t._v(" "),s("div",{staticClass:"tips"},[s("van-checkbox",{attrs:{"icon-size":"16px","checked-color":"#ff2d4b"},model:{value:t.loginAgreementCheck,callback:function(e){t.loginAgreementCheck=e},expression:"loginAgreementCheck"}},[t._v("\n\t\t\t\t已认真阅读并同意\n\t\t\t\t"),s("span",{staticClass:"c-danger",on:{click:function(e){return e.stopPropagation(),t.util.jsUrl("/pages/member/agreement",{type:"agreement"})}}},[t._v("用户服务协议")]),t._v("、"),s("span",{staticClass:"c-danger",on:{click:function(e){return e.stopPropagation(),t.util.jsUrl("/pages/member/agreement",{type:"privacy_policy"})}}},[t._v("隐私政策")])])],1)],2),t._v(" "),s("transition",{attrs:{name:"loading"}},[s("iloading",{directives:[{name:"show",rawName:"v-show",value:t.showLoading,expression:"showLoading"}]})],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"use-way"},[e("span",[this._v("使用合作账号登录/注册")]),this._v(" "),e("span",{staticClass:"line van-hairline--top"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"use-way"},[e("span",[this._v("使用合作账号登录/注册")]),this._v(" "),e("span",{staticClass:"line van-hairline--top"})])}]};var v=i("VU/8")(n,r,!1,function(t){i("ioBN")},null,null);e.default=v.exports},NtYs:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAsCAMAAAAgsQpJAAABWVBMVEUAAAA5xv84xP84xP85xP85xP85w/84w/84xP86xf89zv9A3/86w/84w/85w/84w/84x/85w/85w/87xP85xv85w/84xP84xP87xP84xP84xf88w/85w/84xP85xv84xP85xP9A//84w/85w/85xP85xP9Ax/88w/86w/85xP85w/84xP84xP85w/85xP85xP84w/+A//85xP84w/9mzP85w/86xf85w/85xP85xP84xP////84w/87xP85xP84w/85xv87xP86xP85xP85w/9NzP86xf84xP84w/85xP84xP84w/86xP85xP85xP85xP85xP86xf84xP85w/9EzP84xP85xv87xP84xf84xP85w/88yf85xv85xP85xP86w/9V//86xf84xP86xP84xP88w/85w/85xv9Az/86w/84xP85w/85xP86xf84w/85xP84xP84w/88xP/jC5IeAAAAc3RSTlMACVaozu3z1rZqFQiA//ueO93uV1D3/nFO/W0i7/o2x9sETWLL3CAvd6Grtb/J08/ZAuTrBVFdorTY8QH0GmOVEiuFoOYKT1un1/nepNSH5a4f31UP9S00dp+zJkdw9okDVHqSujPqWRB86LiTU43yw4gepf6rqQAAAVZJREFUOMu11VdXwjAYgOGCWkT8cOEARcWBuEddVAQXLlREqQMRUXFv//+FnGNamjRfesV70Zs8J6dN0laSqp3DWVNbJ7vq3Q1C5mmUgeRtEtDmFjDV2oY5XztQdXTyXZcf2AI8191jcRDs5cA+4NQfsrgB4DZogUN8OMy6MCCNMNCNwQgDRzE4xsBxDE4wcBKDUwycxuAM7WbnMKjMU3AB0BYpuITDZQpGcaia3UoMh7BqgnGBg0TFrSki6F834AYI29RdaEsM5SSB22DTjv0i/rdLoMsO7hGo2kF9zfftYJDAFMDBITrbEUCawGOQMwF0Xxwnxil3ek+lrIbAM+k8dqGf2nD5EuG7y/JQJksdoBz3jUlavz1XvIfPW911gTej96bIuFvsqe8YeI/BEgMfHo2hdPypsvuaj73H55fSq1pIvb1/eCSpmP/MRbUv5fvnt3p/qj9MOVBOm4SAFQAAAABJRU5ErkJggg=="},ioBN:function(t,e){}});
//# sourceMappingURL=14.9727523670dfb7c2886a.js.map