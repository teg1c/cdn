webpackJsonp([151],{"FD/3":function(t,e){},n6dB:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("Gu7T"),n=s.n(i),a=s("Cz8s"),o=s("NPH5"),d={components:{PublicHeader:a.a,load:o.a},data:function(){return{newsCategorys:{},news:{page:1,psize:10,finished:!1,loading:!1,data:[]},filter:{items:{cateid:0}},showPreLoading:!0}},methods:{onToggleStatus:function(t){this.filter.items.cateid=t,this.onLoad(!0)},onLoad:function(t){var e=this;if(t&&(this.news={page:1,psize:10,loading:!0,finished:!1,data:[]}),this.news.finished)return!1;this.util.request({url:"wmall/home/news/list",data:{page:this.news.page,psize:this.news.psize,cateid:this.filter.items.cateid}}).then(function(t){var s=t.data.message;s.errno?e.$toast(s.message):(e.hideLoading(),s=s.message,e.newsCategorys=s.categorys,e.news.data=[].concat(n()(e.news.data),n()(s.news)),e.news.loading=!1,s.news.length<e.news.psize&&(e.news.finished=!0),e.news.page++)})},hideLoading:function(){this.showPreLoading=!1}},created:function(){this.query=this.util.parseQuery(this.$route.query),this.query.cid&&(this.filter.items.cateid=this.query.cid)},mounted:function(){this.onLoad()}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"mall-news"}},[s("public-header",{attrs:{title:"资讯"}}),t._v(" "),s("div",{staticClass:"content"},[t._e(),t._v(" "),s("van-tabs",{staticClass:"van-hairline--top",attrs:{sticky:"","offset-top":46,"line-width":"22%"},on:{change:t.onToggleStatus},model:{value:t.filter.items.cateid,callback:function(e){t.$set(t.filter.items,"cateid",e)},expression:"filter.items.cateid"}},t._l(t.newsCategorys,function(e,i){return s("van-tab",{key:i,attrs:{title:e.title,name:e.id}},[s("van-list",{attrs:{finished:t.news.finished,offset:100,"immediate-check":!0},on:{load:t.onLoad},model:{value:t.news.loading,callback:function(e){t.$set(t.news,"loading",e)},expression:"news.loading"}},[t.news.data.length>0?[t._l(t.news.data,function(e,i){return[s("div",{key:i,staticClass:"news-item",on:{click:function(s){return t.util.jsUrl("/mall/pages/news/detail",{id:e.id})}}},[s("van-row",{attrs:{gutter:"10"}},[s("van-col",{attrs:{span:"18"}},[s("div",{staticClass:"news-title"},[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"news-date"},[t._v(t._s(e.addtime_cn))])]),t._v(" "),s("van-col",{attrs:{span:"6"}},[s("div",{staticClass:"news-thumb"},[s("img",{attrs:{src:e.thumb,alt:""}})])])],1)],1)]}),t._v(" "),t.news.finished?s("load",{attrs:{type:"loaded",text:"我是有底线的",bgcolor:"#f5f5f5"}}):t._e()]:s("div",{staticClass:"common-no-con"},[s("img",{attrs:{src:"static/img/order_no_con.png",alt:""}}),t._v(" "),s("p",[t._v("暂无资讯！")])])],2)],1)}),1)],1),t._v(" "),t.showPreLoading?s("iloading"):t._e()],1)},staticRenderFns:[]};var r=s("VU/8")(d,l,!1,function(t){s("FD/3")},null,null);e.default=r.exports}});
//# sourceMappingURL=151.9b24ae7aa3497edad249.js.map