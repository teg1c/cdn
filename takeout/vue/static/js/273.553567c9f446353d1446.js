webpackJsonp([273],{"0hM4":function(t,i){},"ko+Q":function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=a("Cz8s"),e=a("deIj"),o={data:function(){return{goods_id:0,records:{page:1,psize:15,loading:!0,finished:!1,empty:!1,data:[]},total:0,total_has_thumb:0,total_activity_good:0,total_activity_bad:0,filter:{thumb_status:0,activity:0,note:!1},showPreLoading:!0,isRefresh:!1}},components:{PublicHeader:s.a},methods:{onToggleFilter:function(t,i){"thumb_status"==t?(this.filter.thumb_status=i,this.filter.activity=0):"activity"==t?(this.filter.activity=i,this.filter.thumb_status=0):(this.filter.activity=0,this.filter.thumb_status=0),this.onLoad(!0)},onChangeNote:function(){this.onLoad(!0)},onLoad:function(t){var i=this;!0===t&&(i.records={page:1,psize:15,loading:!0,finished:!1,empty:!1,data:[]});var a=i.filter;a.note=a.note?1:0,a.goods_id=i.goods_id,a.page=i.records.page,a.psize=i.records.psize,Object(e.b)({vue:i,url:"wmall/store/goods/goodsComment",data:a,success:function(t){i.total=t.total,i.total_has_thumb=t.total_has_thumb,i.total_activity_good=t.total_activity_good,i.total_activity_bad=t.total_activity_bad}})},onPullDownRefresh:function(){this.onLoad(!0)}},mounted:function(){var t=this.util.parseQuery(this.$route.query);this.goods_id=t.goods_id,this.filter.thumb_status=t.thumb_status,this.filter.activity=t.activity,this.onLoad()}},n={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{attrs:{id:"goods-comment"}},[a("public-header",{attrs:{title:"商品评价"}}),t._v(" "),a("div",{staticClass:"content"},[a("van-pull-refresh",{on:{refresh:function(i){return t.onPullDownRefresh()}},model:{value:t.isRefresh,callback:function(i){t.isRefresh=i},expression:"isRefresh"}},[a("div",{staticClass:"search-wrap van-hairline--bottom"},[a("div",{staticClass:"search-item",class:{active:!t.filter.thumb_status&&!t.filter.activity},on:{click:function(i){return t.onToggleFilter("",0)}}},[a("span",[t._v("全部")]),t._v(" "),a("span",[t._v(t._s(t.total))])]),t._v(" "),t.total_has_thumb>0?a("div",{staticClass:"search-item",class:{active:1==t.filter.thumb_status},on:{click:function(i){return t.onToggleFilter("thumb_status",1)}}},[a("span",[t._v("有图")]),t._v(" "),a("span",[t._v(t._s(t.total_has_thumb))])]):t._e(),t._v(" "),t.total_activity_good>0?a("div",{staticClass:"search-item",class:{active:1==t.filter.activity},on:{click:function(i){return t.onToggleFilter("activity",1)}}},[a("span",{staticClass:"icon icon-appreciate_fill_light"}),t._v(" "),a("span",[t._v(t._s(t.total_activity_good))])]):t._e(),t._v(" "),t.total_activity_bad>0?a("div",{staticClass:"search-item",class:{active:2==t.filter.activity},on:{click:function(i){return t.onToggleFilter("activity",2)}}},[a("span",{staticClass:"icon icon-appreciate_fill_light rotate"}),t._v(" "),a("span",[t._v(t._s(t.total_activity_bad))])]):t._e()]),t._v(" "),a("div",{staticClass:"padding-10-tb padding-15-lr font-12 bg-default margin-10-b"},[a("van-checkbox",{attrs:{"icon-size":"16px","checked-color":"#ff2d4b"},on:{click:t.onChangeNote},model:{value:t.filter.note,callback:function(i){t.$set(t.filter,"note",i)},expression:"filter.note"}},[t._v("只看有内容评价")])],1),t._v(" "),t.records.empty?a("div",{staticClass:"no-data"},[a("img",{attrs:{src:"static/img/goods_no_con.png",alt:""}}),t._v(" "),a("p",[t._v("暂无商品评价~")])]):a("van-list",{attrs:{finished:t.records.finished,offset:100,"immediate-check":!1},on:{load:t.onLoad},model:{value:t.records.loading,callback:function(i){t.$set(t.records,"loading",i)},expression:"records.loading"}},[a("div",{staticClass:"goods-comment"},t._l(t.records.data,function(i,s){return a("div",{key:s,staticClass:"comment-item"},[a("div",{staticClass:"comment-inner border-1px-b"},[a("div",{staticClass:"left"},[a("div",{staticClass:"avatar "},[a("img",{attrs:{src:i.avatar}})])]),t._v(" "),a("div",{staticClass:"right"},[a("van-row",[a("van-col",{attrs:{span:"17"}},[a("div",{staticClass:"w-100 ellipsis margin-5-t"},[t._v(t._s(i.username))]),t._v(" "),i.activity>0?a("div",{staticClass:"flex margin-5-t"},[a("span",{staticClass:"icon icon-appreciate_fill_light c-danger",class:{rotate:2==i.activity}}),t._v(" "),a("span",{staticClass:"font-12 c-gray"},[t._v(t._s(1==i.activity?"赞":"踩")+"了该商品")])]):t._e()]),t._v(" "),a("van-col",{staticClass:"text-right font-12 c-gray",attrs:{span:"7"}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(i.addtime_cn)+"\n\t\t\t\t\t\t\t\t\t")])],1),t._v(" "),i.note?a("div",{staticClass:"note"},[t._v(t._s(i.note))]):t._e(),t._v(" "),i.thumbs&&i.thumbs.length>0?a("div",{staticClass:"thumbs"},[a("van-row",t._l(i.thumbs,function(s,e){return a("van-col",{key:e,attrs:{span:"6"}},[a("div",{staticClass:"thumb-item",on:{click:function(a){return t.util.jsPreviewImage(i.thumbs,e)}}},[a("div",{staticClass:"img-wrap"},[a("img",{attrs:{src:s}})])])])}),1)],1):t._e()],1)])])}),0),t._v(" "),a("div",{staticClass:"loaded-group"},[t.records.finished?a("div",{staticClass:"loaded"},[a("div",{staticClass:"loaded-tips"},[t._v("没有更多了")])]):t._e()])])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(o,n,!1,function(t){a("0hM4")},null,null);i.default=c.exports}});
//# sourceMappingURL=273.553567c9f446353d1446.js.map