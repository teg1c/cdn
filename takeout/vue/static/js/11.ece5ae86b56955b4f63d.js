webpackJsonp([11],{FTTk:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("Dd8w"),a=s.n(r),i=s("NYxO"),n=s("Cz8s"),o=s("mzkE"),d=s("TpHn"),c=s("G8Uw"),u={components:{publicHeader:n.a,publicFooter:o.a,orderItem:d.a},data:function(){return{showPreLoading:!0,isRefresh:!1,records:{page:1,psize:15,finished:!1,loading:!1,data:[]},menufooter:{}}},methods:a()({},Object(i.b)([]),{onLoad:function(t){Object(c.b)({vue:this,force:t,data:{filter:this.filter.items,menufooter:1}})},onPullDownRefresh:function(){this.onLoad(!0)},onChangeStatus:function(t){t.vue=this,t.from="search",Object(c.a)(t)}}),computed:a()({},Object(i.c)(["erranderStoreOrderSearch"]),{filter:function(){var t={items:{}};return t=this.util.extend(t,this.erranderStoreOrderSearch),t}}),mounted:function(){this.onLoad(!1)},created:function(){this.query=this.$route.query,this.query&&this.query.status&&(this.status=this.query.status)}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"estore-order-search-result"}},[s("public-header",{attrs:{title:"搜索结果"}},[s("div",{staticClass:"search-btn",attrs:{slot:"right"},on:{click:function(e){return t.util.jsUrl("/plugin/pages/paotui/store/order/search")}},slot:"right"},[s("span",{staticClass:"icon icon-search font-20"})])]),t._v(" "),s("public-footer",{attrs:{menufooter:t.menufooter,showPreLoading:t.showPreLoading}}),t._v(" "),s("div",{staticClass:"content"},[s("van-pull-refresh",{on:{refresh:t.onPullDownRefresh},model:{value:t.isRefresh,callback:function(e){t.isRefresh=e},expression:"isRefresh"}},[t.records.empty?s("div",{staticClass:"no-data"},[s("img",{attrs:{src:"static/img/order_no_con.png",alt:""}}),t._v(" "),s("p",[t._v("暂无符合条件订单!")])]):s("van-list",{staticClass:"order-list",attrs:{finished:t.records.finished,offset:100,"immediate-check":!1},on:{load:t.onLoad},model:{value:t.records.loading,callback:function(e){t.$set(t.records,"loading",e)},expression:"records.loading"}},[t._l(t.records.data,function(e,r){return[s("order-item",{attrs:{order:e,order_index:r},on:{onChangeStatus:t.onChangeStatus}})]})],2)],1)],1),t._v(" "),t.showPreLoading?s("iloading"):t._e()],1)},staticRenderFns:[]};var v=s("VU/8")(u,l,!1,function(t){s("qDbc")},null,null);e.default=v.exports},G8Uw:function(t,e,s){"use strict";s.d(e,"b",function(){return d}),s.d(e,"a",function(){return c});var r=s("woOf"),a=s.n(r),i=s("Gu7T"),n=s.n(i),o=s("EuEE");s("YaEn"),s("deIj");function d(t){if(t.force&&(t.vue.records={page:1,psize:15,loading:!0,finished:!1,empty:!1,data:[]}),t.vue.records.finished)return!1;t.vue.util.request({url:"errander/storeOrder/index",data:{page:t.vue.records.page,psize:t.vue.records.psize,filter:t.data.filter,menufooter:t.data.menufooter}}).then(function(e){var s=e.data.message;if(t.vue.showPreLoading=!1,s.errno)return t.vue.util.$toast(s.message),!1;var r=s.message.records;t.vue.records.data=[].concat(n()(t.vue.records.data),n()(r)),r.length<t.vue.records.psize&&(t.vue.records.finished=!0,t.vue.records.data.length||(t.vue.records.empty=!0)),t.vue.records.page++,t.vue.records.loading=!1,t.vue.isRefresh=!1,1==t.data.menufooter&&(t.vue.menufooter=window.menufooter)})}function c(t){console.log(1111111,t);var e=t.order,s=t.type,r=function(t){return{pay:{tip:"确定去支付吗?",success_status:1,url:"errander/storeOrder/pay"},end:{tip:"确定已收到商品吗?",success_status:3,url:"errander/storeOrder/end"},cancel:{tip:"确定取消订单吗?",success_status:4,url:"errander/storeOrder/cancel"}}[t]}(s),i=r.tip,n=r.success_status,d={url:r.url,data:{id:e.id,type:s},confirm:i,success:function(e){if(o.a.$toast(e),"detail"==t.from&&n)t.vue.order.status=n,t.vue.order=a()({},t.vue.order);else{-1!=["cancel","end"].indexOf(s)&&t.index>=0&&("search"==t.from?t.vue.records.data[t.index].status=n:t.vue.records.data.splice(t.index,1))}}};o.a.jspost(d)}},POXm:function(t,e){},TpHn:function(t,e,s){"use strict";var r={props:{order:Object,order_index:Number},data:function(){return{isRefresh:!1}},components:{},methods:{onChangeStatus:function(t){var e={order:this.order,type:t,index:this.order_index};this.$emit("onChangeStatus",e)}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"estore-order-item"}},[s("div",{staticClass:"order-item",on:{click:function(e){return t.util.jsUrl("/plugin/pages/paotui/store/order/detail",{id:t.order.id})}}},[s("div",{staticClass:"top van-hairline--bottom"},[s("div",[s("span",{staticClass:"serial-sn"},[t._v("#"+t._s(t.order.id))]),t._v(" "),"美团"==t.order.data.goods_source?s("span",{staticClass:"meituan"},[t._v("\n\t\t\t\t\t"+t._s(t.order.data.goods_source)+"\n\t\t\t\t\t"),t.order.data.serial_sn?[t._v("\n\t\t\t\t\t\t#"+t._s(t.order.data.serial_sn)+"\n\t\t\t\t\t")]:t._e()],2):"饿了么"==t.order.data.goods_source?s("span",{staticClass:"eleme"},[t._v("\n\t\t\t\t\t"+t._s(t.order.data.goods_source)+"\n\t\t\t\t\t"),t.order.data.serial_sn?[t._v("\n\t\t\t\t\t\t#"+t._s(t.order.data.serial_sn)+"\n\t\t\t\t\t")]:t._e()],2):t._e()]),t._v(" "),s("div",{staticClass:"flex"},[s("span",{staticClass:"mode"},[t._v(t._s("take"==t.order.order_type?"帮取":"帮送"))]),t._v(" "),t._e(),t._v(" "),s("span",{staticClass:"order-status"},[t._v(t._s(t.order.status_cn))]),t._v(" "),s("span",{staticClass:"icon icon-right font-12 c-gray"})])]),t._v(" "),s("div",{staticClass:"middle"},["take"==t.order.order_type?[s("div",{staticClass:"address-item from"},[t._m(0),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"title"},[t._v(t._s(t.order.buy_address))]),t._v(" "),s("div",{staticClass:"desc"},[s("span",[t._v(t._s(t.order.buy_username))]),t._v(" "),s("span",[t._v(t._s(t.order.buy_sex))]),t._v(" "),s("span",[t._v(t._s(t.order.buy_mobile))])])])]),t._v(" "),s("div",{staticClass:"address-item to"},[t._m(1),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"title"},[t._v(t._s(t.order.accept_username))]),t._v(" "),s("div",{staticClass:"desc"},[t._v(t._s(t.order.accept_address))]),t._v(" "),s("div",{staticClass:"title margin-5-t"},[t._v(t._s(t.order.accept_mobile))])])])]:"send"==t.order.order_type?[s("div",{staticClass:"address-item from"},[t._m(2),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"title"},[t._v(t._s(t.order.buy_username))]),t._v(" "),s("div",{staticClass:"desc"},[t._v(t._s(t.order.buy_address))]),t._v(" "),s("div",{staticClass:"title margin-5-t"},[t._v(t._s(t.order.buy_mobile))])])]),t._v(" "),s("div",{staticClass:"address-item to"},[t._m(3),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"title"},[t._v(t._s(t.order.accept_address))]),t._v(" "),s("div",{staticClass:"desc"},[s("span",[t._v(t._s(t.order.accept_username))]),t._v(" "),s("span",[t._v(t._s(t.order.accept_sex))]),t._v(" "),s("span",[t._v(t._s(t.order.accept_mobile))])])])])]:t._e()],2),t._v(" "),s("div",{staticClass:"bottom van-hairline--top"},[s("div",{staticClass:"addtime"},[t._v(t._s(t.order.addtime_cn))]),t._v(" "),s("div",[0==t.order.is_pay?[s("van-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return e.stopPropagation(),t.onChangeStatus("pay")}}},[t._v("立即支付")])]:[1==t.order.status?[s("van-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return e.stopPropagation(),t.onChangeStatus("cancel")}}},[t._v("取消订单")])]:2==t.order.status?[1==t.order.delivery_status?s("van-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return e.stopPropagation(),t.onChangeStatus("cancel")}}},[t._v("取消订单")]):t._e(),t._v(" "),s("van-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return e.stopPropagation(),t.onChangeStatus("end")}}},[t._v("确认送达")])]:[s("van-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return e.stopPropagation(),t.util.jsUrl("/plugin/pages/paotui/store/order/diy",{mode:t.order.order_type,order_id:t.order.id})}}},[t._v("再来一单")])]]],2)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left"},[e("div",{staticClass:"mark"},[this._v("发")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left"},[e("div",{staticClass:"mark"},[this._v("收")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left"},[e("div",{staticClass:"mark"},[this._v("发")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left"},[e("div",{staticClass:"mark"},[this._v("收")])])}]};var i=s("VU/8")(r,a,!1,function(t){s("POXm")},null,null);e.a=i.exports},qDbc:function(t,e){}});
//# sourceMappingURL=11.ece5ae86b56955b4f63d.js.map