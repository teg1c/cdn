webpackJsonp([272],{"M/zZ":function(e,t){},nVP0:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mzkE"),n=i("Cz8s"),r=i("/Vxk"),s=i("q0vl"),o={data:function(){return{select:0,price:0,input:"",recharge:{status:0,diy_status:1,diy_min:0,items:[]},member:{credit2:0},agreement:"",agreementPopup:!1,islegal:!1,showPreLoading:!0,bind_mobile:{}}},components:{PublicHeader:n.a,PublicFooter:a.a,BindMobile:r.a,agreement:s.a},watch:{input:function(){this.price=this.input}},methods:{onLoad:function(){var e=this;this.util.request({url:"wmall/member/recharge/index"}).then(function(t){e.showPreLoading=!1;var i=t.data.message;i.errno?e.util.$toast(i.message):(i=i.message,e.islegal=!0,e.agreement=i.agreement,e.member=e.util.extend(e.member,i.member),e.recharge=e.util.extend(e.recharge,i.recharge),e.recharge.items&&e.recharge.items.length>0&&(e.price=e.recharge.items[0].charge),window.bind_mobile&&(e.bind_mobile=window.bind_mobile))})},changeSelect:function(e,t){this.select=e,this.price=t},onSubmit:function(){var e=this;return!!this.islegal&&(1==this.recharge.diy_status&&this.recharge.diy_min>0&&this.price<this.recharge.diy_min?(this.util.$toast("最低充值"+this.recharge.diy_min+this.Lang.dollarSignCn),!1):void this.util.request({url:"wmall/member/recharge/submit",data:{price:this.price}}).then(function(t){var i=t.data.message;if(i.errno)return e.util.$toast(i.message),e.islegal=!0,!1;var a=i.message;e.$router.replace(e.util.getUrl({path:"/pages/public/pay",query:{order_id:a,order_type:"recharge"}}))}))},onToggleAgreement:function(){this.agreementPopup=!this.agreementPopup}},mounted:function(){this.onLoad()}},c={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"recharge"}},[i("public-header",{attrs:{title:"余额充值"}}),e._v(" "),i("div",{staticClass:"content font-14"},[i("div",{staticClass:"diy-price"},[i("div",[i("div",[e._v("余额("+e._s(e.Lang.dollarSignCn)+")")]),e._v(" "),i("div",{staticClass:"margin-10-t font-bold font-16 c-danger"},[e._v(e._s(e.member.credit2))])]),e._v(" "),1==e.recharge.diy_status&&"other"==e.select?i("div",{staticClass:"border-1px-b padding-10-b"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.input,expression:"input",modifiers:{number:!0}}],attrs:{type:"text",placeholder:e.recharge.diy_min>0?"最低"+e.recharge.diy_min+e.Lang.dollarSignCn:"输入金额"},domProps:{value:e.input},on:{input:function(t){t.target.composing||(e.input=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),i("span",{staticClass:"c-danger font-bold"},[e._v(e._s(e.Lang.dollarSignCn))])]):e._e()]),e._v(" "),i("van-row",{staticClass:"recharge-list"},[e._l(e.recharge.items,function(t,a){return i("van-col",{key:a,class:{"recharge-item":1,active:e.select==a},attrs:{span:"8"}},[i("div",{staticClass:"inner",on:{click:function(i){return e.changeSelect(a,t.charge)}}},[i("div",{staticClass:"flex"},[i("span",{staticClass:"font-bold font-16"},[e._v(e._s(t.charge))]),e._v(" "),i("span",{staticClass:"margin-5-l font-bold"},[e._v(e._s(e.Lang.dollarSignCn))])]),e._v(" "),i("div",{staticClass:"font-12 font-bold margin-5-t"},[e._v("\n\t\t\t\t\t\t赠送"+e._s(t.back)),"credit2"==t.type?[e._v(e._s(e.Lang.dollarSignCn))]:[e._v("积分")]],2)])])}),e._v(" "),1==e.recharge.diy_status?i("van-col",{class:{"recharge-item":1,active:"other"==e.select},attrs:{span:"8"}},[i("div",{staticClass:"inner",on:{click:function(t){return e.changeSelect("other",e.input)}}},[i("div",{staticClass:"font-bold"},[e._v("其他金额")])])]):e._e()],2),e._v(" "),i("div",{staticClass:"padding-15"},[i("van-button",{attrs:{size:"large",type:"danger",disabled:!e.islegal},on:{click:e.onSubmit}},[e._v("去充值")])],1),e._v(" "),i("div",{staticClass:"agreement-tip"},[e._v("\n\t\t\t点击充值即代表同意 "),i("span",{on:{click:e.onToggleAgreement}},[e._v("充值协议")])])],1),e._v(" "),i("bind-mobile",{attrs:{"bind-mobile":e.bind_mobile}}),e._v(" "),i("agreement",{attrs:{show:e.agreementPopup,title:"充值协议",content:e.agreement},on:{agreementHide:e.onToggleAgreement}}),e._v(" "),e.showPreLoading?i("iloading"):e._e()],1)},staticRenderFns:[]};var l=i("VU/8")(o,c,!1,function(e){i("M/zZ")},"data-v-03af384c",null);t.default=l.exports}});
//# sourceMappingURL=272.8108846b38a607aab2cb.js.map