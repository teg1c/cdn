webpackJsonp([274],{"0vA7":function(t,a){},tV0e:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=s("Cz8s"),e=s("MJLE"),n=s.n(e),i={components:{publicHeader:r.a},data:function(){return{showPreLoading:!0,isRefresh:!1,popupStatus:!1,id:0,order:{category:{},from_deliveryer:{},to_deliveryer:{},status_cn:{},status:"",logs:{},last_log:{},pay:{},refund:{}},qrcode:""}},methods:{onTogglePopup:function(){this.popupStatus=!this.popupStatus},onUpdateOrderStatus:function(t,a){var s={url:"wmall/mall/deposit/order_update",data:{id:t,type:a}};this.util.jspost(s)},onLoad:function(){var t=this;this.util.request({url:"wmall/mall/deposit/order_detail",data:{id:this.id}}).then(function(a){t.showPreLoading=!1;var s=a.data.message;s.errno?t.$toast(s.message):(s=s.message,t.order=s.order,2==t.order.status&&(t.qrcode="",t.$nextTick(function(){this.newQrcode(this.order.refund_qrcode)})))})},newQrcode:function(t){new n.a("qrcode",{width:150,height:150,text:t,image:""})},onQueryRefundStatus:function(){var t=this,a=this;a.util.request({url:"wmall/mall/deposit/order_detail",data:{id:this.id}}).then(function(s){t.showPreLoading=!1;var r=s.data.message;return r.errno?(t.util.$toast(r.message),!1):(r=r.message,t.order=r.order,a.util.$toast(t.order.refund.text,"refresh"),!1)})}},mounted:function(){this.onLoad()},created:function(){this.querys=this.util.parseQuery(this.$route.query),this.querys&&this.querys.id&&(this.id=this.querys.id)}},o={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{attrs:{id:"deposit-order-detail"}},[s("public-header",{attrs:{title:"订单详情"}}),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"order-status bg-default margin-10 padding-10-t text-center"},[s("div",[s("span",{staticClass:"font-18 font-bold",on:{click:t.onTogglePopup}},[t._v("订单"+t._s(t.order.status_cn.text))]),s("i",{staticClass:"icon icon-right c-gray"})]),t._v(" "),t.order.last_log?s("div",{staticClass:"c-gray margin-15-tb font-14"},[t._v(t._s(t.order.last_log.note))]):t._e(),t._v(" "),1==t.order.status?s("div",{staticClass:"order-btn margin-10-b margin-15-t"},[1==t.order.status?[s("div",{staticClass:"btn",on:{click:function(a){return t.onUpdateOrderStatus(t.order.id,"refund_apply")}}},[t._v("申请押金退款")])]:t._e()],2):t._e()]),t._v(" "),2==t.order.status?[s("div",{staticClass:"margin-10-l margin-10-r"},[s("div",{staticClass:"pay-code"},[s("div",[s("div",{staticClass:"qrcode",attrs:{id:"qrcode"}}),t._v(" "),s("p",{staticClass:"text-center font-12 margin-10-t"},[t._v("退款状态: "+t._s(t.order.refund.text))])]),t._v(" "),s("p",{staticClass:"code-text"},[t._v("请配送员扫描二维码即可退押金")]),t._v(" "),s("div",{staticClass:"wrap-button"},[s("van-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.onQueryRefundStatus()}}},[t._v("查询退款状态")])],1)])])]:t._e(),t._v(" "),t.order.refund_status>0?s("div",{staticClass:"bg-default margin-10 padding-10 font-14"},[s("van-row",{staticClass:"margin-10-tb"},[s("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("退款编号")]),t._v(" "),s("van-col",{attrs:{span:"17"}},[t._v(t._s(t.order.refund_out_no))])],1),t._v(" "),s("van-row",{staticClass:"margin-10-tb"},[s("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("退款申请时间")]),t._v(" "),s("van-col",{attrs:{span:"17"}},[t._v(t._s(t.order.refund_apply_time_cn))])],1),t._v(" "),s("van-row",{staticClass:"margin-10-tb"},[s("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("退款状态")]),t._v(" "),s("van-col",{attrs:{span:"17"}},[t._v(t._s(t.order.refund.text))])],1),t._v(" "),3==t.order.refund_status?[s("van-row",{staticClass:"margin-10-tb"},[s("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("退款到账时间")]),t._v(" "),s("van-col",{attrs:{span:"17"}},[t._v(t._s(t.order.refund_success_time_cn))])],1)]:t._e()],2):t._e(),t._v(" "),s("div",{staticClass:"bg-default margin-10 padding-10 font-14"},[s("van-row",{staticClass:"margin-10-tb"},[s("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("订单编号")]),t._v(" "),s("van-col",{attrs:{span:"17"}},[t._v(t._s(t.order.order_sn))])],1),t._v(" "),s("van-row",{staticClass:"margin-10-tb"},[s("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("押金类型")]),t._v(" "),s("van-col",{attrs:{span:"17"}},[t._v(t._s(t.order.category.title))])],1),t._v(" "),s("van-row",{staticClass:"margin-10-tb"},[s("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("押金金额")]),t._v(" "),s("van-col",{attrs:{span:"17"}},[t._v(t._s(t.Lang.dollarSign)+t._s(t.order.final_fee))])],1),t._v(" "),s("van-row",{staticClass:"margin-10-tb"},[s("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("押金备注")]),t._v(" "),s("van-col",{attrs:{span:"17"}},[t._v(t._s(t.order.note))])],1),t._v(" "),s("van-row",{staticClass:"margin-10-tb"},[s("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("付款时间")]),t._v(" "),s("van-col",{attrs:{span:"17"}},[t._v(t._s(t.order.paytime_cn))])],1),t._v(" "),s("van-row",{staticClass:"margin-10-tb"},[s("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("付款方式")]),t._v(" "),s("van-col",{attrs:{span:"17"}},[t._v(t._s(t.order.pay.text))])],1)],1),t._v(" "),t.order.to_deliveryer.id>0?s("div",{staticClass:"bg-default margin-10 padding-10 font-14"},[s("van-row",{staticClass:"margin-10-tb"},[s("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("退押金配送员")]),t._v(" "),s("van-col",{attrs:{span:"17"}},[t._v(t._s(t.order.to_deliveryer.title))])],1),t._v(" "),s("van-row",{staticClass:"margin-10-tb"},[s("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("手机号")]),t._v(" "),s("van-col",{attrs:{span:"17"}},[t._v(t._s(t.order.to_deliveryer.mobile))])],1)],1):t._e(),t._v(" "),t.order.from_deliveryer.id>0?s("div",{staticClass:"bg-default margin-10 padding-10 font-14"},[s("van-row",{staticClass:"margin-10-tb"},[s("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("收押金配送员")]),t._v(" "),s("van-col",{attrs:{span:"17"}},[t._v(t._s(t.order.from_deliveryer.title))])],1),t._v(" "),s("van-row",{staticClass:"margin-10-tb"},[s("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("手机号")]),t._v(" "),s("van-col",{attrs:{span:"17"}},[t._v(t._s(t.order.from_deliveryer.mobile))])],1)],1):t._e()],2),t._v(" "),s("van-popup",{attrs:{position:"bottom"},model:{value:t.popupStatus,callback:function(a){t.popupStatus=a},expression:"popupStatus"}},[s("div",{staticClass:"popup-title"},[s("span",[t._v("订单跟踪")]),t._v(" "),s("span",{staticClass:"c-info font-14",on:{click:t.onTogglePopup}},[t._v("关闭")])]),t._v(" "),s("div",{staticClass:"popup-content"},[s("van-steps",{attrs:{direction:"vertical",active:t.order.logs_length-1,"active-color":"#44BB00"}},t._l(t.order.logs,function(a,r){return s("van-step",{key:r,staticClass:"border-0px"},[s("div",{staticClass:"flex-lr"},[s("span",[t._v(t._s(a.title))]),t._v(" "),s("span",[t._v(t._s(a.addtime_cn))])]),t._v(" "),s("div",{staticClass:"margin-5-t"},[t._v(t._s(a.note))])])}),1)],1)]),t._v(" "),t.showPreLoading?s("iloading"):t._e()],1)},staticRenderFns:[]};var l=s("VU/8")(i,o,!1,function(t){s("0vA7")},null,null);a.default=l.exports}});
//# sourceMappingURL=274.8914de13621750622a8e.js.map