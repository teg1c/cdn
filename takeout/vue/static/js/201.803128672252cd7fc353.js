webpackJsonp([201],{"+Ew0":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("woOf"),s=i.n(a),n=i("Gu7T"),l=i.n(n),r=i("Cz8s"),o=i("q0vl"),u=i("P8xa"),c={name:"storeApplication",components:{PublicHeader:r.a,Agreement:o.a,imessage:u.a},data:function(){return{submitting:!1,agreementShow:!1,agreement:{},mobile:"",title:"",content:"",address:"",config:{},slides:[],message:{type:"",message:"",description:"",redirect:"",btnText:""},qualification:{0:{},1:{},2:{}},showPreLoading:!0}},methods:{agreementHide:function(){this.agreementShow=!1},onSubmit:function(){var t=this;return!this.submitting&&(this.mobile?this.util.isValidMobile(this.mobile)?this.address?this.title?1==this.config.qualification_verify_status&&0==this.qualification[0].update?(this.$toast("请上传营业执照照片"),!1):(this.submitting=!0,void this.util.request({url:"errander/storeSettle/store",method:"POST",data:{telephone:this.mobile,address:this.address,content:this.content,title:this.title,qualification:this.qualification}}).then(function(e){var i=e.data.message;if(-1==i.errno)return t.$toast(i.message),t.submitting=!1,!1;t.onLoad()})):(this.$toast("商户名称不能为空"),!1):(this.$toast("商户地址不能为空"),!1):(this.$toast("手机号格式错误"),!1):(this.$toast("手机号不能为空"),!1))},onLoad:function(){var t=this;this.util.request({url:"errander/storeSettle/store"}).then(function(e){var i=e.data.message;t.showPreLoading=!1,-1e3==i.errno?t.util.$toast(i.message,t.util.getUrl({path:"/plugin/pages/paotui/store/settle/index"}),1e3,"replace"):-1001==i.errno?t.message={type:"info",message:i.message.message,redirect:t.util.getUrl({path:"/pages/member/mine"}),btnText:"确定"}:-1==i.errno?t.message={type:"error",message:i.message,redirect:t.util.getUrl({path:"/pages/member/mine"}),btnText:"返回"}:0==i.errno?t.util.$toast(i.message.message,t.util.getUrl({path:"/plugin/pages/paotui/store/order/index"}),1e3,"replace"):(t.agreement=i.message.agreement,t.config=i.message.config,t.slides=[].concat(l()(i.message.slides)))})},onUploadImage:function(t,e){var i=this;i.util.image({obj:e,success:function(e,a){a.url&&a.filename&&(i.qualification[t]={url:a.url,filename:a.filename,update:1},i.qualification=s()({},i.qualification))},options:{channel:"h5"}})}},mounted:function(){this.onLoad()}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"store-application"}},[i("public-header",{attrs:{title:"商户信息"}}),t._v(" "),i("div",{staticClass:"content"},[t.slides.length>0?i("div",{staticClass:"swiper-container"},[i("van-swipe",{attrs:{autoplay:3e3,"indicator-color":"#ff2d4b"}},t._l(t.slides,function(e,a){return i("van-swipe-item",{key:a},[i("div",{on:{click:function(i){return t.util.jsUrl(e.wxapp_link)}}},[i("img",{attrs:{src:e.thumb}})])])}),1)],1):t._e(),t._v(" "),i("van-cell-group",[i("van-field",{attrs:{label:"商户名称",placeholder:"店铺名称"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),i("van-field",{attrs:{label:"商户地址",placeholder:"店铺详细地址"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}}),t._v(" "),i("van-field",{attrs:{label:"联系电话",placeholder:"店铺负责人电话"},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}}),t._v(" "),i("van-field",{attrs:{type:"textarea",label:"商户简介"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),i("van-field",{attrs:{label:"资质认证",placeholder:"仅用于平台认证",readonly:"readonly"}})],1),t._v(" "),i("div",{staticClass:"store-aptitude"},[i("div",{staticClass:"aptitude-img"},[i("input",{staticClass:"weui-uploader__input",attrs:{type:"file",multiple:"multiple",accept:"image/*"},on:{change:function(e){return t.onUploadImage(0,e)}}}),t._v(" "),t.qualification[0].url?i("img",{attrs:{src:t.qualification[0].url,alt:""}}):i("img",{attrs:{src:"static/img/store_aptitude.png",alt:""}})]),t._v(" "),i("div",{staticClass:"aptitude-img"},[i("input",{staticClass:"weui-uploader__input",attrs:{type:"file",multiple:"multiple",accept:"image/*"},on:{change:function(e){return t.onUploadImage(1,e)}}}),t._v(" "),t.qualification[1].url?i("img",{attrs:{src:t.qualification[1].url,alt:""}}):i("img",{attrs:{src:"static/img/food_aptitude.png",alt:""}})]),t._v(" "),i("div",{staticClass:"aptitude-img"},[i("input",{staticClass:"weui-uploader__input",attrs:{type:"file",multiple:"multiple",accept:"image/*"},on:{change:function(e){return t.onUploadImage(2,e)}}}),t._v(" "),t.qualification[2].url?i("img",{attrs:{src:t.qualification[2].url,alt:""}}):i("img",{attrs:{src:"static/img/other_aptitude.png",alt:""}})])]),t._v(" "),i("div",{staticClass:"protocol"},[t._v("\n\t\t\t我已阅读并同意 "),i("span",{staticClass:"c-danger",on:{click:function(e){t.agreementShow=!0}}},[t._v("《商户入驻协议》")])]),t._v(" "),i("div",{staticClass:"submit"},[i("van-button",{attrs:{size:"normal",type:"danger",block:!0,disabled:t.submitting},on:{click:t.onSubmit}},[t._v("提交")])],1)],1),t._v(" "),i("agreement",{attrs:{show:t.agreementShow,title:t.agreement.title,content:t.agreement.value},on:{agreementHide:t.agreementHide}}),t._v(" "),t.message.type?i("imessage",{attrs:{message:t.message}}):t._e(),t._v(" "),t.showPreLoading?i("iloading"):t._e()],1)},staticRenderFns:[]};var m=i("VU/8")(c,d,!1,function(t){i("pg4Z")},"data-v-3a83a296",null);e.default=m.exports},pg4Z:function(t,e){}});
//# sourceMappingURL=201.803128672252cd7fc353.js.map