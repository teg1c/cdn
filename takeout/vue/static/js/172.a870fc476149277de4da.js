webpackJsonp([172],{"1cy5":function(t,s){},"krW/":function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=a("Cz8s"),e=a("mzkE"),i={components:{PublicHeader:r.a,PublicFooter:e.a},data:function(){return{order:{status:0,data:{order:{},fees:[]}},config:{},popup:{log:!1,pricedetail:!1},showPreLoading:!0}},methods:{onLoad:function(){var t=this;if(!this.id)return this.$toast("订单不存在或已删除"),!1;this.util.request({url:"errander/storeOrder/detail",data:{id:this.id}}).then(function(s){t.showPreLoading=!1;var a=s.data.message;if(a.errno)return t.$toast(a.message),!1;a=a.message,t.order=t.util.extend(t.order,a.order)})},onChangeStatus:function(t,s){if("cancel"==s)var a={url:"errander/storeOrder/cancel?id="+t,confirm:"确定取消订单吗?"};else if("end"==s)a={url:"errander/storeOrder/end?id="+t,confirm:"确定已收到商品吗?"};else if("pay"==s)a={url:"errander/storeOrder/pay?id="+t,confirm:"确定去支付吗?"};this.util.jspost(a)},onTogglePopup:function(t){this.popup[t]=!this.popup[t]},onCopy:function(t){this.util.$toast("复制成功")}},created:function(){this.query=this.$route.query,this.id=this.query.id},mounted:function(){this.onLoad()}},n={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"estore-order-detail"}},[a("public-header",{attrs:{title:"订单详情"}}),t._v(" "),a("div",{staticClass:"content font-14"},[a("div",{staticClass:"order-status"},[a("div",[a("span",{staticClass:"font-18 font-bold",on:{click:function(s){return t.onTogglePopup("log")}}},[t._v("订单"+t._s(t.order.status_cn))]),a("i",{staticClass:"icon icon-right c-gray"})]),t._v(" "),t.order.log&&7!=t.order.delivery_status&&t.order.log.note?a("div",{staticClass:"c-gray margin-15-tb font-14"},[t._v(t._s(t.order.log.note))]):t._e(),t._v(" "),2==t.order.status&&2==t.order.order_from?a("div",{staticClass:"font-15 margin-15-t margin-10-b"},[a("i",{staticClass:"icon icon-timefill font-16"}),t._v(" "),a("span",{staticClass:"c-gray"},[t._v("配送时间:")]),t._v(" "),a("span",{staticClass:"c-danger"},[t._v(t._s(t.order.delivery_time))])]):t._e(),t._v(" "),t.order.status<3?a("div",{staticClass:"order-btn margin-10-b margin-15-t"},[0==t.order.is_pay&&1==t.order.status?[a("div",{staticClass:"btn bg-danger",on:{click:function(s){return t.onChangeStatus(t.order.id,"pay")}}},[t._v("立即支付")])]:t._e(),t._v(" "),1==t.order.status?[a("div",{staticClass:"btn bg-danger",on:{click:function(s){return t.onChangeStatus(t.order.id,"cancel")}}},[t._v("取消订单")])]:2==t.order.status?[1==t.order.delivery_status?a("div",{staticClass:"btn bg-danger",on:{click:function(s){return t.onChangeStatus(t.order.id,"cancel")}}},[t._v("取消订单")]):t._e(),t._v(" "),a("div",{staticClass:"btn bg-danger",on:{click:function(s){return t.onChangeStatus(t.order.id,"end")}}},[t._v("确认送达")])]:t._e()],2):t._e(),t._v(" "),t.order.deliveryer_id>0?[t._m(0),t._v(" "),a("div",{staticClass:"padding-15-lr padding-10-tb flex-lr"},[a("div",{staticClass:"flex "},[a("div",{staticClass:"deliveryer-avatar"},[a("img",{staticClass:"img-100",attrs:{src:t.order.deliveryer.avatar,alt:""}})]),t._v(" "),a("div",{staticClass:"font-14"},[a("div",{staticClass:"flex"},[a("span",{staticClass:"margin-5-r"},[t._v(t._s(t.order.deliveryer.title))]),t._v(" "),t._e()]),t._v(" "),a("div",{staticClass:"c-gray margin-10-t"},[t._v(t._s(t.order.deliveryer.mobile))])])]),t._v(" "),a("div",{staticClass:"flex"},[a("div",{staticClass:"icon icon-telephone icon-telephone1",on:{click:function(s){return t.util.jsTel(t.order.deliveryer.mobile)}}}),t._v(" "),1==t.order.show_location?a("div",{staticClass:"icon icon-zuobiao font-16 margin-10-l",on:{click:function(s){return t.util.jsUrl("/plugin/pages/paotui/store/order/map",{id:t.order.id})}}}):t._e()])])]:t._e()],2),t._v(" "),t.order.refund_status>0?a("div",{staticClass:"flex-lr padding-15 margin-10 bg-default",on:{click:function(s){return t.util.jsUrl("/plugin/pages/paotui/store/order/refund",{id:t.order.id})}}},[a("div",[t._v("退款明细")]),t._v(" "),t._m(1)]):t._e(),t._v(" "),a("div",{staticClass:"bg-default margin-10 padding-15-lr"},["take"==t.order.order_type?[a("div",{staticClass:"address-item from van-hairline--bottom"},[t._m(2),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"title"},[t._v(t._s(t.order.buy_address))]),t._v(" "),a("div",{staticClass:"desc"},[a("span",[t._v(t._s(t.order.buy_username))]),t._v(" "),a("span",[t._v(t._s(t.order.buy_sex))]),t._v(" "),a("span",[t._v(t._s(t.order.buy_mobile))])])])]),t._v(" "),a("div",{staticClass:"address-item to"},[t._m(3),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"title"},[t._v(t._s(t.order.accept_username))]),t._v(" "),a("div",{staticClass:"desc"},[t._v(t._s(t.order.accept_address))]),t._v(" "),a("div",{staticClass:"title margin-5-t"},[t._v(t._s(t.order.accept_mobile))])])])]:"send"==t.order.order_type?[a("div",{staticClass:"address-item from van-hairline--bottom"},[t._m(4),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"title"},[t._v(t._s(t.order.buy_username))]),t._v(" "),a("div",{staticClass:"desc"},[t._v(t._s(t.order.buy_address))]),t._v(" "),a("div",{staticClass:"title margin-5-t"},[t._v(t._s(t.order.buy_mobile))])])]),t._v(" "),a("div",{staticClass:"address-item to"},[t._m(5),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"title"},[t._v(t._s(t.order.accept_address))]),t._v(" "),a("div",{staticClass:"desc"},[a("span",[t._v(t._s(t.order.accept_username))]),t._v(" "),a("span",[t._v(t._s(t.order.accept_sex))]),t._v(" "),a("span",[t._v(t._s(t.order.accept_mobile))])])])])]:t._e()],2),t._v(" "),a("div",{staticClass:"bg-default margin-10 padding-15 font-14"},[a("van-row",{staticClass:"padding-10-b"},[a("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("订单编号")]),t._v(" "),a("van-col",{attrs:{span:"14"}},[t._v(t._s(t.order.order_sn))]),t._v(" "),a("van-col",{staticClass:"text-right",attrs:{span:"3"}},[a("span",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.order.order_sn,expression:"order.order_sn",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],staticClass:"c-danger"},[t._v("复制")])])],1),t._v(" "),a("van-row",{staticClass:"padding-10-tb"},[a("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("订单类型")]),t._v(" "),a("van-col",{attrs:{span:"17"}},[t._v(t._s("take"==t.order.order_type?"帮取":"帮送"))])],1),t._v(" "),a("van-row",{staticClass:"padding-10-tb"},[a("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("物品类型")]),t._v(" "),a("van-col",{attrs:{span:"17"}},[a("span",[t._v(t._s(t.order.data.goods_type))]),t._v(" "),a("span",[t._v("/")]),t._v(" "),a("span",[t._v(t._s(t.order.goods_weight)+"公斤")])])],1),t._v(" "),a("van-row",{staticClass:"padding-10-tb"},[a("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("配送距离")]),t._v(" "),a("van-col",{attrs:{span:"17"}},[a("span",[t._v(t._s(t.order.distance)+"公里")])])],1),t._v(" "),a("van-row",{staticClass:"padding-10-tb"},[a("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("物品来源")]),t._v(" "),a("van-col",{attrs:{span:"17"}},[a("span",[t._v(t._s(t.order.data.goods_source))]),t._v(" "),a("span",[t._v("#"+t._s(t.order.data.serial_sn))])])],1),t._v(" "),a("van-row",{staticClass:"padding-10-tb"},[a("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("配送时间")]),t._v(" "),a("van-col",{attrs:{span:"17"}},[t._v("\n\t\t\t\t\t"+t._s(t.order.delivery_time)+"\n\t\t\t\t")])],1),t._v(" "),a("van-row",{staticClass:"padding-10-tb"},[a("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("备注")]),t._v(" "),a("van-col",{attrs:{span:"17"}},[t._v("\n\t\t\t\t\t"+t._s(t.order.note)+"\n\t\t\t\t")])],1),t._v(" "),a("van-row",{staticClass:"padding-10-tb"},[a("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("支付方式")]),t._v(" "),a("van-col",{attrs:{span:"17"}},[t._v("\n\t\t\t\t\t预存金支付\n\t\t\t\t")])],1),t._v(" "),a("van-row",{staticClass:"padding-10-t"},[a("van-col",{staticClass:"c-gray",attrs:{span:"7"}},[t._v("支付金额")]),t._v(" "),a("van-col",{attrs:{span:"12"}},[t._v("\n\t\t\t\t\t"+t._s(t.order.final_fee)+t._s(t.Lang.dollarSignCn)+"\n\t\t\t\t")]),t._v(" "),a("van-col",{staticClass:"text-right",attrs:{span:"5"}},[a("span",{staticClass:"c-danger",on:{click:function(s){return t.onTogglePopup("pricedetail")}}},[t._v("价格明细")])])],1)],1)]),t._v(" "),a("van-popup",{attrs:{position:"bottom"},model:{value:t.popup.log,callback:function(s){t.$set(t.popup,"log",s)},expression:"popup.log"}},[a("div",{staticClass:"popup-title van-hairline--bottom"},[a("span",{staticClass:"opacity-1"},[t._v("取消")]),t._v(" "),a("span",[t._v("订单跟踪")]),t._v(" "),a("span",{staticClass:"c-danger font-14",on:{click:function(s){return t.onTogglePopup("log")}}},[t._v("关闭")])]),t._v(" "),a("div",{staticClass:"popup-content"},[a("van-steps",{attrs:{direction:"vertical",active:t.order.logs_length-1,"active-color":"#44BB00","active-icon":"roundcheckfill"}},t._l(t.order.logs,function(s,r){return a("van-step",{key:r,staticClass:"border-0px"},[a("div",{staticClass:"flex-lr"},[a("span",[t._v(t._s(s.title))]),t._v(" "),a("span",[t._v(t._s(s.addtime_cn))])]),t._v(" "),a("div",{staticClass:"margin-5-t"},[t._v(t._s(s.note))])])}),1)],1)]),t._v(" "),a("van-popup",{attrs:{position:"bottom"},model:{value:t.popup.pricedetail,callback:function(s){t.$set(t.popup,"pricedetail",s)},expression:"popup.pricedetail"}},[a("div",{staticClass:"popup-title van-hairline--bottom"},[a("span",{staticClass:"c-gray font-14",on:{click:function(s){return t.onTogglePopup("pricedetail")}}},[t._v("关闭")]),t._v(" "),a("span",[t._v("价格明细")]),t._v(" "),a("span",{staticClass:"c-danger font-14 flex",on:{click:function(s){return t.util.jsUrl("/plugin/pages/paotui/store/order/feeRule")}}},[t._v("\n\t\t\t\t价格规则\n\t\t\t\t"),a("span",{staticClass:"icon icon-right font-12 "})])]),t._v(" "),a("div",{staticClass:"popup-content"},[a("van-cell-group",{staticClass:"border-0px"},[t._l(t.order.data.fees,function(s,r){return[""!=s.fee?a("van-cell",{staticClass:"border-0px",attrs:{title:s.title,value:s.fee_cn}}):t._e()]})],2)],1)]),t._v(" "),t.showPreLoading?a("iloading"):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"divide"},[s("div",{staticClass:"divide-line"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"flex"},[s("span",{staticClass:"c-gray margin-5-r"},[this._v("查看")]),this._v(" "),s("span",{staticClass:"icon icon-right font-12 c-gray"})])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"left"},[s("div",{staticClass:"mark"},[this._v("发")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"left"},[s("div",{staticClass:"mark"},[this._v("收")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"left"},[s("div",{staticClass:"mark"},[this._v("发")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"left"},[s("div",{staticClass:"mark"},[this._v("收")])])}]};var o=a("VU/8")(i,n,!1,function(t){a("1cy5")},null,null);s.default=o.exports}});
//# sourceMappingURL=172.a870fc476149277de4da.js.map