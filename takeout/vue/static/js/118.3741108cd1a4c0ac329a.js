webpackJsonp([118],{dnvb:function(t,e){},gru3:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("mzkE"),a=s("Cz8s"),o=s("NPH5"),r=s("MHEY"),n={name:"StoreGoods",data:function(){return{store:{is_rest:0,activity:{num:0},svip:{},data:{}},activity:{},commentHeight:0,tabsTop:63,hide_telephone:0,showRedpacketIcon:!1,searchBarOpacity:0,preLoading:!0}},components:{PublicHeader:a.a,PublicFooter:i.a,Load:o.a,StoreHeader:r.a},methods:{onLoad:function(){var t=this;t.util.request({url:"wmall/store/index",data:{sid:t.$route.query.sid,gconfig:1}}).then(function(e){var s=e.data.message.message;t.store=s.store,t.store.headerStyle=window.theme.storeheaderstyle,t.activity=s.activity,t.hide_telephone=e.data.global.gconfig.hide_telephone,t.util.setWXTitle(t.store.title),t.preLoading=!1,setTimeout(function(){var e=document.getElementById("store-header").clientHeight;if(2==t.store.headerStyle){var s=document.getElementsByClassName("search-bar")[0];s&&(t.tabsTop=s.clientHeight),window.addEventListener("scroll",function(){var s=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;s>=t.tabsTop?t.showRedpacketIcon||(t.showRedpacketIcon=!0):t.showRedpacketIcon&&(t.showRedpacketIcon=!1);var i=e-t.tabsTop;t.searchBarOpacity=s/i})}else{var i=document.documentElement.clientHeight,a=document.getElementsByClassName("store-tabs")[0].clientHeight;if(t.commentHeight=i-e-a,document.getElementById("public-header")){var o=document.getElementById("public-header").clientHeight;t.commentHeight=t.commentHeight-o}}},200)})}},mounted:function(){this.onLoad()},beforeDestroy:function(){window.scrollTo(0,0),window.removeEventListener("scroll",function(){},!0)}},l={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"store-info"}},[t.isWeixin||t.store.headerStyle?t._e():s("public-header",{attrs:{title:t.store.title}}),t._v(" "),s("store-header",{attrs:{store:t.store,showRedpacketIcon:t.showRedpacketIcon,searchBarOpacity:t.searchBarOpacity}}),t._v(" "),s("div",{staticClass:"store-tabs flex-lr van-hairline--bottom",style:{position:2==t.store.headerStyle?"sticky":"relative",top:(2==t.store.headerStyle?t.tabsTop:0)+"px"}},[s("router-link",{staticClass:"tab-item ",attrs:{to:t.util.getUrl({path:"/pages/store/goods?sid="+t.store.id}),tag:"div"}},[t._v("商品")]),t._v(" "),s("router-link",{staticClass:"tab-item",attrs:{to:t.util.getUrl({path:"/pages/store/comment?sid="+t.store.id}),tag:"div"}},[t._v("评价 "),s("span",{staticClass:"comment-num"},[t._v(t._s(t.store.comment_num))])]),t._v(" "),s("div",{staticClass:"tab-item active"},[t._v("商家")])],1),t._v(" "),s("div",{staticClass:"store-detail",style:{height:2==t.store.headerStyle?"auto":t.commentHeight+"px"}},[s("div",{staticClass:"detail-region"},[t.store.service_titles?s("div",{staticClass:"no-gutter"},[s("router-link",{staticClass:"col-20",attrs:{to:t.util.getUrl({path:"/pages/store/goods",query:{sid:t.store.id}})}},[s("div",{staticClass:"van-icon van-icon-takeout"}),t._v(" "),s("div",[t._v(t._s(t.store.service_titles.takeout))])]),t._v(" "),1==t.store.is_meal?s("div",{staticClass:"col-20",on:{click:function(e){return t.util.jsUrl("wx:scanCode")}}},[s("div",{staticClass:"van-icon van-icon-meal"}),t._v(" "),s("div",[t._v(t._s(t.store.service_titles.tangshi))])]):t._e(),t._v(" "),1==t.store.is_reserve?s("router-link",{staticClass:"col-20",attrs:{to:t.util.getUrl({path:"/tangshi/pages/reserve/index",query:{sid:t.store.id}})}},[s("div",{staticClass:"van-icon van-icon-reserve"}),t._v(" "),s("div",[t._v(t._s(t.store.service_titles.reserve))])]):t._e(),t._v(" "),1==t.store.is_assign?s("router-link",{staticClass:"col-20",attrs:{to:t.util.getUrl({path:"/tangshi/pages/assign/assign",query:{sid:t.store.id}})}},[s("div",{staticClass:"van-icon van-icon-assign"}),t._v(" "),s("div",[t._v(t._s(t.store.service_titles.assign))])]):t._e(),t._v(" "),1==t.store.is_paybill?s("router-link",{staticClass:"col-20",attrs:{to:t.util.getUrl({path:"/pages/store/paybill",query:{sid:t.store.id}})}},[s("div",{staticClass:"van-icon van-icon-signboard"}),t._v(" "),s("div",[t._v(t._s(t.store.service_titles.paybill))])]):t._e()],1):t._e()]),t._v(" "),t.store.thumbs&&t.store.thumbs.length>0?s("van-cell-group",{staticClass:"margin-10-t border-0px"},[s("van-cell",[s("div",{staticClass:"flex",attrs:{slot:"title"},slot:"title"},[s("i",{staticClass:"icon icon-store font-18 margin-5-r"}),t._v(" "),s("span",[t._v("门店实景")])])]),t._v(" "),s("van-cell",{staticClass:"padding-10-lr"},[s("div",{staticClass:"store-thumbs"},t._l(t.store.thumbs,function(e,i){return s("div",{key:i,staticClass:"thumb-item ",on:{click:function(s){return t.util.jsPreviewImage(e.image)}}},[s("img",{staticClass:"img-100",attrs:{src:e.image,alt:""}})])}),0)])],1):t._e(),t._v(" "),t.store.qualification&&(t.store.qualification.business&&t.store.qualification.business.thumb||t.store.qualification.service&&t.store.qualification.service.thumb||t.store.qualification.more1&&t.store.qualification.more1.thumb||t.store.qualification.more2&&t.store.qualification.more2.thumb)?s("van-cell-group",{staticClass:"margin-10-t border-0px"},[s("van-cell",[s("div",{staticClass:"flex",attrs:{slot:"title"},slot:"title"},[s("i",{staticClass:"icon icon-pic font-18 margin-5-r"}),t._v(" "),s("span",[t._v("营业资质")])])]),t._v(" "),s("van-cell",{staticClass:"padding-10-lr"},[s("div",{staticClass:"store-thumbs"},[t.store.qualification.business&&t.store.qualification.business.thumb?s("div",{staticClass:"thumb-item",on:{click:function(e){return t.util.jsPreviewImage(t.store.qualification.business.thumb)}}},[s("img",{staticClass:"img-100",attrs:{src:t.store.qualification.business.thumb,alt:""}})]):t._e(),t._v(" "),t.store.qualification.service&&t.store.qualification.service.thumb?s("div",{staticClass:"thumb-item",on:{click:function(e){return t.util.jsPreviewImage(t.store.qualification.service.thumb)}}},[s("img",{staticClass:"img-100",attrs:{src:t.store.qualification.service.thumb,alt:""}})]):t._e(),t._v(" "),t.store.qualification.more1&&t.store.qualification.more1.thumb?s("div",{staticClass:"thumb-item",on:{click:function(e){return t.util.jsPreviewImage(t.store.qualification.more1.thumb)}}},[s("img",{staticClass:"img-100",attrs:{src:t.store.qualification.more1.thumb,alt:""}})]):t._e(),t._v(" "),t.store.qualification.more2&&t.store.qualification.more2.thumb?s("div",{staticClass:"thumb-item",on:{click:function(e){return t.util.jsPreviewImage(t.store.qualification.more2.thumb)}}},[s("img",{staticClass:"img-100",attrs:{src:t.store.qualification.more2.thumb,alt:""}})]):t._e()])])],1):t._e(),t._v(" "),t.store.custom_url?s("div",{staticClass:"detail-region custom-url-wrap"},[s("van-cell-group",{staticClass:"border-0px"},[t._l(t.store.custom_url,function(e){return[s("van-cell",{attrs:{title:e.title,icon:"all","is-link":"",center:!0},on:{click:function(s){return t.util.jsUrl(e.wxapp_link)}}},[s("van-icon",{attrs:{slot:"right-icon",name:"right"},slot:"right-icon"})],1)]})],2)],1):t._e(),t._v(" "),s("div",{staticClass:"detail-region"},[s("van-cell-group",{staticClass:"border-0px"},[s("van-cell",{attrs:{icon:"newshot"}},[s("div",{staticClass:"rest-text",attrs:{slot:"title"},slot:"title"},[t._v("\n\t\t\t\t\t\t配送服务：\n\t\t\t\t\t\t"),t.store.delivery_title?s("div",{staticClass:"allocation-icon"},[t._v(t._s(t.store.delivery_title))]):s("span",{staticClass:"inline"},[t._v("由 商家 ")]),t._v("\n\t\t\t\t\t\t提供配送服务\n\t\t\t\t\t")])]),t._v(" "),1!=t.hide_telephone?s("van-cell",{attrs:{title:"电话："+t.store.telephone,icon:"phone","is-link":""},on:{click:function(e){return t.util.jsUrl("tel:"+t.store.telephone)}}}):t._e(),t._v(" "),s("van-cell",{attrs:{title:"地址："+t.store.address,icon:"location","is-link":""},on:{click:function(e){return t.util.jsLocation({lat:t.store.location_x,lng:t.store.location_y,name:t.store.title,address:t.store.address})}}}),t._v(" "),s("van-cell",{attrs:{title:"营业时间："+t.store.business_hours_cn,icon:"time"}}),t._v(" "),t.store.sns?[t.store.sns.qq?s("van-cell",{attrs:{title:t.store.sns.qq,icon:"qq","is-link":""},on:{click:function(e){return t.util.jsUrl("http://wpa.qq.com/msgrd?v=3&uin="+t.store.sns.qq+"&site=qq&menu=yes")}}}):t._e(),t._v(" "),t.store.sns.weixin?s("van-cell",{attrs:{title:t.store.sns.weixin,icon:"weixin"}}):t._e()]:t._e()],2)],1),t._v(" "),t.activity.num>0?s("div",{staticClass:"detail-region"},[t._e(),t._v(" "),s("div",{staticClass:"discount-box"},t._l(t.activity.items,function(e){return s("div",{staticClass:"discount-item flex"},[s("div",{staticClass:"left"},[s("div",{staticClass:"icon-b"},[s("img",{attrs:{src:"static/img/"+e.type+"_b.png"}})])]),t._v(" "),s("div",{staticClass:"right"},[t._v(t._s(e.title))])])}),0)],1):t._e(),t._v(" "),s("router-link",{staticClass:"report",attrs:{tag:"div",to:t.util.getUrl({path:"core/pages/store/report",query:{sid:t.store.id}})}},[t._v("举报商家")])],1),t._v(" "),s("transition",{attrs:{name:"loading"}},[t.preLoading?s("iloading"):t._e()],1)],1)},staticRenderFns:[]};var c=s("VU/8")(n,l,!1,function(t){s("dnvb")},null,null);e.default=c.exports}});
//# sourceMappingURL=118.3741108cd1a4c0ac329a.js.map