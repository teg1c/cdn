{"version":3,"sources":["webpack:///src/pages/paotui/map.vue","webpack:///./src/pages/paotui/map.vue?c12f","webpack:///./src/pages/paotui/map.vue"],"names":["map","name","data","id","Number","markers","order","deliveryer","AMap","GMap","MapType","this","util","getStorage","methods","onLoad","_this","request","url","then","res","result","message","errno","$toast","status","loadmap","that","Object","google","maps","Map","document","getElementById","center","lat","parseFloat","accept_location_x","lng","accept_location_y","zoom","disableDefaultUI","bounds","_USGSOverlay","bounds_","map_","div_","setMap","memberOverlay","prototype","OverlayView","onRemove","parentNode","removeChild","onAdd","div","createElement","className","getPanes","overlayLayer","appendChild","draw","overlayProjection","getProjection","sw","fromLatLngToDivPixel","getSouthWest","ne","getNorthEast","style","left","x","top","y","LatLngBounds","LatLng","buy_location_x","buy_location_y","_USGSOverlay2","storeOverlay","USGSOverlay","deliveryerOverlay","img","src","avatar","delivery_success_location_x","delivery_success_location_y","location_x","location_y","resizeEnable","marker","Marker","position","offset","Pixel","content","panTo","push","setFitView","onRefresh","deliveryer_id","remove","onQuestion","$dialog","confirm","showCancelButton","created","$route","query","mounted","_this2","setInterval","paotui_map","render","_h","$createElement","_c","_self","attrs","staticClass","_v","tag","to","getUrl","path","on","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/254.609fa773ec09d25de3c2.js","sourcesContent":["<template>\r\n\t<div id=\"order-map\">\r\n\t\t<div id=\"map-container\" class=\"map-wrap\"></div>\r\n\t\t<router-link tag=\"div\" :to=\"util.getUrl({path: '/plugin/pages/paotui/detail', query: {id: id}})\" class=\"icons back-icon\">\r\n\t\t\t<div class=\"icon icon-arrow-left\"></div>\r\n\t\t</router-link>\r\n\t\t<div class=\"icons refresh-icon\" @click=\"onRefresh\">\r\n\t\t\t<div class=\"icon icon-refresh\"></div>\r\n\t\t</div>\r\n\t\t<div class=\"icons question-icon\" @click=\"onQuestion\">\r\n\t\t\t<div class=\"icon icon-question font-20\"></div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {Amap} from '@/config/AMap'\r\n\timport {GMap} from '@/config/GMap';\r\n\texport default {\r\n\t\tname: \"orderMap\",\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tid: Number,\r\n\t\t\t\tmarkers: [],\r\n\t\t\t\torder: {},\r\n\t\t\t\tdeliveryer: {},\r\n\t\t\t\tAMap: {},\r\n\t\t\t\tGMap: {},\r\n\t\t\t\tMapType: this.util.getStorage('MapType')\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tonLoad() {\r\n\t\t\t\tthis.util.request({\r\n\t\t\t\t\turl: 'errander/order/location',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tid: this.id\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tvar result = res.data.message;\r\n\t\t\t\t\tif(result.errno) {\r\n\t\t\t\t\t\tthis.util.$toast(result.message);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.order = result.message.order;\r\n\t\t\t\t\tthis.deliveryer = result.message.deliveryer;\r\n\t\t\t\t\tif(this.order.status == 3) {\r\n\t\t\t\t\t\tthis.util.$toast('订单已完成！');\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.loadmap();\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tloadmap(){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tif(that.MapType == 'google') {\r\n\t\t\t\t\tthat.GMap = GMap();\r\n\t\t\t\t\tthat.GMap.then(function(google) {\r\n\t\t\t\t\t\tthat.map = new google.maps.Map(document.getElementById('map-container'), {\r\n\t\t\t\t\t\t\tcenter: {\r\n\t\t\t\t\t\t\t\tlat: parseFloat(that.order.accept_location_x),\r\n\t\t\t\t\t\t\t\tlng: parseFloat(that.order.accept_location_y)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tzoom: 10,\r\n\t\t\t\t\t\t\tdisableDefaultUI: true  //禁用默认UI\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvar bounds = {};\r\n\t\t\t\t\t\t//收货位置\r\n\t\t\t\t\t\tif (that.order.accept_location_y && that.order.accept_location_x) {\r\n\t\t\t\t\t\t\tif (that.memberOverlay) {\r\n\t\t\t\t\t\t\t\tthat.memberOverlay.setMap(null);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tUSGSOverlay.prototype = new google.maps.OverlayView();\r\n\r\n\t\t\t\t\t\t\tfunction USGSOverlay(bounds, map) {\r\n\t\t\t\t\t\t\t\tthis.bounds_ = bounds;\r\n\t\t\t\t\t\t\t\tthis.map_ = map;\r\n\t\t\t\t\t\t\t\tthis.div_ = null;\r\n\t\t\t\t\t\t\t\tthis.setMap(map);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tUSGSOverlay.prototype.onRemove = function () {\r\n\t\t\t\t\t\t\t\tthis.div_.parentNode.removeChild(this.div_);\r\n\t\t\t\t\t\t\t\tthis.div_ = null;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tUSGSOverlay.prototype.onAdd = function () {\r\n\t\t\t\t\t\t\t\tvar div = document.createElement('div');\r\n\t\t\t\t\t\t\t\tdiv.className = 'marker-mine-route';\r\n\t\t\t\t\t\t\t\tthis.div_ = div;\r\n\t\t\t\t\t\t\t\tvar panes = this.getPanes();\r\n\t\t\t\t\t\t\t\tpanes.overlayLayer.appendChild(div);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tUSGSOverlay.prototype.draw = function () {\r\n\t\t\t\t\t\t\t\tvar overlayProjection = this.getProjection();\r\n\t\t\t\t\t\t\t\tvar sw = overlayProjection.fromLatLngToDivPixel(this.bounds_.getSouthWest());\r\n\t\t\t\t\t\t\t\tvar ne = overlayProjection.fromLatLngToDivPixel(this.bounds_.getNorthEast());\r\n\t\t\t\t\t\t\t\tvar div = this.div_;\r\n\t\t\t\t\t\t\t\tdiv.style.left = sw.x - 35 + 'px';\r\n\t\t\t\t\t\t\t\tdiv.style.top = ne.y - 35 + 'px';\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tbounds = new google.maps.LatLngBounds(\r\n\t\t\t\t\t\t\t\tnew google.maps.LatLng(parseFloat(that.order.accept_location_x), parseFloat(that.order.accept_location_y))\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tthat.memberOverlay = new USGSOverlay(bounds, that.map);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//取货地址\r\n\t\t\t\t\t\tif (that.order.buy_location_x && that.order.buy_location_y) {\r\n\t\t\t\t\t\t\tif (that.storeOverlay) {\r\n\t\t\t\t\t\t\t\tthat.storeOverlay.setMap(null);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tUSGSOverlay.prototype = new google.maps.OverlayView();\r\n\r\n\t\t\t\t\t\t\tfunction USGSOverlay(bounds, map) {\r\n\t\t\t\t\t\t\t\tthis.bounds_ = bounds;\r\n\t\t\t\t\t\t\t\tthis.map_ = map;\r\n\t\t\t\t\t\t\t\tthis.div_ = null;\r\n\t\t\t\t\t\t\t\tthis.setMap(map);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tUSGSOverlay.prototype.onRemove = function () {\r\n\t\t\t\t\t\t\t\tthis.div_.parentNode.removeChild(this.div_);\r\n\t\t\t\t\t\t\t\tthis.div_ = null;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tUSGSOverlay.prototype.onAdd = function () {\r\n\t\t\t\t\t\t\t\tvar div = document.createElement('div');\r\n\t\t\t\t\t\t\t\tdiv.className = 'marker-start-route';\r\n\t\t\t\t\t\t\t\tthis.div_ = div;\r\n\t\t\t\t\t\t\t\tvar panes = this.getPanes();\r\n\t\t\t\t\t\t\t\tpanes.overlayLayer.appendChild(div);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tUSGSOverlay.prototype.draw = function () {\r\n\t\t\t\t\t\t\t\tvar overlayProjection = this.getProjection();\r\n\t\t\t\t\t\t\t\tvar sw = overlayProjection.fromLatLngToDivPixel(this.bounds_.getSouthWest());\r\n\t\t\t\t\t\t\t\tvar ne = overlayProjection.fromLatLngToDivPixel(this.bounds_.getNorthEast());\r\n\t\t\t\t\t\t\t\tvar div = this.div_;\r\n\t\t\t\t\t\t\t\tdiv.style.left = sw.x - 23 + 'px';\r\n\t\t\t\t\t\t\t\tdiv.style.top = ne.y - 140 + 'px';\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tbounds = new google.maps.LatLngBounds(\r\n\t\t\t\t\t\t\t\tnew google.maps.LatLng(parseFloat(that.order.buy_location_x), parseFloat(that.order.buy_location_y))\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tthat.storeOverlay = new USGSOverlay(bounds, that.map);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// 配送员位置\r\n\t\t\t\t\t\tif(that.deliveryerOverlay) {\r\n\t\t\t\t\t\t\tthat.deliveryerOverlay.setMap(null);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tUSGSOverlay.prototype = new google.maps.OverlayView();\r\n\r\n\t\t\t\t\t\tfunction USGSOverlay(bounds, map) {\r\n\t\t\t\t\t\t\tthis.bounds_ = bounds;\r\n\t\t\t\t\t\t\tthis.map_ = map;\r\n\t\t\t\t\t\t\tthis.div_ = null;\r\n\t\t\t\t\t\t\tthis.setMap(map);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tUSGSOverlay.prototype.onRemove = function () {\r\n\t\t\t\t\t\t\tthis.div_.parentNode.removeChild(this.div_);\r\n\t\t\t\t\t\t\tthis.div_ = null;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tUSGSOverlay.prototype.onAdd = function () {\r\n\t\t\t\t\t\t\tvar div = document.createElement('div');\r\n\t\t\t\t\t\t\tdiv.className = 'marker-deliveyer-route';\r\n\t\t\t\t\t\t\tvar img = document.createElement('img');\r\n\t\t\t\t\t\t\timg.src = that.deliveryer.avatar;\r\n\t\t\t\t\t\t\tdiv.appendChild(img);\r\n\t\t\t\t\t\t\tthis.div_ = div;\r\n\t\t\t\t\t\t\tvar panes = this.getPanes();\r\n\t\t\t\t\t\t\tpanes.overlayLayer.appendChild(div);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tUSGSOverlay.prototype.draw = function () {\r\n\t\t\t\t\t\t\tvar overlayProjection = this.getProjection();\r\n\t\t\t\t\t\t\tvar sw = overlayProjection.fromLatLngToDivPixel(this.bounds_.getSouthWest());\r\n\t\t\t\t\t\t\tvar ne = overlayProjection.fromLatLngToDivPixel(this.bounds_.getNorthEast());\r\n\t\t\t\t\t\t\tvar div = this.div_;\r\n\t\t\t\t\t\t\tdiv.style.left = sw.x - 26 + 'px';\r\n\t\t\t\t\t\t\tdiv.style.top = ne.y - 220 + 'px';\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (that.order.status == 3) {\r\n\t\t\t\t\t\t\tbounds = new google.maps.LatLngBounds(\r\n\t\t\t\t\t\t\t\tnew google.maps.LatLng(parseFloat(that.order.delivery_success_location_x), parseFloat(that.order.delivery_success_location_y))\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbounds = new google.maps.LatLngBounds(\r\n\t\t\t\t\t\t\t\tnew google.maps.LatLng(parseFloat(that.deliveryer.location_x), parseFloat(that.deliveryer.location_y))\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.deliveryerOverlay = new USGSOverlay(bounds, that.map);\r\n\t\t\t\t\t})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthat.AMap = Amap();\r\n\t\t\t\t\tthat.AMap.then(function (AMap) {\r\n\t\t\t\t\t\tthat.map = new AMap.Map('map-container', {\r\n\t\t\t\t\t\t\tresizeEnable: true,\r\n\t\t\t\t\t\t\tcenter: [that.order.accept_location_y, that.order.accept_location_x],\r\n\t\t\t\t\t\t\tzoom: 10\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t//收货位置\r\n\t\t\t\t\t\tvar marker = new AMap.Marker({\r\n\t\t\t\t\t\t\tposition: [that.order.accept_location_y, that.order.accept_location_x],\r\n\t\t\t\t\t\t\toffset: new AMap.Pixel(-35, -35),\r\n\t\t\t\t\t\t\tcontent: '<div class=\"marker-mine-route\"></div>'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tmarker.setMap(that.map);\r\n\r\n\t\t\t\t\t\t//取货地址\r\n\t\t\t\t\t\tif (that.order.buy_location_x && that.order.buy_location_y) {\r\n\t\t\t\t\t\t\tvar marker = new AMap.Marker({\r\n\t\t\t\t\t\t\t\tposition: [that.order.buy_location_y, that.order.buy_location_x],\r\n\t\t\t\t\t\t\t\toffset: new AMap.Pixel(-23, -74),\r\n\t\t\t\t\t\t\t\tcontent: '<div class=\"marker-start-route\"></div>'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tmarker.setMap(that.map);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//配送员位置\r\n\t\t\t\t\t\tif (that.order.status == 3) {\r\n\t\t\t\t\t\t\tthat.map.panTo([that.order.delivery_success_location_y, that.order.delivery_success_location_x]);\r\n\t\t\t\t\t\t\tvar avatar = that.deliveryer.avatar;\r\n\t\t\t\t\t\t\tvar marker = new AMap.Marker({\r\n\t\t\t\t\t\t\t\tposition: [that.order.delivery_success_location_y, that.order.delivery_success_location_x],\r\n\t\t\t\t\t\t\t\toffset: new AMap.Pixel(-26, -80),\r\n\t\t\t\t\t\t\t\tcontent: '<div class=\"marker-deliveyer-route\"><img src=' + avatar + ' alt=\"\"/></div>'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tmarker.setMap(that.map);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat.map.panTo([that.deliveryer.location_y, that.deliveryer.location_x]);\r\n\t\t\t\t\t\t\tvar avatar = that.deliveryer.avatar;\r\n\t\t\t\t\t\t\tvar marker = new AMap.Marker({\r\n\t\t\t\t\t\t\t\tposition: [that.deliveryer.location_y, that.deliveryer.location_x],\r\n\t\t\t\t\t\t\t\toffset: new AMap.Pixel(-26, -80),\r\n\t\t\t\t\t\t\t\tcontent: '<div class=\"marker-deliveyer-route\"><img src=' + avatar + ' alt=\"\"/></div>'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tmarker.setMap(that.map);\r\n\t\t\t\t\t\t\tthat.markers.push(marker);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.map.setFitView();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonRefresh() {\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tif(that.order.status == 3){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tthat.util.request({\r\n\t\t\t\t\turl: 'system/common/deliveryer/location',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tid: that.order.deliveryer_id\r\n\t\t\t\t\t}\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tvar result = res.data.message;\r\n\t\t\t\t\tif(result.errno) {\r\n\t\t\t\t\t\tthat.util.$toast(result.message);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar deliveryer = result.message;\r\n\t\t\t\t\tif(that.MapType == 'google') {\r\n\t\t\t\t\t\tthat.GMap.then(function(google) {\r\n\t\t\t\t\t\t\tif(that.deliveryerOverlay) {\r\n\t\t\t\t\t\t\t\tthat.deliveryerOverlay.setMap(null);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tUSGSOverlay.prototype = new google.maps.OverlayView();\r\n\t\t\t\t\t\t\tfunction USGSOverlay(bounds, map) {\r\n\t\t\t\t\t\t\t\tthis.bounds_ = bounds;\r\n\t\t\t\t\t\t\t\tthis.map_ = map;\r\n\t\t\t\t\t\t\t\tthis.div_ = null;\r\n\t\t\t\t\t\t\t\tthis.setMap(map);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tUSGSOverlay.prototype.onRemove = function() {\r\n\t\t\t\t\t\t\t\tthis.div_.parentNode.removeChild(this.div_);\r\n\t\t\t\t\t\t\t\tthis.div_ = null;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tUSGSOverlay.prototype.onAdd = function() {\r\n\t\t\t\t\t\t\t\tvar div = document.createElement('div');\r\n\t\t\t\t\t\t\t\tdiv.className = 'marker-deliveyer-route';\r\n\t\t\t\t\t\t\t\tvar img = document.createElement('img');\r\n\t\t\t\t\t\t\t\timg.src = deliveryer.avatar;\r\n\t\t\t\t\t\t\t\tdiv.appendChild(img);\r\n\t\t\t\t\t\t\t\tthis.div_ = div;\r\n\t\t\t\t\t\t\t\tvar panes = this.getPanes();\r\n\t\t\t\t\t\t\t\tpanes.overlayLayer.appendChild(div);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tUSGSOverlay.prototype.draw = function() {\r\n\t\t\t\t\t\t\t\tvar overlayProjection = this.getProjection();\r\n\t\t\t\t\t\t\t\tvar sw = overlayProjection.fromLatLngToDivPixel(this.bounds_.getSouthWest());\r\n\t\t\t\t\t\t\t\tvar ne = overlayProjection.fromLatLngToDivPixel(this.bounds_.getNorthEast());\r\n\t\t\t\t\t\t\t\tvar div = this.div_;\r\n\t\t\t\t\t\t\t\tdiv.style.left = sw.x -26 + 'px';\r\n\t\t\t\t\t\t\t\tdiv.style.top = ne.y - 220 + 'px';\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tvar bounds = new google.maps.LatLngBounds(\r\n\t\t\t\t\t\t\t\tnew google.maps.LatLng(parseFloat(deliveryer.location_x), parseFloat(deliveryer.location_y))\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tthat.deliveryerOverlay = new USGSOverlay(bounds, that.map);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.AMap.then(function (AMap) {\r\n\t\t\t\t\t\t\tvar marker = new AMap.Marker({\r\n\t\t\t\t\t\t\t\tposition: [deliveryer.location_y, deliveryer.location_x],\r\n\t\t\t\t\t\t\t\toffset: new AMap.Pixel(-26, -80),\r\n\t\t\t\t\t\t\t\tcontent: '<div class=\"marker-deliveyer-route\"><img src=\"' + deliveryer.avatar + '\" alt=\"\"/></div>'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthat.map.remove(that.markers);\r\n\t\t\t\t\t\t\tmarker.setMap(that.map);\r\n\t\t\t\t\t\t\tthat.markers.push(marker);\r\n\t\t\t\t\t\t\tthat.map.setFitView();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonQuestion() {\r\n\t\t\t\tthis.$dialog.confirm({\r\n\t\t\t\t\tmessage: '要获取最新位置，请点击刷新按钮；如果配送员远离您，那可能是正在为更早下单的用户配送，请耐心等待~',\r\n\t\t\t\t\tshowCancelButton: false\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tif(this.$route.query.id) {\r\n\t\t\t\tthis.id = this.$route.query.id\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.onLoad();\r\n\t\t\tsetInterval(() => {\r\n\t\t\t\tthis.onRefresh();\r\n\t\t\t}, 30000)\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t#order-map{\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t}\r\n\t#order-map #map-container{\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\t#order-map .icons{\r\n\t\tposition: absolute;\r\n\t\tz-index: 100;\r\n\t\theight: 36px;\r\n\t\twidth: 36px;\r\n\t\ttext-align: center;\r\n\t\tline-height: 36px;\r\n\t\tborder-radius: 100%;\r\n\t\tbackground: #9b9a96;\r\n\t\topacity: 0.8;\r\n\t\tcolor: #FFF;\r\n\t}\r\n\t#order-map .back-icon{\r\n\t\ttop: 15px;\r\n\t\tleft: 15px;\r\n\t}\r\n\t#order-map .refresh-icon{\r\n\t\ttop: 15px;\r\n\t\tright: 15px;\r\n\t}\r\n\t#order-map .question-icon{\r\n\t\tbottom: 15px;\r\n\t\tright: 15px;\r\n\t}\r\n\t#order-map .map-wrap .marker-deliveyer-route{\r\n\t\tposition: relative; \r\n\t\twidth: 52px; \r\n\t\theight: 80px; \r\n\t\tcolor: #e90000; \r\n\t\tbackground: url(../../../static/img/map-location.png) no-repeat 0 0;\r\n\t\tcursor: pointer;\r\n\t}\r\n\t#order-map .map-wrap .marker-deliveyer-route img{\r\n\t\tposition:absolute; \r\n\t\ttop: 5px; \r\n\t\tright: 5px; \r\n\t\twidth: 42px; \r\n\t\theight: 42px; \r\n\t\tborder-radius: 100%;\r\n\t}\r\n\t#order-map .map-wrap .marker-start-head-route {\r\n\t\tposition: relative;\r\n\t\twidth: 70px;\r\n\t\theight: 70px;\r\n\t\tcolor: #e90000;\r\n\t\tbackground: url(../../../static/img/map-start-head.png) no-repeat 0 0;\r\n\t\tbackground-size: cover;\r\n\t\tcursor: pointer;\r\n\t}\r\n\t#order-map .map-wrap .marker-start-head-route img {\r\n\t\tposition: absolute;\r\n\t\ttop: 12px;\r\n\t\tright: 12px;\r\n\t\twidth: 46px;\r\n\t\theight: 46px;\r\n\t\tborder-radius: 100%\r\n\t}\r\n\t#order-map .map-wrap .marker-mine-route {\r\n\t\tposition: relative;\r\n\t\twidth: 70px;\r\n\t\theight: 70px;\r\n\t\tcolor: #e90000;\r\n\t\tbackground: url(../../../static/img/map-lbs.png) no-repeat 0 0;\r\n\t\tbackground-size: cover;\r\n\t\tcursor: pointer;\r\n\t}\r\n\t#order-map .map-wrap .marker-mine-route img {\r\n\t\tposition: absolute;\r\n\t\ttop: 12px;\r\n\t\tright: 12px;\r\n\t\twidth: 46px;\r\n\t\theight: 46px;\r\n\t\tborder-radius: 100%\r\n\t}\r\n\t#order-map .map-wrap .marker-start-route {\r\n\t\tposition: relative;\r\n\t\twidth: 54px;\r\n\t\theight: 74px;\r\n\t\tbackground: url(../../../static/img/map-start.png) no-repeat 0 0;\r\n\t\tbackground-size: cover;\r\n\t\tcursor: pointer;\r\n\t}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/paotui/map.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"order-map\"}},[_c('div',{staticClass:\"map-wrap\",attrs:{\"id\":\"map-container\"}}),_vm._v(\" \"),_c('router-link',{staticClass:\"icons back-icon\",attrs:{\"tag\":\"div\",\"to\":_vm.util.getUrl({path: '/plugin/pages/paotui/detail', query: {id: _vm.id}})}},[_c('div',{staticClass:\"icon icon-arrow-left\"})]),_vm._v(\" \"),_c('div',{staticClass:\"icons refresh-icon\",on:{\"click\":_vm.onRefresh}},[_c('div',{staticClass:\"icon icon-refresh\"})]),_vm._v(\" \"),_c('div',{staticClass:\"icons question-icon\",on:{\"click\":_vm.onQuestion}},[_c('div',{staticClass:\"icon icon-question font-20\"})])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-102d5f05\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/paotui/map.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-102d5f05\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./map.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./map.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./map.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-102d5f05\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./map.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/paotui/map.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}