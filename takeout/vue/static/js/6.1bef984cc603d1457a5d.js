webpackJsonp([6],{"8SHr":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Gu7T"),i=a.n(s),o=a("Dd8w"),r=a.n(o),n=a("Yo4o"),c=a("nIsk"),l=a("NYxO"),d=a("Cz8s"),p=a("mzkE"),u={name:"paotuiGuide",components:{PublicHeader:d.a,PublicFooter:p.a},data:function(){return{home_setting:"",showPreLoading:!0,menufooter:{},note:"",inputStatus:!1,title:"跑腿",homepage:{},home:{},categorys:[],orders:[],delivery_num:0,config:{},deliveryers:[],superRedpacketData:{errno:0,message:{page:{},redpackets:[]}},showRedpacket:!1,MapType:this.util.getStorage("MapType")||"gaode",deliveryerOverlayArr:[],getLocationStatus:!0,failedTips:{type:"location",tips:"获取定位失败!您可以选择手动搜索地址",btnText:"手动搜索地址",link:"/pages/home/location"}}},computed:r()({},Object(l.c)(["erranderExtra"])),methods:r()({},Object(l.b)(["setState"]),{onLoad:function(){var t=this;this.util.request({url:"errander/guide/index",data:{forceLocation:1,menufooter:1}}).then(function(e){t.showPreLoading=!1;var a=e.data.message;return-1==a.errno?(t.util.$toast(a.message,"",1e3),!1):-2==a.errno?(t.getLocationStatus=!1,t.failedTips.tips=a.message,!1):(a=a.message,t.home_setting=a.home_setting,t.home_setting&&"index"!=t.home_setting?"diy"==t.home_setting&&(t.homepage=a.homepage,t.home=t.homepage.data,t.delivery_num=t.homepage.delivery_num,t.superRedpacketData=t.util.extend(t.superRedpacketData,a.superRedpacketData),t.superRedpacketData.message.redpackets&&t.superRedpacketData.message.redpackets.length>0&&(t.showRedpacket=!0),t.home&&t.home.page&&t.home.page.title&&(t.title=t.home.page.title,t.util.setWXTitle(t.title))):(t.categorys=[].concat(i()(a.categorys)),t.orders=[].concat(i()(a.orders)),t.delivery_num=a.delivery_num,t.config=a.config,t.deliveryers=a.deliveryers,t.superRedpacketData=t.util.extend(t.superRedpacketData,a.superRedpacketData),t.superRedpacketData.message.redpackets&&t.superRedpacketData.message.redpackets.length>0&&(t.showRedpacket=!0),t.menufooter=window.menufooter,t.loadmap()),void(t.menufooter=window.menufooter))}).catch(function(e){"fail"==window.forceGetLocationStatus&&(t.showPreLoading=!1,t.getLocationStatus=!1)})},onCloseRedpacket:function(){this.showRedpacket=!1},onChangeInputStatus:function(){this.inputStatus=!0},onSubmit:function(t){this.setState({type:"erranderExtra",key:"note",val:this.note}),this.util.jsUrl(t)},loadmap:function(){var t=this;if("google"==t.MapType){var e=parseFloat(t.config.map.location_x),a=parseFloat(t.config.map.location_y);Object(c.a)().then(function(s){var i=new s.maps.Map(document.getElementById("map-container"),{center:{lat:e,lng:a},zoom:13,disableDefaultUI:!0});for(var o in t.deliveryers){var r=t.deliveryers[o];if(r.location_x&&r.location_y){var n=document.createElement("div");n.className="map-center",n.style.position="absolute";var c=document.createElement("img");c.src=r.avatar,n.appendChild(c);var l=t.deliveryerOverlay({lat:r.location_x,lng:r.location_y},n,{left:-26,top:-80},i);t.deliveryerOverlayArr.push(l)}}})}else Object(n.a)().then(function(e){var a=new e.Map("map-container",{resizeEnable:!0,zoom:11,center:[t.config.map.location_y,t.config.map.location_x]});for(var s in t.deliveryers){var i=t.deliveryers[s];if(i.location_x&&i.location_y)new e.Marker({position:[i.location_y,i.location_x],offset:new e.Pixel(-26,-80),content:'<div class="map-center"><img src="'+i.avatar+'"alt=""></div>'}).setMap(a)}a.setFitView()})},deliveryerOverlay:function(t,e,a,s){function i(t,e){this.bounds_=t,this.map_=e,this.div_=null,this.setMap(e)}return i.prototype=new google.maps.OverlayView,i.prototype.onRemove=function(){this.div_.parentNode.removeChild(this.div_),this.div_=null},i.prototype.onAdd=function(){this.div_=e,this.getPanes().overlayMouseTarget.appendChild(e)},i.prototype.draw=function(){var t=this.getProjection(),e=t.fromLatLngToDivPixel(this.bounds_.getSouthWest()),s=t.fromLatLngToDivPixel(this.bounds_.getNorthEast()),i=this.div_;i.style.left=e.x+a.left+"px",i.style.top=s.y+a.top+"px"},new i(new google.maps.LatLngBounds(new google.maps.LatLng(parseFloat(t.lat),parseFloat(t.lng))),s)}}),mounted:function(){this.onLoad()}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"paotui-guide"}},[t.isWeixin?t._e():a("public-header",{attrs:{title:t.title}}),t._v(" "),"index"!=t.home_setting&&t.home_setting?"diy"==t.home_setting?[t._l(t.home.items,function(e,s){return["guide"==e.id?[a("public-footer",{attrs:{preLoading:t.showPreLoading,menufooter:t.menufooter,failedTips:t.failedTips,showFailedTips:!t.getLocationStatus}}),t._v(" "),a("div",{staticClass:"content",style:{background:e.style.background}},[a("van-swipe",{staticClass:"swiper",attrs:{autoplay:3e3,"indicator-color":"#ff2d4b"}},t._l(e.picture,function(e,s){return a("van-swipe-item",{key:s},[a("div",{staticClass:"img-box",on:{click:function(a){return t.util.jsUrl(e.linkurl)}}},[a("img",{attrs:{src:e.imgurl,alt:""}})])])}),1),t._v(" "),a("div",{staticClass:"rider-nearby flex",style:{color:e.rider.color}},[a("img",{attrs:{src:"static/img/paotui_rider.png",alt:""}}),t._v(" "),a("span",[t._v(t._s(e.rider.text.left))]),t._v(" "),a("span",{staticClass:"num",style:{color:e.rider.num_color}},[t._v(t._s(t.delivery_num))]),t._v(" "),a("span",[t._v(t._s(e.rider.text.right))])]),t._v(" "),a("div",{staticClass:"goods-edit"},[a("div",{staticClass:"goods-input"},[t.inputStatus||t.note?a("div",{staticClass:"goods-input-content flex-lr"},[a("van-field",{staticClass:"border-0px",attrs:{type:"textarea",placeholder:e.params.placeholder},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}}),t._v(" "),a("div",{staticClass:"good-input-submit",on:{click:function(a){return t.onSubmit(e.params.submiturl)}}},[a("img",{attrs:{src:"static/img/goods_submit.png",alt:""}})])],1):a("div",{staticClass:"goods-input-placeholder",on:{click:function(e){return t.onChangeInputStatus()}}},[a("img",{attrs:{src:"static/img/edit_icon.png",alt:""}}),t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.params.placeholder)+"\n\t\t\t\t\t\t\t")])]),t._v(" "),a("van-row",{staticClass:"goods-tags",attrs:{gutter:"5"}},t._l(e.lanmu,function(e,s){return a("van-col",{key:s,attrs:{span:"6"}},[a("div",{staticClass:"tag-item ellipsis",style:{color:e.color,"background-color":e.background_color},on:{click:function(a){return t.onSubmit(e.linkurl)}}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.text)+"\n\t\t\t\t\t\t\t\t")])])}),1)],1),t._v(" "),a("div",{staticClass:"paotui-feature"},[a("div",{staticClass:"feature-title"},[t._v("\n\t\t\t\t\t\t\t跑腿特色\n\t\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"feature-list"},t._l(e.feature,function(e,s){return a("div",{key:s,staticClass:"feature-item",on:{click:function(a){return t.util.jsUrl(e.linkurl)}}},[a("div",{staticClass:"feature-item-icon",style:{"border-color":e.icon_color}},[a("span",{staticClass:"icon",class:e.icon,style:{color:e.icon_color}})]),t._v(" "),a("div",{staticClass:"feature-item-text font-13",style:{color:e.color}},[t._v(t._s(e.text))])])}),0)])],1),t._v(" "),a("router-link",{staticClass:"paotui-order",staticStyle:{display:"none"},style:{"border-color":e.order.border_color,color:e.order.color},attrs:{tag:"div",to:t.util.getUrl({path:"/plugin/pages/paotui/order"})}},[a("div",{staticClass:"icon",class:e.order.icon}),t._v(" "),a("span",{staticClass:"font-12"},[t._v(t._s(e.order.text))])])]:"redpacket"==e.id?[0==t.superRedpacketData.errno&&!t.superRedpacketData.message.type&&t.superRedpacketData.message.redpackets.length>0?[a("div",{staticClass:"dialog dialog-redpacket",class:{"dialog-show":t.showRedpacket}},[a("div",{staticClass:"dialog-mask"}),t._v(" "),a("div",{staticClass:"dialog-container"},[a("div",{staticClass:"banner",style:{"background-color":t.superRedpacketData.message.page.text.backgroundColor}},[a("img",{attrs:{src:t.superRedpacketData.message.page.image}})]),t._v(" "),a("div",{staticClass:"container",style:{"background-color":t.superRedpacketData.message.page.text.backgroundColor}},[t._l(t.superRedpacketData.message.redpackets,function(e,s){return a("div",{key:s,staticClass:"redpacket"},[a("div",{staticClass:"redpacket-info clearfix",style:{color:t.superRedpacketData.message.page.text.color}},[a("div",{staticClass:"col-75 text-left"},[a("div",{staticClass:"redpacket-title"},[t._v(t._s(e.title))])]),t._v(" "),a("div",{staticClass:"col-25 price text-right"},[t._v(t._s(t.Lang.dollarSign)),a("div",[t._v(t._s(e.discount))])])]),t._v(" "),t._m(2,!0),t._v(" "),a("div",{staticClass:"redpacket-limit clearfix flex-lr"},[a("div",{staticClass:"use-days-limit"},[t._v(t._s(e.use_days_limit_text))]),t._v(" "),a("div",{staticClass:"use-condition"},[t._v("满"+t._s(e.condition)+"可用")])])])}),t._v(" "),a("div",{staticClass:"go-home"},[a("div",{style:{"background-color":t.superRedpacketData.message.page.button.backgroundColor,color:t.superRedpacketData.message.page.button.color},on:{click:t.onCloseRedpacket}},[t._v("进入首页")])]),t._v(" "),a("div",{staticClass:"icon icon-close",on:{click:t.onCloseRedpacket}})],2)])])]:t._e()]:t._e()]})]:t._e():[a("public-footer",{attrs:{preLoading:t.showPreLoading,menufooter:t.menufooter,failedTips:t.failedTips,showFailedTips:!t.getLocationStatus}}),t._v(" "),a("div",{staticClass:"content"},[t._m(0),t._v(" "),t.orders.length>0?a("van-swipe",{staticClass:"order-swiper",attrs:{autoplay:4e3,vertical:"","show-indicators":!1}},t._l(t.orders,function(e,s){return a("van-swipe-item",{key:s},[a("router-link",{staticClass:"swiper-item flex-lr",attrs:{tag:"div",to:t.util.getUrl({path:"/plugin/pages/paotui/diy?id="+e.order_cid})}},[a("div",{staticClass:"left flex-lr"},[a("img",{attrs:{src:e.thumb,alt:""}}),t._v(" "),a("p",{staticClass:"ellipsis"},[t._v(t._s(e.anonymous_username)+"购买了"+t._s(e.goods_name))])]),t._v(" "),a("span",{staticClass:"icon icon-right"})])],1)}),1):t._e(),t._v(" "),a("div",{staticClass:"cate"},[a("p",{staticClass:"cate-title"},[t._v("\n\t\t\t\t\t平台共有 "),a("span",{staticClass:"c-danger"},[t._v(t._s(t.delivery_num))]),t._v(" 位骑士为您服务\n\t\t\t\t")]),t._v(" "),a("van-row",{staticClass:"cate-list"},t._l(t.categorys,function(e,s){return a("van-col",{key:s,attrs:{span:"6"}},[a("router-link",{staticClass:"cate-item",attrs:{tag:"div",to:t.util.getUrl({path:"/plugin/pages/paotui/diy?id="+e.id})}},[a("img",{attrs:{src:e.thumb,alt:""}}),t._v(" "),a("p",{staticClass:"ellipsis"},[t._v(t._s(e.name))])])],1)}),1)],1)],1),t._v(" "),0==t.superRedpacketData.errno&&!t.superRedpacketData.message.type&&t.superRedpacketData.message.redpackets.length>0?[a("div",{staticClass:"dialog dialog-redpacket",class:{"dialog-show":t.showRedpacket}},[a("div",{staticClass:"dialog-mask"}),t._v(" "),a("div",{staticClass:"dialog-container"},[a("div",{staticClass:"banner",style:{"background-color":t.superRedpacketData.message.page.text.backgroundColor}},[a("img",{attrs:{src:t.superRedpacketData.message.page.image}})]),t._v(" "),a("div",{staticClass:"container",style:{"background-color":t.superRedpacketData.message.page.text.backgroundColor}},[t._l(t.superRedpacketData.message.redpackets,function(e,s){return a("div",{key:s,staticClass:"redpacket"},[a("div",{staticClass:"redpacket-info clearfix",style:{color:t.superRedpacketData.message.page.text.color}},[a("div",{staticClass:"col-75 text-left"},[a("div",{staticClass:"redpacket-title"},[t._v(t._s(e.title))])]),t._v(" "),a("div",{staticClass:"col-25 price text-right"},[t._v(t._s(t.Lang.dollarSign)),a("div",[t._v(t._s(e.discount))])])]),t._v(" "),t._m(1,!0),t._v(" "),a("div",{staticClass:"redpacket-limit clearfix flex-lr"},[a("div",{staticClass:"use-days-limit"},[t._v(t._s(e.use_days_limit_text))]),t._v(" "),a("div",{staticClass:"use-condition"},[t._v("满"+t._s(e.condition)+"可用")])])])}),t._v(" "),a("div",{staticClass:"go-home"},[a("div",{style:{"background-color":t.superRedpacketData.message.page.button.backgroundColor,color:t.superRedpacketData.message.page.button.color},on:{click:t.onCloseRedpacket}},[t._v("进入首页")])]),t._v(" "),a("div",{staticClass:"icon icon-close",on:{click:t.onCloseRedpacket}})],2)])])]:t._e()]],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"map-content"},[e("div",{attrs:{id:"map-container"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"circle-container"},[e("div",{staticClass:"circle circle-left"}),this._v(" "),e("div",{staticClass:"circle circle-right"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"circle-container"},[e("div",{staticClass:"circle circle-left"}),this._v(" "),e("div",{staticClass:"circle circle-right"})])}]};var g=a("VU/8")(u,v,!1,function(t){a("o3k5")},null,null);e.default=g.exports},o3k5:function(t,e){}});
//# sourceMappingURL=6.1bef984cc603d1457a5d.js.map