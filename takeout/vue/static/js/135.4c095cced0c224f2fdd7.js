webpackJsonp([135],{YjAS:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("bOdI"),a=s.n(r),i=s("mvHQ"),o=s.n(i),d=s("woOf"),l=s.n(d),n=s("Dd8w"),c=s.n(n),p=s("NYxO"),u=s("Cz8s"),v=s("WkcG"),_={components:{PublicHeader:u.a,failedTips:v.a},data:function(){return{id:0,order_id:0,mode:"take",order:{delivery_info:{}},diy:{data:{}},basicPart:{params:{type:{title:"物品类型",desc:"请选择物品类型",icon:"icon-present",is_required:1,options:{C0123456789101:{name:"蔬菜水果"},C0123456789102:{name:"快餐食物"},C0123456789103:{name:"快递包裹"}}},source:{title:"物品来源",desc:"请选择物品来源",icon:"icon-newshot"},taketime:{title:"取件时间",desc:"立即取件",icon:"icon-time"},redpacket:{title:"红包",desc:"暂无可用红包",icon:"icon-redpacket"},tip:{title:"小费",desc:"加小费有助于更快接单",icon:"icon-moneybag",min:0,max:20,status:1},note:{title:"备注",desc:"给配送员留言",icon:"icon-form"},agreement:"",submittext:"提交订单",finalfeetext:"跑腿费",pricedetailtext:"价格明细"},style:{submit:{color:"#ffffff",background:"#ff2d4b"},finalfee:{namecolor:"#333333",pricecolor:"#ff2d4b"},distancecolor:"#333333",pricedetailcolor:"#999999"},tipsGroup:[]},tipsInfo:{selectIndex:0,value:"",input:"",inputFocus:!1,dataFrom:"select"},redPackets:[],goodsWeight:0,goodsType:"",goodsSource:"",serialSn:"",title:"商户发单",popup:{type:!1,source:!1,deliveryTime:!1,tip:!1,fee:!1,redpacket:!1},sources:{we7_wmall:{key:"we7_wmall",title:"本平台"},meituan:{key:"meituan",title:"美团"},eleme:{key:"eleme",title:"饿了么"}},isdefault:!1,storeNum:1,query:{},islegal:!1,showPreLoading:!0,failedTips:{type:"location",tips:"获取定位失败!您可以选择手动搜索地址",btnText:"手动搜索地址",link:"/pages/home/location"},getLocationStatus:!0}},computed:c()({},Object(p.c)(["erranderStoreExtra","erranderStoreSceneMode","erranderStoreSceneOrderId"])),methods:c()({},Object(p.b)(["setState","replaceState"]),{onLoad:function(){var t=this;this.mode!=this.erranderStoreSceneMode&&(this.replaceState({key:"erranderStoreExtra",val:{}}),this.replaceState({key:"erranderStoreSceneMode",val:this.mode})),this.order_id>0&&this.order_id!=this.erranderStoreSceneOrderId&&(this.replaceState({key:"erranderStoreExtra",val:{}}),this.replaceState({key:"erranderStoreSceneOrderId",val:this.order_id})),this.erranderStoreExtra.notes&&!this.erranderStoreExtra.note&&(this.erranderStoreExtra.note=this.erranderStoreExtra.notes[this.id]),this.util.request({url:"errander/storeScene/index",data:{id:this.id,mode:this.mode,extra:this.erranderStoreExtra,order_id:this.order_id,forceLocation:1}}).then(function(e){t.showPreLoading=!1;var s=e.data.message;if(0!=s.errno)return-2==s.errno?(t.util.$toast(s.message,t.util.getUrl({path:"/plugin/pages/paotui/store/order/index"}),1e3,"replace"),!1):(t.util.$toast(s.message,"",1e3),!1);(s=s.message).buyaddress&&s.buyaddress.errno&&t.util.$toast(s.buyaddress.message,"",1e3);var r=l()(t.erranderStoreExtra,{delivery_day:s.order.delivery_day,delivery_time:s.order.delivery_time,delivery_nowtime:s.order.delivery_nowtime,address_type:s.order.address_type,address_input:s.order.address_input,buyaddress_id:s.buyaddress_id,buyaddress:s.buyaddress&&!s.buyaddress.errno?s.buyaddress:{},acceptaddress_id:s.acceptaddress_id,delivery_tips:s.order.delivery_tips,extra_fee:s.order.extra_fee||{},goods_weight:s.order.goods_weight,goods_type:s.order.goods_type,goods_source:s.order.goods_source,serial_sn:s.order.serial_sn,note:s.order.note});t.replaceState({key:"erranderStoreExtra",val:r}),t.goodsType=s.order.goods_type,t.goodsSource=s.order.goods_source,t.goodsWeight=s.order.goods_weight,t.serialSn=s.order.serial_sn,t.isdefault=s.order.isdefault,t.redPackets=s.redPackets,t.buyaddress=s.buyaddress,t.acceptaddress=s.acceptaddress,t.diy=s.diy,t.id=s.diy.id,t.basicPart=t.util.extend(t.basicPart,s.basic),t.order=s.order,t.erranderStoreExtra&&t.erranderStoreExtra.note&&(t.note=t.erranderStoreExtra.note),t.erranderStoreExtra.extra_fee||(t.erranderStoreExtra.extra_fee={}),t.setState({type:"erranderStoreExtra",key:"agentid",val:s.diy.agentid}),t.storeNum=s.store_num,s.diy.data.page.title&&(t.title=s.diy.data.page.title),t.util.setWXTitle(t.title),t.islegal=!0}).catch(function(e){"fail"==window.forceGetLocationStatus&&(t.showPreLoading=!1,t.getLocationStatus=!1)})},onSubmit:function(){var t=this;if(!this.islegal)return!1;if("input"==this.erranderStoreExtra.address_type){if(!this.erranderStoreExtra.address_input.address)return this.util.$toast("请填写地址","",1500),!1;if(!this.util.isValidMobile(this.erranderStoreExtra.address_input.mobile))return this.util.$toast("联系人手机号格式不正确"),!1}else if("take"==this.mode){if(!this.buyaddress)return this.util.$toast("请选择取货地址","",1500),!1;if(!this.util.isValidMobile(this.buyaddress.mobile))return this.$toast("取货联系人手机号格式不正确"),!1}else if("send"==this.mode){if(!this.acceptaddress)return this.util.$toast("请选择收货地址",""),!1;if(!this.util.isValidMobile(this.acceptaddress.mobile))return this.$toast("收货联系人手机号格式不正确"),!1}if(1==this.basicPart.params.type.is_required&&!this.erranderStoreExtra.goods_type)return this.util.$toast("请选择物品类型","",1500),!1;this.islegal=!1,this.util.request({url:"errander/storeScene/submit",data:{id:this.id,mode:this.mode,order_id:this.order_id,extra:o()(this.erranderStoreExtra)},method:"POST"}).then(function(e){var s=e.data.message;if(s.errno)return-1e3==s.errno?t.$dialog.confirm({title:"温馨提示",message:s.message,confirmButtonText:"去充值",confirmButtonColor:"#ff2d4b"}).then(function(){t.$router.replace(t.util.getUrl({path:"/plugin/pages/paotui/store/finance/recharge"}))}).catch(function(){t.islegal=!0}):(t.islegal=!0,t.util.$toast(s.message,"",1e3)),!1;var r=s.message;return t.replaceState({key:"erranderStoreExtra",val:{}}),t.util.$toast("下单成功",t.util.getUrl({path:"/plugin/pages/paotui/store/order/detail",query:{id:r}}),1500,"replace"),!1})},onCalculate:function(){var t=this,e={is_calculate:1,extra:this.erranderStoreExtra,id:this.id,mode:this.mode};this.util.request({url:"errander/storeScene/index",data:e}).then(function(e){var s=e.data.message;if(0!=s.errno)return t.util.$toast(s.message,"",1e3),-1e3==s.errno&&(delete t.erranderStoreExtra.extra_fee[t.erranderStoreExtra.extra_fee.current.pindex][t.erranderStoreExtra.extra_fee.current.cindex],t.util.$toast(s.message,"",1e3),t.replaceState({key:"erranderStoreExtra",val:t.erranderStoreExtra}),!1);(s=s.message).buyaddress&&s.buyaddress.errno&&t.util.$toast(s.buyaddress.message,"",2e3);var r=l()(t.erranderStoreExtra,a()({delivery_nowtime:s.order.delivery_nowtime,address_type:s.order.address_type,address_input:s.order.address_input,acceptaddress_id:s.acceptaddress_id,buyaddress_id:s.buyaddress_id,buyaddress:s.buyaddress&&!s.buyaddress.errno?s.buyaddress:{},extra_fee:s.order.extra_fee,redpacket_id:s.order.redpacket_id,goods_price:s.order.goods_price,delivery_day:s.order.delivery_day,delivery_time:s.order.delivery_time,delivery_tips:s.order.delivery_tips},"buyaddress",s.buyaddress));t.basicPart=s.basic,t.diy.data.items=l()({},t.diy.data.items),t.replaceState({key:"erranderStoreExtra",val:r}),t.redPackets=s.redPackets,t.buyaddress=s.buyaddress,t.acceptaddress=s.acceptaddress,t.order=s.order,t.goodsType=s.order.goods_type,t.goodsSource=s.order.goods_source,t.goodsWeight=s.order.goods_weight,t.serialSn=s.order.serial_sn,t.isdefault=s.order.isdefault})},onChangeTypeAndWeight:function(){return this.goodsType?this.goodsWeight?(this.setState({type:"erranderStoreExtra",key:"goods_weight",val:this.goodsWeight}),this.setState({type:"erranderStoreExtra",key:"goods_type",val:this.goodsType}),this.setState({type:"erranderStoreExtra",key:"isdefault",val:this.isdefault}),this.onCalculate(),void(this.popup.type=!1)):(this.util.$toast("请设置物品重量"),!1):(this.util.$toast("请选择物品类型"),!1)},onChangeSourceAndSerialsn:function(){this.setState({type:"erranderStoreExtra",key:"goods_source",val:this.goodsSource}),this.setState({type:"erranderStoreExtra",key:"serial_sn",val:this.serialSn}),this.onCalculate(),this.popup.source=!1},onSelectOption:function(t,e){this[t]=e},onSelectDay:function(t){this.setState({type:"erranderStoreExtra",key:"delivery_day",val:t}),this.order=l()({},this.order)},onSelectTime:function(t){this.setState({type:"erranderStoreExtra",key:"delivery_time",val:t}),this.erranderStoreExtra.delivery_time=t,this.popup.deliveryTime=!1,this.onCalculate()},onToggleAddressType:function(t){this.setState({type:"erranderStoreExtra",key:"address_type",val:t}),this.erranderStoreExtra.address_type=t,this.onCalculate()},onChangeTip:function(){var t=0;t="input"==this.tipsInfo.dataFrom?parseFloat(this.tipsInfo.input):parseFloat(this.basicPart.tipsGroup[this.tipsInfo.selectIndex]);var e=this.basicPart.params.tip.min,s=this.basicPart.params.tip.max;if(isNaN(t)||t<e||t>s)return this.util.$toast("小费最低"+e+this.Lang.dollarSignCn+", 最高"+s+this.Lang.dollarSignCn),!1;this.setState({type:"erranderStoreExtra",key:"delivery_tips",val:t}),this.onCalculate(),this.popup.tip=!1},onSelectTips:function(t,e){this.tipsInfo.inputFocus=!1,this.tipsInfo.dataFrom="select",this.tipsInfo.value=t,this.tipsInfo.selectIndex=e},onTipsInputFocus:function(){this.tipsInfo.inputFocus=!0,this.tipsInfo.dataFrom="input",this.tipsInfo.value=this.basicPart.tipsGroup[0],this.tipsInfo.selectIndex=0},onBlur:function(){window.scroll(0,0)},onFocus:function(){setTimeout(function(){document.getElementsByClassName("popup-tip")[0].scrollIntoView()},700)},onTogglePopup:function(t){this.popup[t]=!this.popup[t]}}),watch:{},created:function(){var t=this.util.parseQuery(this.$route.query);this.query=t,this.id=t.id,this.mode=t.mode,this.order_id=t.order_id},mounted:function(){this.onLoad()}},y={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"estore-diy"}},[s("public-header",{attrs:{title:t.title}}),t._v(" "),s("div",{staticClass:"content font-14"},[t._l(t.diy.data.items,function(e,r){return["basic"==e.id?[s("div",{staticClass:"address"},["send"==t.mode?[t.storeNum>1?[s("div",{staticClass:"address-item van-hairline--bottom",on:{click:function(e){return t.util.jsUrl("/plugin/pages/paotui/store/shop/select",t.query)}}},[s("div",{staticClass:"left"},[s("div",{staticClass:"mark",style:{color:e.style.from.color,background:e.style.from.background}},[t._v("发")])]),t._v(" "),s("i",{staticClass:"icon icon-right"}),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"title",style:{color:e.style.address.titlecolor}},[t._v(t._s(t.buyaddress.title))]),t._v(" "),s("div",{staticClass:"desc margin-10-t",style:{color:e.style.address.desccolor}},[t._v(t._s(t.buyaddress.address))]),t._v(" "),s("div",{staticClass:"relation margin-10-t",style:{color:e.style.address.titlecolor}},[t._v(t._s(t.buyaddress.telephone))])])])]:[s("div",{staticClass:"address-item van-hairline--bottom"},[s("div",{staticClass:"left"},[s("div",{staticClass:"mark",style:{color:e.style.from.color,background:e.style.from.background}},[t._v("发")])]),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"title",style:{color:e.style.address.titlecolor}},[t._v(t._s(t.buyaddress.title))]),t._v(" "),s("div",{staticClass:"desc margin-10-t",style:{color:e.style.address.desccolor}},[t._v(t._s(t.buyaddress.address))]),t._v(" "),s("div",{staticClass:"relation margin-10-t",style:{color:e.style.address.titlecolor}},[t._v(t._s(t.buyaddress.telephone))])])])],t._v(" "),s("div",{staticClass:"address-item"},[s("div",{staticClass:"left"},[s("div",{staticClass:"mark",style:{color:e.style.to.color,background:e.style.to.background}},[t._v("收")])]),t._v(" "),s("div",{staticClass:"right"},["both"==e.params.address.type?s("div",{staticClass:"address-type margin-15-b"},[s("div",{class:{"type-item":1,active:"select"==t.erranderStoreExtra.address_type},on:{click:function(e){return t.onToggleAddressType("select")}}},[t._v("从已有地址选择")]),t._v(" "),s("div",{class:{"type-item":1,active:"input"==t.erranderStoreExtra.address_type},on:{click:function(e){return t.onToggleAddressType("input")}}},[t._v("手动填写")])]):t._e(),t._v(" "),"select"==t.erranderStoreExtra.address_type?[t.acceptaddress&&t.acceptaddress.address?s("div",{staticClass:"flex-lr",on:{click:function(e){return t.util.jsUrl("/pages/member/address",{channel:"errander",input:"accept",erranderId:t.id,mode:t.mode},"replace")}}},[s("div",[s("div",{staticClass:"title",style:{color:e.style.address.titlecolor}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(t.acceptaddress.address)+"-"+t._s(t.acceptaddress.number)+"\n\t\t\t\t\t\t\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"desc margin-10-t",style:{color:e.style.address.desccolor}},[s("span",[t._v(t._s(t.acceptaddress.realname))]),t._v(" "),s("span",[t._v(t._s(t.acceptaddress.sex))]),t._v(" "),s("span",[t._v(t._s(t.acceptaddress.mobile))])])]),t._v(" "),s("div",{staticClass:"icon icon-arrow-right c-gray font-12"})]):[s("div",{staticClass:"flex-lr",on:{click:function(e){return t.util.jsUrl("/pages/member/address",{channel:"errander",input:"accept",erranderId:t.id,mode:t.mode},"replace")}}},[s("div",{staticClass:"desc c-gray"},[t._v("选择收件地址")]),t._v(" "),s("div",{staticClass:"icon icon-arrow-right c-gray font-12"})])]]:[s("div",{staticClass:"inputs"},[s("div",{staticClass:"flex-lr padding-15-b van-hairline--bottom"},[s("div",{staticClass:"realname"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.erranderStoreExtra.address_input.realname,expression:"erranderStoreExtra.address_input.realname"}],attrs:{type:"text",placeholder:"姓名"},domProps:{value:t.erranderStoreExtra.address_input.realname},on:{input:function(e){e.target.composing||t.$set(t.erranderStoreExtra.address_input,"realname",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"mobile van-hairline--left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.erranderStoreExtra.address_input.mobile,expression:"erranderStoreExtra.address_input.mobile"}],attrs:{type:"text",placeholder:"手机号"},domProps:{value:t.erranderStoreExtra.address_input.mobile},on:{input:function(e){e.target.composing||t.$set(t.erranderStoreExtra.address_input,"mobile",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"flex-lr padding-15-tb van-hairline--bottom",on:{click:function(e){return t.util.jsUrl("/pages/member/addressLocation",{channel:"erranderStoreInput",mode:t.mode})}}},[t.erranderStoreExtra.address_input.address?s("div",[t._v(t._s(t.erranderStoreExtra.address_input.address))]):s("div",{staticClass:"c-gray"},[t._v("选择小区或办公楼名称")]),t._v(" "),s("div",{staticClass:"icon icon-arrow-right c-gray font-12"})]),t._v(" "),s("div",{staticClass:"flex-lr padding-15-t"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.erranderStoreExtra.address_input.number,expression:"erranderStoreExtra.address_input.number"}],attrs:{type:"text",placeholder:"输入楼层或门牌号"},domProps:{value:t.erranderStoreExtra.address_input.number},on:{input:function(e){e.target.composing||t.$set(t.erranderStoreExtra.address_input,"number",e.target.value)}}})])])]],2)])]:"take"==t.mode?[s("div",{staticClass:"address-item van-hairline--bottom"},[s("div",{staticClass:"left"},[s("div",{staticClass:"mark",style:{color:e.style.from.color,background:e.style.from.background}},[t._v("发")])]),t._v(" "),s("div",{staticClass:"right"},["both"==e.params.address.type?s("div",{staticClass:"address-type margin-15-b"},[s("div",{class:{"type-item":1,active:"select"==t.erranderStoreExtra.address_type},on:{click:function(e){return t.onToggleAddressType("select")}}},[t._v("从已有地址选择")]),t._v(" "),s("div",{class:{"type-item":1,active:"input"==t.erranderStoreExtra.address_type},on:{click:function(e){return t.onToggleAddressType("input")}}},[t._v("手动填写")])]):t._e(),t._v(" "),"select"==t.erranderStoreExtra.address_type?[t.buyaddress&&t.buyaddress.address?[s("div",{staticClass:"flex-lr",on:{click:function(e){return t.util.jsUrl("/pages/member/address",{channel:"errander",input:"buy",erranderId:t.id,mode:t.mode},"replace")}}},[s("div",[s("div",{staticClass:"title",style:{color:e.style.address.titlecolor}},[t._v(t._s(t.buyaddress.address)+"-"+t._s(t.buyaddress.number))]),t._v(" "),s("div",{staticClass:"desc margin-10-t",style:{color:e.style.address.desccolor}},[s("span",[t._v(t._s(t.buyaddress.realname))]),t._v(" "),s("span",[t._v(t._s(t.buyaddress.sex))]),t._v(" "),s("span",[t._v(t._s(t.buyaddress.mobile))])])]),t._v(" "),s("div",{staticClass:"icon icon-arrow-right c-gray font-12"})])]:[s("div",{staticClass:"flex-lr",on:{click:function(e){return t.util.jsUrl("/pages/member/address",{channel:"errander",input:"buy",erranderId:t.id,mode:t.mode},"replace")}}},[s("div",{staticClass:"desc c-gray"},[t._v("选择取件地址")]),t._v(" "),s("div",{staticClass:"icon icon-arrow-right c-gray font-12"})])]]:[s("div",{staticClass:"inputs"},[s("div",{staticClass:"flex-lr padding-15-b van-hairline--bottom"},[s("div",{staticClass:"realname"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.erranderStoreExtra.address_input.realname,expression:"erranderStoreExtra.address_input.realname"}],attrs:{type:"text",placeholder:"姓名"},domProps:{value:t.erranderStoreExtra.address_input.realname},on:{input:function(e){e.target.composing||t.$set(t.erranderStoreExtra.address_input,"realname",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"mobile van-hairline--left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.erranderStoreExtra.address_input.mobile,expression:"erranderStoreExtra.address_input.mobile"}],attrs:{type:"text",placeholder:"手机号"},domProps:{value:t.erranderStoreExtra.address_input.mobile},on:{input:function(e){e.target.composing||t.$set(t.erranderStoreExtra.address_input,"mobile",e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"flex-lr padding-15-tb van-hairline--bottom",on:{click:function(e){return t.util.jsUrl("/pages/member/addressLocation",{channel:"erranderStoreInput",mode:t.mode})}}},[t.erranderStoreExtra.address_input.address?s("div",[t._v(t._s(t.erranderStoreExtra.address_input.address))]):s("div",{staticClass:"c-gray"},[t._v("选择小区或办公楼名称")]),t._v(" "),s("div",{staticClass:"icon icon-arrow-right c-gray font-12"})]),t._v(" "),s("div",{staticClass:"flex-lr padding-15-t"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.erranderStoreExtra.address_input.number,expression:"erranderStoreExtra.address_input.number"}],attrs:{type:"text",placeholder:"输入楼层或门牌号"},domProps:{value:t.erranderStoreExtra.address_input.number},on:{input:function(e){e.target.composing||t.$set(t.erranderStoreExtra.address_input,"number",e.target.value)}}})])])]],2)]),t._v(" "),t.storeNum>1?[s("div",{staticClass:"address-item",on:{click:function(e){return t.util.jsUrl("/plugin/pages/paotui/store/shop/select",t.query)}}},[s("div",{staticClass:"left"},[s("div",{staticClass:"mark",style:{color:e.style.to.color,background:e.style.to.background}},[t._v("收")])]),t._v(" "),s("i",{staticClass:"icon icon-right"}),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"title",style:{color:e.style.address.titlecolor}},[t._v(t._s(t.acceptaddress.title))]),t._v(" "),s("div",{staticClass:"desc margin-10-t",style:{color:e.style.address.desccolor}},[t._v(t._s(t.acceptaddress.address))]),t._v(" "),s("div",{staticClass:"relation margin-10-t",style:{color:e.style.address.titlecolor}},[t._v(t._s(t.acceptaddress.telephone))])])])]:[s("div",{staticClass:"address-item"},[s("div",{staticClass:"left"},[s("div",{staticClass:"mark",style:{color:e.style.to.color,background:e.style.to.background}},[t._v("收")])]),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"title",style:{color:e.style.address.titlecolor}},[t._v(t._s(t.acceptaddress.title))]),t._v(" "),s("div",{staticClass:"desc margin-10-t",style:{color:e.style.address.desccolor}},[t._v(t._s(t.acceptaddress.address))]),t._v(" "),s("div",{staticClass:"relation margin-10-t",style:{color:e.style.address.titlecolor}},[t._v(t._s(t.acceptaddress.telephone))])])])]]:t._e()],2),t._v(" "),s("van-cell-group",{staticClass:"margin-10-t"},[s("van-cell",{attrs:{"is-link":"",clickable:""},on:{click:function(e){return t.onTogglePopup("type")}}},[s("div",{style:{color:e.style.type.titlecolor},attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.params.type.title))]),t._v(" "),t.erranderStoreExtra.goods_type&&t.erranderStoreExtra.goods_weight>0?[s("div",{attrs:{slog:"-"}},[t._v(t._s(t.erranderStoreExtra.goods_type)+"/"+t._s(t.erranderStoreExtra.goods_weight)+"公斤")])]:[s("div",{style:{color:e.style.type.desccolor},attrs:{slog:"-"}},[t._v(t._s(e.params.type.desc))])],t._v(" "),s("i",{staticClass:"icon margin-10-r font-18",class:e.params.type.icon,style:{color:e.style.type.titlecolor},attrs:{slot:"icon"},slot:"icon"})],2)],1),t._v(" "),s("van-cell-group",{staticClass:"margin-10-t"},[s("van-cell",{attrs:{"is-link":"",clickable:""},on:{click:function(e){return t.onTogglePopup("source")}}},[s("div",{style:{color:e.style.source.titlecolor},attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.params.source.title))]),t._v(" "),t.erranderStoreExtra.goods_source?[s("div",{attrs:{slog:"-"}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.erranderStoreExtra.goods_source)+"\n\t\t\t\t\t\t\t\t"),t.erranderStoreExtra.serial_sn?[t._v("#"+t._s(t.erranderStoreExtra.serial_sn))]:t._e()],2)]:[s("div",{style:{color:e.style.source.desccolor},attrs:{slog:"-"}},[t._v(t._s(e.params.source.desc))])],t._v(" "),s("i",{staticClass:"icon margin-10-r font-18",class:e.params.source.icon,style:{color:e.style.source.titlecolor},attrs:{slot:"icon"},slot:"icon"})],2),t._v(" "),s("van-cell",{staticClass:"delivery-time-cell",attrs:{"is-link":""},on:{click:function(e){return t.onTogglePopup("deliveryTime")}}},[s("div",{style:{color:e.style.taketime.titlecolor},attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.params.taketime.title))]),t._v(" "),t.erranderStoreExtra.delivery_day&&t.erranderStoreExtra.delivery_time?[s("div",{attrs:{slog:"-"}},[t._v(t._s(t.erranderStoreExtra.delivery_day)+" "+t._s(t.erranderStoreExtra.delivery_time==t.order.delivery_nowtime?"立即送出(约"+t.order.delivery_nowtime+")":t.erranderStoreExtra.delivery_time))])]:[s("div",{style:{color:e.style.taketime.desccolor},attrs:{slog:"-"}},[t._v(t._s(e.params.taketime.desc))])],t._v(" "),s("i",{staticClass:"icon margin-10-r font-18",class:e.params.taketime.icon,style:{color:e.style.taketime.titlecolor},attrs:{slot:"icon"},slot:"icon"})],2),t._v(" "),s("van-cell",{attrs:{"is-link":""}},[s("div",{style:{color:e.style.redpacket.titlecolor},attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.params.redpacket.title))]),t._v(" "),s("div",{style:{color:e.style.redpacket.desccolor},attrs:{slog:"-"}},[t._v(t._s(e.params.redpacket.desc))]),t._v(" "),s("i",{staticClass:"icon margin-10-r font-18",class:e.params.redpacket.icon,style:{color:e.style.redpacket.titlecolor},attrs:{slot:"icon"},slot:"icon"})]),t._v(" "),1==e.params.tip.status?s("van-cell",{attrs:{"is-link":""},on:{click:function(e){return t.onTogglePopup("tip")}}},[s("div",{style:{color:e.style.tip.titlecolor},attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.params.tip.title))]),t._v(" "),s("div",{style:{color:t.erranderStoreExtra.delivery_tips>0?t.diy.data.page.activebackground:e.style.tip.desccolor},attrs:{slog:"-"}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.erranderStoreExtra.delivery_tips>0?t.Lang.dollarSign+t.erranderStoreExtra.delivery_tips:e.params.tip.desc)+"\n\t\t\t\t\t\t")]),t._v(" "),s("i",{staticClass:"icon margin-10-r font-18",class:e.params.redpacket.icon,style:{color:e.style.redpacket.titlecolor},attrs:{slot:"icon"},slot:"icon"})]):t._e()],1),t._v(" "),s("van-cell-group",{staticClass:"margin-10-t"},[s("van-cell",{attrs:{"is-link":""},on:{click:function(e){return t.util.jsUrl("/plugin/pages/paotui/store/order/note",t.query,"replace")}}},[s("div",{style:{color:e.style.note.titlecolor},attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.params.note.title))]),t._v(" "),t.erranderStoreExtra.note?[s("div",{attrs:{slog:"-"}},[t._v(t._s(t.erranderStoreExtra.note))])]:[s("div",{style:{color:e.style.note.desccolor},attrs:{slog:"-"}},[t._v(t._s(e.params.note.desc))])],t._v(" "),s("i",{staticClass:"icon margin-10-r font-18",class:e.params.note.icon,style:{color:e.style.note.titlecolor},attrs:{slot:"icon"},slot:"icon"})],2)],1)]:t._e()]})],2),t._v(" "),s("div",{staticClass:"submit-bar"},[s("div",{staticClass:"left"},[s("div",[s("div",[s("span",{staticClass:"font-12",style:{color:t.basicPart.style.finalfee.namecolor}},[t._v(t._s(t.basicPart.params.finalfeetext))]),t._v(" "),s("span",{staticClass:"font-12",style:{color:t.basicPart.style.finalfee.pricecolor}},[t._v(t._s(t.Lang.dollarSign))]),s("span",{staticClass:"final-fee"},[t._v(t._s(t.order.final_fee))])]),t._v(" "),s("div",{staticClass:"distance",style:{color:t.basicPart.style.distancecolor}},[t._v(t._s(t.order.distance>0?t.order.distance+"km":"请完善地址信息"))])]),t._v(" "),s("div",{staticClass:"flex font-12",style:{color:t.basicPart.style.pricedetailcolor},on:{click:function(e){return t.onTogglePopup("fee")}}},[s("span",[t._v("价格明细")]),t._v(" "),s("i",{staticClass:"icon icon-right font-12"})])]),t._v(" "),s("div",{staticClass:"right",class:{disabled:!t.islegal},style:{color:t.basicPart.style.submit.color,background:t.basicPart.style.submit.background},on:{click:t.onSubmit}},[t._v(t._s(t.basicPart.params.submittext))])]),t._v(" "),s("van-popup",{staticClass:"popup-type",attrs:{position:"bottom"},model:{value:t.popup.type,callback:function(e){t.$set(t.popup,"type",e)},expression:"popup.type"}},[s("div",{staticClass:"popup-title border-1px-b"},[s("span",{staticClass:"font-14 c-gray",on:{click:function(e){return t.onTogglePopup("type")}}},[t._v("取消")]),t._v(" "),s("span",[t._v(t._s(t.basicPart.params.type.title))]),t._v(" "),s("span",{staticClass:"font-14",on:{click:t.onChangeTypeAndWeight}},[t._v("确定")])]),t._v(" "),s("div",{staticClass:"popup-content"},[s("div",{staticClass:"types"},t._l(t.basicPart.params.type.options,function(e,r){return s("div",{key:r,class:{"type-item":1,active:t.goodsType==e.name}},[s("div",{staticClass:"item-inner",on:{click:function(s){return t.onSelectOption("goodsType",e.name)}}},[t._v(t._s(e.name))])])}),0),t._v(" "),s("div",{staticClass:"padding-15 flex-lr"},[s("div",[t._v("重量（公斤）")]),t._v(" "),s("van-stepper",{attrs:{integer:"",min:1,max:20,step:1,"disable-input":!0},model:{value:t.goodsWeight,callback:function(e){t.goodsWeight=e},expression:"goodsWeight"}})],1),t._v(" "),s("div",{staticClass:"padding-15 flex-lr"},[s("div",[t._v("是否设置为默认")]),t._v(" "),s("van-switch",{attrs:{size:"24px","active-color":"#ff2d4b","active-value":1,"inactive-value":0},model:{value:t.isdefault,callback:function(e){t.isdefault=e},expression:"isdefault"}})],1)])]),t._v(" "),s("van-popup",{staticClass:"popup-type popup-source",attrs:{position:"bottom"},model:{value:t.popup.source,callback:function(e){t.$set(t.popup,"source",e)},expression:"popup.source"}},[s("div",{staticClass:"popup-title border-1px-b"},[s("span",{staticClass:"font-14 c-gray",on:{click:function(e){return t.onTogglePopup("source")}}},[t._v("取消")]),t._v(" "),s("span",[t._v(t._s(t.basicPart.params.source.title))]),t._v(" "),s("span",{staticClass:"font-14",on:{click:t.onChangeSourceAndSerialsn}},[t._v("确定")])]),t._v(" "),s("div",{staticClass:"popup-content"},[s("div",{staticClass:"types"},t._l(t.sources,function(e,r){return s("div",{key:r,class:{"type-item":1,active:e.title==t.goodsSource}},[s("div",{staticClass:"item-inner",on:{click:function(s){return t.onSelectOption("goodsSource",e.title)}}},[t._v(t._s(e.title))])])}),0),t._v(" "),"本平台"==t.goodsSource?s("div",{staticClass:"serial-sn"},[s("span",{staticClass:"c-gray"},[t._v("系统将自动为您分配流水号")])]):s("div",{staticClass:"serial-sn"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.serialSn,expression:"serialSn"}],attrs:{type:"text",placeholder:"请填写流水号（选填）"},domProps:{value:t.serialSn},on:{input:function(e){e.target.composing||(t.serialSn=e.target.value)}}})])])]),t._v(" "),t.order.delivery_info&&t.erranderStoreExtra.delivery_day?s("van-popup",{staticClass:"popup-delivery-time",attrs:{position:"bottom"},model:{value:t.popup.deliveryTime,callback:function(e){t.$set(t.popup,"deliveryTime",e)},expression:"popup.deliveryTime"}},[s("div",{staticClass:"popup-title flex-lr border-1px-b"},[s("span",{staticClass:"font-14",on:{click:function(e){return t.onTogglePopup("deliveryTime")}}},[t._v("取消")]),t._v(" "),s("span",[t._v(t._s(t.basicPart.params.taketime.title))]),t._v(" "),s("span",{staticClass:"opacity-1"},[t._v("确定")])]),t._v(" "),s("div",{staticClass:"popup-content flex-lr"},[s("div",{staticClass:"date"},t._l(t.order.delivery_info,function(e,r){return s("div",{staticClass:"date-item",class:{active:r==t.erranderStoreExtra.delivery_day},on:{click:function(e){return t.onSelectDay(r)}}},[t._v(t._s(r))])}),0),t._v(" "),t.order.delivery_info[t.erranderStoreExtra.delivery_day]&&t.order.delivery_info[t.erranderStoreExtra.delivery_day].times?s("div",{staticClass:"time"},t._l(t.order.delivery_info[t.erranderStoreExtra.delivery_day].times,function(e,r){return s("div",{key:r,staticClass:"time-item",class:{active:e==t.erranderStoreExtra.delivery_time},style:{color:e==t.erranderStoreExtra.delivery_time&&t.diy.data.page&&t.diy.data.page.activebackground?t.diy.data.page.activebackground:"#333"},on:{click:function(s){return t.onSelectTime(e)}}},[t._v("\n\t\t\t\t\t"+t._s(e==t.order.delivery_nowtime?"立即送出(大约"+e+")":e)+"\n\t\t\t\t\t"),s("span",{staticClass:"icon",class:{"icon-check":e==t.erranderStoreExtra.delivery_time},style:{color:e==t.erranderStoreExtra.delivery_time&&t.diy.data.page&&t.diy.data.page.activebackground?t.diy.data.page.activebackground:"#fff"}})])}),0):t._e()])]):t._e(),t._v(" "),s("van-popup",{staticClass:"popup-tip",attrs:{position:"bottom"},model:{value:t.popup.tip,callback:function(e){t.$set(t.popup,"tip",e)},expression:"popup.tip"}},[s("div",{staticClass:"popup-title flex-lr border-1px-b"},[s("span",{staticClass:"font-14 c-gray",on:{click:function(e){return t.onTogglePopup("tip")}}},[t._v("取消")]),t._v(" "),s("span",[t._v(t._s(t.basicPart.params.tip.title))]),t._v(" "),s("span",{staticClass:"font-14 c-danger",on:{click:t.onChangeTip}},[t._v("确定")])]),t._v(" "),s("div",{staticClass:"popup-content padding-10"},[t.basicPart.tipsGroup.length>0?s("ul",{staticClass:"tip-group"},t._l(t.basicPart.tipsGroup,function(e,r){return s("li",{key:r,staticClass:"tip-item-wrap",on:{click:function(s){return t.onSelectTips(e,r)}}},[s("div",{class:{"tip-item-inner":1,active:t.tipsInfo.selectIndex==r&&"select"==t.tipsInfo.dataFrom}},[t._v(t._s(e>0?t.Lang.dollarSign+e:"不加了"))])])}),0):t._e(),t._v(" "),s("div",{class:{"tip-input":1,active:t.tipsInfo.inputFocus},on:{click:t.onTipsInputFocus}},[s("span",[t._v("其他金额")]),t._v(" "),t.tipsInfo.inputFocus?[s("span",{staticClass:"margin-10-l"},[t._v(t._s(t.Lang.dollarSign))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.tipsInfo.input,expression:"tipsInfo.input"}],attrs:{type:"number",autofocus:t.tipsInfo.inputFocus},domProps:{value:t.tipsInfo.input},on:{blur:t.onBlur,focus:t.onFocus,input:function(e){e.target.composing||t.$set(t.tipsInfo,"input",e.target.value)}}})]:t._e()],2),t._v(" "),s("div",{staticClass:"flex-center font-12 margin-10-t margin-5-b c-gray"},[s("i",{staticClass:"icon icon-warn margin-5-r"}),t._v(" "),s("span",[t._v("\n\t\t\t\t\t最低"+t._s(t.basicPart.params.tip.min)+t._s(t.Lang.dollarSignCn)+"，\n\t\t\t\t\t最高"+t._s(t.basicPart.params.tip.max)+t._s(t.Lang.dollarSignCn)+"\n\t\t\t\t")])])])]),t._v(" "),s("van-popup",{staticClass:"popup-fee",attrs:{position:"bottom"},model:{value:t.popup.fee,callback:function(e){t.$set(t.popup,"fee",e)},expression:"popup.fee"}},[s("div",{staticClass:"popup-title flex-lr border-1px-b"},[s("span",{staticClass:"font-12 flex opacity-1"},[t._v("\n\t\t\t\t价格规则\n\t\t\t\t"),s("span",{staticClass:"icon icon-right font-12 "})]),t._v(" "),s("span",[t._v("费用明细")]),t._v(" "),s("span",{staticClass:"font-12 flex opacity-0",style:{color:t.diy.data.page&&t.diy.data.page.activebackground?t.diy.data.page.activebackground:"#ff2d4b"},on:{click:function(e){return t.util.jsUrl("/plugin/pages/paotui/store/order/feeRule")}}},[t._v("\n\t\t\t\t价格规则\n\t\t\t\t"),s("span",{staticClass:"icon icon-right font-12 "})])]),t._v(" "),s("div",{staticClass:"popup-content"},[s("van-cell-group",{staticClass:"border-0px"},[t._l(t.order.fees,function(e,r){return[""!=e.fee?s("van-cell",{staticClass:"border-0px",style:{color:e.fee<0&&t.diy.data.page&&t.diy.data.page.activebackground?t.diy.data.page.activebackground:"#969799"},attrs:{title:e.title,value:e.fee_cn}}):t._e()]})],2)],1)]),t._v(" "),t.redPackets.length>0?s("van-popup",{attrs:{position:"bottom"},model:{value:t.popup.redpacket,callback:function(e){t.$set(t.popup,"redpacket",e)},expression:"popup.redpacket"}},[s("div",{staticClass:"popup-redpacket"},[s("div",{staticClass:"popup-title van-hairline--bottom text-center"},[t._v("可用红包")]),t._v(" "),s("div",{staticClass:"popup-container"},[s("load",{attrs:{type:"loaded",text:"可用红包("+t.redPackets.length+"个)",bgcolor:"#f5f5f5"}}),t._v(" "),t._l(t.redPackets,function(e){return s("div",{key:e.id,staticClass:"redPacket-list content-padded"},[s("div",{staticClass:"redPacket-list-item",on:{click:function(s){return t.onSelectRedpacket(e.id)}}},[s("div",{staticClass:"redPacket-list-item-container"},[s("div",{staticClass:"redPacket-info row"},[s("div",{staticClass:"col-50"},[s("span",{staticClass:"redPacket-title"},[t._v(t._s(e.title))])]),t._v(" "),s("div",{staticClass:"col-50 text-right"},[s("div",{staticClass:"price"},[t._v(t._s(t.Lang.dollarSign)),s("span",{staticClass:"price-num"},[t._v(t._s(e.discount))])])])]),t._v(" "),s("div",{staticClass:"redPacket-use-limit row"},[s("div",{staticClass:"col-60"},[t._v(t._s(e.day_cn))]),t._v(" "),s("div",{staticClass:"col-40 text-right"},[s("p",{staticClass:"use-condition"},[t._v("满"+t._s(e.condition)+t._s(t.Lang.dollarSignCn)+"可用")])])])]),t._v(" "),s("span",{staticClass:"circle circle-left"}),t._v(" "),s("span",{staticClass:"circle circle-right"}),t._v(" "),e.id==t.order.redpacket_id?s("div",{staticClass:"selected-status"},[s("img",{staticClass:"img-100",attrs:{src:"static/img/success.png",alt:""}})]):t._e()])])})],2),t._v(" "),s("div",{staticClass:"popup-cancle van-hairline--top",on:{click:function(e){return t.onSelectRedpacket(0)}}},[t._v("不使用红包")])])]):t._e(),t._v(" "),t.getLocationStatus?t._e():s("failed-tips",{attrs:{failedTips:t.failedTips}}),t._v(" "),s("transition",{attrs:{name:"loading"}},[t.showPreLoading?s("iloading"):t._e()],1)],1)},staticRenderFns:[]};var m=s("VU/8")(_,y,!1,function(t){s("fMZG")},null,null);e.default=m.exports},fMZG:function(t,e){}});
//# sourceMappingURL=135.4c095cced0c224f2fdd7.js.map